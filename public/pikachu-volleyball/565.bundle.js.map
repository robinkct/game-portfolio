{"version":3,"file":"565.bundle.js","mappings":"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","sources":["webpack://pikachu-volleyball/./node_modules/@pixi/canvas-display/dist/esm/canvas-display.js","webpack://pikachu-volleyball/./node_modules/@pixi/canvas-prepare/dist/esm/canvas-prepare.js","webpack://pikachu-volleyball/./node_modules/@pixi/canvas-renderer/dist/esm/canvas-renderer.js","webpack://pikachu-volleyball/./node_modules/@pixi/canvas-sprite/dist/esm/canvas-sprite.js","webpack://pikachu-volleyball/./node_modules/@pixi/graphics/dist/esm/graphics.js","webpack://pikachu-volleyball/./node_modules/@pixi/text/dist/esm/text.js","webpack://pikachu-volleyball/./node_modules/@pixi/prepare/dist/esm/prepare.js","webpack://pikachu-volleyball/./node_modules/@pixi/spritesheet/dist/esm/spritesheet.js"],"sourcesContent":["/*!\n * @pixi/canvas-display - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/canvas-display is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { Container, DisplayObject } from '@pixi/display';\n\n/**\n * To be overridden by the subclass\n * @method _renderCanvas\n * @memberof PIXI.Container#\n * @protected\n * @param {PIXI.CanvasRenderer} _renderer - The renderer\n */\nContainer.prototype._renderCanvas = function _renderCanvas(_renderer) {\n    // this is where content itself gets rendered...\n};\n/**\n * Renders the object using the Canvas renderer\n * @method renderCanvas\n * @memberof PIXI.Container#\n * @param {PIXI.CanvasRenderer} renderer - The renderer\n */\nContainer.prototype.renderCanvas = function renderCanvas(renderer) {\n    // if not visible or the alpha is 0 then no need to render this\n    if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n        return;\n    }\n    if (this._mask) {\n        renderer.maskManager.pushMask(this._mask);\n    }\n    this._renderCanvas(renderer);\n    for (var i = 0, j = this.children.length; i < j; ++i) {\n        this.children[i].renderCanvas(renderer);\n    }\n    if (this._mask) {\n        renderer.maskManager.popMask(renderer);\n    }\n};\n\n/**\n * Renders the object using the Canvas renderer\n * @method renderCanvas\n * @memberof PIXI.Container#\n * @param {PIXI.CanvasRenderer} _renderer - The renderer\n */\nDisplayObject.prototype.renderCanvas = function renderCanvas(_renderer) {\n    // OVERWRITE;\n};\n//# sourceMappingURL=canvas-display.js.map\n","/*!\n * @pixi/canvas-prepare - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/canvas-prepare is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { BaseTexture } from '@pixi/core';\nimport { BasePrepare } from '@pixi/prepare';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) { if (b.hasOwnProperty(p)) { d[p] = b[p]; } } };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nvar CANVAS_START_SIZE = 16;\n/**\n * Built-in hook to upload PIXI.Texture objects to the GPU.\n * @private\n * @param prepare - Instance of CanvasPrepare\n * @param item - Item to check\n * @returns If item was uploaded.\n */\nfunction uploadBaseTextures(prepare, item) {\n    var tempPrepare = prepare;\n    if (item instanceof BaseTexture) {\n        var image = item.source;\n        // Sometimes images (like atlas images) report a size of zero, causing errors on windows phone.\n        // So if the width or height is equal to zero then use the canvas size\n        // Otherwise use whatever is smaller, the image dimensions or the canvas dimensions.\n        var imageWidth = image.width === 0 ? tempPrepare.canvas.width : Math.min(tempPrepare.canvas.width, image.width);\n        var imageHeight = image.height === 0 ? tempPrepare.canvas.height\n            : Math.min(tempPrepare.canvas.height, image.height);\n        // Only a small subsections is required to be drawn to have the whole texture uploaded to the GPU\n        // A smaller draw can be faster.\n        tempPrepare.ctx.drawImage(image, 0, 0, imageWidth, imageHeight, 0, 0, tempPrepare.canvas.width, tempPrepare.canvas.height);\n        return true;\n    }\n    return false;\n}\n/**\n * The prepare manager provides functionality to upload content to the GPU.\n *\n * This cannot be done directly for Canvas like in WebGL, but the effect can be achieved by drawing\n * textures to an offline canvas. This draw call will force the texture to be moved onto the GPU.\n *\n * An instance of this class is automatically created by default, and can be found at `renderer.plugins.prepare`\n * @class\n * @extends PIXI.BasePrepare\n * @memberof PIXI\n */\nvar CanvasPrepare = /** @class */ (function (_super) {\n    __extends(CanvasPrepare, _super);\n    /**\n     * @param renderer - A reference to the current renderer\n     */\n    function CanvasPrepare(renderer) {\n        var _this = _super.call(this, renderer) || this;\n        _this.uploadHookHelper = _this;\n        _this.canvas = document.createElement('canvas');\n        _this.canvas.width = CANVAS_START_SIZE;\n        _this.canvas.height = CANVAS_START_SIZE;\n        _this.ctx = _this.canvas.getContext('2d');\n        // Add textures to upload\n        _this.registerUploadHook(uploadBaseTextures);\n        return _this;\n    }\n    /** Destroys the plugin, don't use after this */\n    CanvasPrepare.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.ctx = null;\n        this.canvas = null;\n    };\n    return CanvasPrepare;\n}(BasePrepare));\n\nexport { CanvasPrepare };\n//# sourceMappingURL=canvas-prepare.js.map\n","/*!\n * @pixi/canvas-renderer - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/canvas-renderer is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { RenderTexture, BaseRenderTexture, CanvasResource, AbstractRenderer, Renderer, BaseTexture, Texture } from '@pixi/core';\nimport { deprecation, CanvasRenderTarget, hex2string, rgb2hex, sayHello, hex2rgb } from '@pixi/utils';\nimport { SHAPES, Matrix } from '@pixi/math';\nimport { BLEND_MODES, SCALE_MODES, RENDERER_TYPE } from '@pixi/constants';\nimport { settings } from '@pixi/settings';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) { if (b.hasOwnProperty(p)) { d[p] = b[p]; } } };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/**\n * A set of functions used to handle masking.\n *\n * Sprite masking is not supported on the CanvasRenderer.\n * @class\n * @memberof PIXI\n */\nvar CanvasMaskManager = /** @class */ (function () {\n    /** @param renderer - A reference to the current renderer */\n    function CanvasMaskManager(renderer) {\n        this._foundShapes = [];\n        this.renderer = renderer;\n    }\n    /**\n     * This method adds it to the current stack of masks.\n     * @param maskData - the maskData that will be pushed\n     */\n    CanvasMaskManager.prototype.pushMask = function (maskData) {\n        var renderer = this.renderer;\n        var maskObject = (maskData.maskObject || maskData);\n        renderer.context.save();\n        // TODO support sprite alpha masks??\n        // lots of effort required. If demand is great enough..\n        var foundShapes = this._foundShapes;\n        this.recursiveFindShapes(maskObject, foundShapes);\n        if (foundShapes.length > 0) {\n            var context = renderer.context;\n            context.beginPath();\n            for (var i = 0; i < foundShapes.length; i++) {\n                var shape = foundShapes[i];\n                var transform = shape.transform.worldTransform;\n                this.renderer.setContextTransform(transform);\n                this.renderGraphicsShape(shape);\n            }\n            foundShapes.length = 0;\n            context.clip();\n        }\n    };\n    /**\n     * Renders all PIXI.Graphics shapes in a subtree.\n     * @param container - container to scan.\n     * @param out - where to put found shapes\n     */\n    CanvasMaskManager.prototype.recursiveFindShapes = function (container, out) {\n        if (container.geometry && container.geometry.graphicsData) {\n            out.push(container);\n        }\n        var children = container.children;\n        if (children) {\n            for (var i = 0; i < children.length; i++) {\n                this.recursiveFindShapes(children[i], out);\n            }\n        }\n    };\n    /**\n     * Renders a PIXI.Graphics shape.\n     * @param graphics - The object to render.\n     */\n    CanvasMaskManager.prototype.renderGraphicsShape = function (graphics) {\n        graphics.finishPoly();\n        var context = this.renderer.context;\n        var graphicsData = graphics.geometry.graphicsData;\n        var len = graphicsData.length;\n        if (len === 0) {\n            return;\n        }\n        for (var i = 0; i < len; i++) {\n            var data = graphicsData[i];\n            var shape = data.shape;\n            if (shape.type === SHAPES.POLY) {\n                var points = shape.points;\n                var holes = data.holes;\n                var outerArea = void 0;\n                var innerArea = void 0;\n                var px = void 0;\n                var py = void 0;\n                context.moveTo(points[0], points[1]);\n                for (var j = 1; j < points.length / 2; j++) {\n                    context.lineTo(points[j * 2], points[(j * 2) + 1]);\n                }\n                if (holes.length > 0) {\n                    outerArea = 0;\n                    px = points[0];\n                    py = points[1];\n                    for (var j = 2; j + 2 < points.length; j += 2) {\n                        outerArea += ((points[j] - px) * (points[j + 3] - py))\n                            - ((points[j + 2] - px) * (points[j + 1] - py));\n                    }\n                    for (var k = 0; k < holes.length; k++) {\n                        points = holes[k].shape.points;\n                        if (!points) {\n                            continue;\n                        }\n                        innerArea = 0;\n                        px = points[0];\n                        py = points[1];\n                        for (var j = 2; j + 2 < points.length; j += 2) {\n                            innerArea += ((points[j] - px) * (points[j + 3] - py))\n                                - ((points[j + 2] - px) * (points[j + 1] - py));\n                        }\n                        if (innerArea * outerArea < 0) {\n                            context.moveTo(points[0], points[1]);\n                            for (var j = 2; j < points.length; j += 2) {\n                                context.lineTo(points[j], points[j + 1]);\n                            }\n                        }\n                        else {\n                            context.moveTo(points[points.length - 2], points[points.length - 1]);\n                            for (var j = points.length - 4; j >= 0; j -= 2) {\n                                context.lineTo(points[j], points[j + 1]);\n                            }\n                        }\n                        if (holes[k].shape.closeStroke) {\n                            context.closePath();\n                        }\n                    }\n                }\n                // if the first and last point are the same close the path - much neater :)\n                if (points[0] === points[points.length - 2] && points[1] === points[points.length - 1]) {\n                    context.closePath();\n                }\n            }\n            else if (shape.type === SHAPES.RECT) {\n                context.rect(shape.x, shape.y, shape.width, shape.height);\n                context.closePath();\n            }\n            else if (shape.type === SHAPES.CIRC) {\n                // TODO - need to be Undefined!\n                context.arc(shape.x, shape.y, shape.radius, 0, 2 * Math.PI);\n                context.closePath();\n            }\n            else if (shape.type === SHAPES.ELIP) {\n                // ellipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas\n                var w = shape.width * 2;\n                var h = shape.height * 2;\n                var x = shape.x - (w / 2);\n                var y = shape.y - (h / 2);\n                var kappa = 0.5522848;\n                var ox = (w / 2) * kappa; // control point offset horizontal\n                var oy = (h / 2) * kappa; // control point offset vertical\n                var xe = x + w; // x-end\n                var ye = y + h; // y-end\n                var xm = x + (w / 2); // x-middle\n                var ym = y + (h / 2); // y-middle\n                context.moveTo(x, ym);\n                context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n                context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n                context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n                context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n                context.closePath();\n            }\n            else if (shape.type === SHAPES.RREC) {\n                var rx = shape.x;\n                var ry = shape.y;\n                var width = shape.width;\n                var height = shape.height;\n                var radius = shape.radius;\n                var maxRadius = Math.min(width, height) / 2;\n                radius = radius > maxRadius ? maxRadius : radius;\n                context.moveTo(rx, ry + radius);\n                context.lineTo(rx, ry + height - radius);\n                context.quadraticCurveTo(rx, ry + height, rx + radius, ry + height);\n                context.lineTo(rx + width - radius, ry + height);\n                context.quadraticCurveTo(rx + width, ry + height, rx + width, ry + height - radius);\n                context.lineTo(rx + width, ry + radius);\n                context.quadraticCurveTo(rx + width, ry, rx + width - radius, ry);\n                context.lineTo(rx + radius, ry);\n                context.quadraticCurveTo(rx, ry, rx, ry + radius);\n                context.closePath();\n            }\n        }\n    };\n    /**\n     * Restores the current drawing context to the state it was before the mask was applied.\n     * @param renderer - The renderer context to use.\n     */\n    CanvasMaskManager.prototype.popMask = function (renderer) {\n        renderer.context.restore();\n        renderer.invalidateBlendMode();\n    };\n    /** Destroys this canvas mask manager. */\n    CanvasMaskManager.prototype.destroy = function () {\n        /* empty */\n    };\n    return CanvasMaskManager;\n}());\n\n/**\n * Creates a little colored canvas\n * @ignore\n * @param {string} color - The color to make the canvas\n * @returns {HTMLCanvasElement} a small canvas element\n */\nfunction createColoredCanvas(color) {\n    var canvas = document.createElement('canvas');\n    canvas.width = 6;\n    canvas.height = 1;\n    var context = canvas.getContext('2d');\n    context.fillStyle = color;\n    context.fillRect(0, 0, 6, 1);\n    return canvas;\n}\n/**\n * Checks whether the Canvas BlendModes are supported by the current browser\n * @private\n * @returns {boolean} whether they are supported\n */\nfunction canUseNewCanvasBlendModes() {\n    if (typeof document === 'undefined') {\n        return false;\n    }\n    var magenta = createColoredCanvas('#ff00ff');\n    var yellow = createColoredCanvas('#ffff00');\n    var canvas = document.createElement('canvas');\n    canvas.width = 6;\n    canvas.height = 1;\n    var context = canvas.getContext('2d');\n    context.globalCompositeOperation = 'multiply';\n    context.drawImage(magenta, 0, 0);\n    context.drawImage(yellow, 2, 0);\n    var imageData = context.getImageData(2, 0, 1, 1);\n    if (!imageData) {\n        return false;\n    }\n    var data = imageData.data;\n    return (data[0] === 255 && data[1] === 0 && data[2] === 0);\n}\n\n/**\n * Maps blend combinations to Canvas.\n * @memberof PIXI\n * @function mapCanvasBlendModesToPixi\n * @private\n * @param {string[]} [array=[]] - The array to output into.\n * @returns {string[]} Mapped modes.\n */\nfunction mapCanvasBlendModesToPixi(array) {\n    if (array === void 0) { array = []; }\n    if (canUseNewCanvasBlendModes()) {\n        array[BLEND_MODES.NORMAL] = 'source-over';\n        array[BLEND_MODES.ADD] = 'lighter'; // IS THIS OK???\n        array[BLEND_MODES.MULTIPLY] = 'multiply';\n        array[BLEND_MODES.SCREEN] = 'screen';\n        array[BLEND_MODES.OVERLAY] = 'overlay';\n        array[BLEND_MODES.DARKEN] = 'darken';\n        array[BLEND_MODES.LIGHTEN] = 'lighten';\n        array[BLEND_MODES.COLOR_DODGE] = 'color-dodge';\n        array[BLEND_MODES.COLOR_BURN] = 'color-burn';\n        array[BLEND_MODES.HARD_LIGHT] = 'hard-light';\n        array[BLEND_MODES.SOFT_LIGHT] = 'soft-light';\n        array[BLEND_MODES.DIFFERENCE] = 'difference';\n        array[BLEND_MODES.EXCLUSION] = 'exclusion';\n        array[BLEND_MODES.HUE] = 'hue';\n        array[BLEND_MODES.SATURATION] = 'saturate';\n        array[BLEND_MODES.COLOR] = 'color';\n        array[BLEND_MODES.LUMINOSITY] = 'luminosity';\n    }\n    else {\n        // this means that the browser does not support the cool new blend modes in canvas 'cough' ie 'cough'\n        array[BLEND_MODES.NORMAL] = 'source-over';\n        array[BLEND_MODES.ADD] = 'lighter'; // IS THIS OK???\n        array[BLEND_MODES.MULTIPLY] = 'source-over';\n        array[BLEND_MODES.SCREEN] = 'source-over';\n        array[BLEND_MODES.OVERLAY] = 'source-over';\n        array[BLEND_MODES.DARKEN] = 'source-over';\n        array[BLEND_MODES.LIGHTEN] = 'source-over';\n        array[BLEND_MODES.COLOR_DODGE] = 'source-over';\n        array[BLEND_MODES.COLOR_BURN] = 'source-over';\n        array[BLEND_MODES.HARD_LIGHT] = 'source-over';\n        array[BLEND_MODES.SOFT_LIGHT] = 'source-over';\n        array[BLEND_MODES.DIFFERENCE] = 'source-over';\n        array[BLEND_MODES.EXCLUSION] = 'source-over';\n        array[BLEND_MODES.HUE] = 'source-over';\n        array[BLEND_MODES.SATURATION] = 'source-over';\n        array[BLEND_MODES.COLOR] = 'source-over';\n        array[BLEND_MODES.LUMINOSITY] = 'source-over';\n    }\n    // not-premultiplied, only for webgl\n    array[BLEND_MODES.NORMAL_NPM] = array[BLEND_MODES.NORMAL];\n    array[BLEND_MODES.ADD_NPM] = array[BLEND_MODES.ADD];\n    array[BLEND_MODES.SCREEN_NPM] = array[BLEND_MODES.SCREEN];\n    // composite operations\n    array[BLEND_MODES.SRC_IN] = 'source-in';\n    array[BLEND_MODES.SRC_OUT] = 'source-out';\n    array[BLEND_MODES.SRC_ATOP] = 'source-atop';\n    array[BLEND_MODES.DST_OVER] = 'destination-over';\n    array[BLEND_MODES.DST_IN] = 'destination-in';\n    array[BLEND_MODES.DST_OUT] = 'destination-out';\n    array[BLEND_MODES.DST_ATOP] = 'destination-atop';\n    array[BLEND_MODES.XOR] = 'xor';\n    // SUBTRACT from flash, does not exist in canvas\n    array[BLEND_MODES.SUBTRACT] = 'source-over';\n    return array;\n}\n\nvar tempMatrix = new Matrix();\n/**\n * The CanvasRenderer draws the scene and all its content onto a 2d canvas.\n *\n * This renderer should be used for browsers that do not support WebGL.\n * Don't forget to add the CanvasRenderer.view to your DOM or you will not see anything!\n * @class\n * @memberof PIXI\n * @extends PIXI.AbstractRenderer\n */\nvar CanvasRenderer = /** @class */ (function (_super) {\n    __extends(CanvasRenderer, _super);\n    /**\n     * @param options - The optional renderer parameters\n     * @param {number} [options.width=800] - the width of the screen\n     * @param {number} [options.height=600] - the height of the screen\n     * @param {HTMLCanvasElement} [options.view] - the canvas to use as a view, optional\n     * @param {boolean} [options.useContextAlpha=true] - Pass-through value for canvas' context `alpha` property.\n     *   If you want to set transparency, please use `backgroundAlpha`. This option is for cases where the\n     *   canvas needs to be opaque, possibly for performance reasons on some older devices.\n     * @param {boolean} [options.autoDensity=false] - Resizes renderer view in CSS pixels to allow for\n     *   resolutions other than 1\n     * @param {boolean} [options.antialias=false] - sets antialias\n     * @param {number} [options.resolution=PIXI.settings.RESOLUTION] - The resolution / device pixel ratio of the renderer.\n     * @param {boolean} [options.preserveDrawingBuffer=false] - enables drawing buffer preservation,\n     *  enable this if you need to call toDataUrl on the webgl context.\n     * @param {boolean} [options.clearBeforeRender=true] - This sets if the renderer will clear the canvas or\n     *      not before the new render pass.\n     * @param {number} [options.backgroundColor=0x000000] - The background color of the rendered area\n     *  (shown if not transparent).\n     * @param {number} [options.backgroundAlpha=1] - Value from 0 (fully transparent) to 1 (fully opaque).\n     */\n    function CanvasRenderer(options) {\n        var _this = _super.call(this, RENDERER_TYPE.CANVAS, options) || this;\n        /** Boolean flag controlling canvas refresh. */\n        _this.refresh = true;\n        /**\n         * Instance of a CanvasMaskManager, handles masking when using the canvas renderer.\n         * @member {PIXI.CanvasMaskManager}\n         */\n        _this.maskManager = new CanvasMaskManager(_this);\n        /** The canvas property used to set the canvas smoothing property. */\n        _this.smoothProperty = 'imageSmoothingEnabled';\n        /** Tracks the blend modes useful for this renderer. */\n        _this.blendModes = mapCanvasBlendModesToPixi();\n        _this.renderingToScreen = false;\n        _this._activeBlendMode = null;\n        /** Projection transform, passed in render() stored here */\n        _this._projTransform = null;\n        /** @private */\n        _this._outerBlend = false;\n        _this.rootContext = _this.view.getContext('2d', { alpha: _this.useContextAlpha });\n        _this.context = _this.rootContext;\n        if (!_this.rootContext.imageSmoothingEnabled) {\n            var rc = _this.rootContext;\n            if (rc.webkitImageSmoothingEnabled) {\n                _this.smoothProperty = 'webkitImageSmoothingEnabled';\n            }\n            else if (rc.mozImageSmoothingEnabled) {\n                _this.smoothProperty = 'mozImageSmoothingEnabled';\n            }\n            else if (rc.oImageSmoothingEnabled) {\n                _this.smoothProperty = 'oImageSmoothingEnabled';\n            }\n            else if (rc.msImageSmoothingEnabled) {\n                _this.smoothProperty = 'msImageSmoothingEnabled';\n            }\n        }\n        _this.initPlugins(CanvasRenderer.__plugins);\n        sayHello('Canvas');\n        _this.resize(_this.options.width, _this.options.height);\n        return _this;\n    }\n    /** Adds a new system to the renderer. It does nothing in the CanvasRenderer. */\n    CanvasRenderer.prototype.addSystem = function () {\n        return this;\n    };\n    /** @ignore */\n    CanvasRenderer.prototype.render = function (displayObject, options) {\n        if (!this.view) {\n            return;\n        }\n        var renderTexture;\n        var clear;\n        var transform;\n        var skipUpdateTransform;\n        if (options) {\n            if (options instanceof RenderTexture || options instanceof BaseRenderTexture) {\n                deprecation('6.0.0', 'CanvasRenderer#render arguments changed, use options instead.');\n                /* eslint-disable prefer-rest-params */\n                renderTexture = options;\n                clear = arguments[2];\n                transform = arguments[3];\n                skipUpdateTransform = arguments[4];\n                /* eslint-enable prefer-rest-params */\n            }\n            else {\n                renderTexture = options.renderTexture;\n                clear = options.clear;\n                transform = options.transform;\n                skipUpdateTransform = options.skipUpdateTransform;\n            }\n        }\n        // can be handy to know!\n        this.renderingToScreen = !renderTexture;\n        this.emit('prerender');\n        var rootResolution = this.resolution;\n        if (renderTexture) {\n            renderTexture = renderTexture.castToBaseTexture();\n            if (!renderTexture._canvasRenderTarget) {\n                renderTexture._canvasRenderTarget = new CanvasRenderTarget(renderTexture.width, renderTexture.height, renderTexture.resolution);\n                renderTexture.resource = new CanvasResource(renderTexture._canvasRenderTarget.canvas);\n                renderTexture.valid = true;\n            }\n            this.context = renderTexture._canvasRenderTarget.context;\n            this.resolution = renderTexture._canvasRenderTarget.resolution;\n        }\n        else {\n            this.context = this.rootContext;\n        }\n        var context = this.context;\n        this._projTransform = transform || null;\n        if (!renderTexture) {\n            this._lastObjectRendered = displayObject;\n        }\n        if (!skipUpdateTransform) {\n            // update the scene graph\n            var cacheParent = displayObject.enableTempParent();\n            displayObject.updateTransform();\n            displayObject.disableTempParent(cacheParent);\n        }\n        context.save();\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        context.globalAlpha = 1;\n        this._activeBlendMode = BLEND_MODES.NORMAL;\n        this._outerBlend = false;\n        context.globalCompositeOperation = this.blendModes[BLEND_MODES.NORMAL];\n        if (clear !== undefined ? clear : this.clearBeforeRender) {\n            if (this.renderingToScreen) {\n                context.clearRect(0, 0, this.width, this.height);\n                if (this.backgroundAlpha > 0) {\n                    context.globalAlpha = this.useContextAlpha ? this.backgroundAlpha : 1;\n                    context.fillStyle = this._backgroundColorString;\n                    context.fillRect(0, 0, this.width, this.height);\n                    context.globalAlpha = 1;\n                }\n            }\n            else {\n                renderTexture = renderTexture;\n                renderTexture._canvasRenderTarget.clear();\n                var clearColor = renderTexture.clearColor;\n                if (clearColor[3] > 0) {\n                    context.globalAlpha = this.useContextAlpha ? clearColor[3] : 1;\n                    context.fillStyle = hex2string(rgb2hex(clearColor));\n                    context.fillRect(0, 0, renderTexture.realWidth, renderTexture.realHeight);\n                    context.globalAlpha = 1;\n                }\n            }\n        }\n        // TODO RENDER TARGET STUFF HERE..\n        var tempContext = this.context;\n        this.context = context;\n        displayObject.renderCanvas(this);\n        this.context = tempContext;\n        context.restore();\n        this.resolution = rootResolution;\n        this._projTransform = null;\n        this.emit('postrender');\n    };\n    /**\n     * Sets matrix of context.\n     * called only from render() methods\n     * takes care about resolution\n     * @param transform - world matrix of current element\n     * @param roundPixels - whether to round (tx,ty) coords\n     * @param localResolution - If specified, used instead of `renderer.resolution` for local scaling\n     */\n    CanvasRenderer.prototype.setContextTransform = function (transform, roundPixels, localResolution) {\n        var mat = transform;\n        var proj = this._projTransform;\n        var resolution = this.resolution;\n        localResolution = localResolution || resolution;\n        if (proj) {\n            mat = tempMatrix;\n            mat.copyFrom(transform);\n            mat.prepend(proj);\n        }\n        if (roundPixels) {\n            this.context.setTransform(mat.a * localResolution, mat.b * localResolution, mat.c * localResolution, mat.d * localResolution, (mat.tx * resolution) | 0, (mat.ty * resolution) | 0);\n        }\n        else {\n            this.context.setTransform(mat.a * localResolution, mat.b * localResolution, mat.c * localResolution, mat.d * localResolution, mat.tx * resolution, mat.ty * resolution);\n        }\n    };\n    /**\n     * Clear the canvas of renderer.\n     * @param {string} [clearColor] - Clear the canvas with this color, except the canvas is transparent.\n     * @param {number} [alpha] - Alpha to apply to the background fill color.\n     */\n    CanvasRenderer.prototype.clear = function (clearColor, alpha) {\n        if (clearColor === void 0) { clearColor = this._backgroundColorString; }\n        if (alpha === void 0) { alpha = this.backgroundAlpha; }\n        var context = this.context;\n        context.clearRect(0, 0, this.width, this.height);\n        if (clearColor) {\n            context.globalAlpha = this.useContextAlpha ? alpha : 1;\n            context.fillStyle = clearColor;\n            context.fillRect(0, 0, this.width, this.height);\n            context.globalAlpha = 1;\n        }\n    };\n    /**\n     * Sets the blend mode of the renderer.\n     * @param {number} blendMode - See {@link PIXI.BLEND_MODES} for valid values.\n     * @param {boolean} [readyForOuterBlend=false] - Some blendModes are dangerous, they affect outer space of sprite.\n     * Pass `true` only if you are ready to use them.\n     */\n    CanvasRenderer.prototype.setBlendMode = function (blendMode, readyForOuterBlend) {\n        var outerBlend = blendMode === BLEND_MODES.SRC_IN\n            || blendMode === BLEND_MODES.SRC_OUT\n            || blendMode === BLEND_MODES.DST_IN\n            || blendMode === BLEND_MODES.DST_ATOP;\n        if (!readyForOuterBlend && outerBlend) {\n            blendMode = BLEND_MODES.NORMAL;\n        }\n        if (this._activeBlendMode === blendMode) {\n            return;\n        }\n        this._activeBlendMode = blendMode;\n        this._outerBlend = outerBlend;\n        this.context.globalCompositeOperation = this.blendModes[blendMode];\n    };\n    /**\n     * Removes everything from the renderer and optionally removes the Canvas DOM element.\n     * @param {boolean} [removeView=false] - Removes the Canvas element from the DOM.\n     */\n    CanvasRenderer.prototype.destroy = function (removeView) {\n        // call the base destroy\n        _super.prototype.destroy.call(this, removeView);\n        this.context = null;\n        this.refresh = true;\n        this.maskManager.destroy();\n        this.maskManager = null;\n        this.smoothProperty = null;\n    };\n    /**\n     * Resizes the canvas view to the specified width and height.\n     * @extends PIXI.AbstractRenderer#resize\n     * @param desiredScreenWidth - the desired width of the screen\n     * @param desiredScreenHeight - the desired height of the screen\n     */\n    CanvasRenderer.prototype.resize = function (desiredScreenWidth, desiredScreenHeight) {\n        _super.prototype.resize.call(this, desiredScreenWidth, desiredScreenHeight);\n        // reset the scale mode.. oddly this seems to be reset when the canvas is resized.\n        // surely a browser bug?? Let PixiJS fix that for you..\n        if (this.smoothProperty) {\n            this.rootContext[this.smoothProperty] = (settings.SCALE_MODE === SCALE_MODES.LINEAR);\n        }\n    };\n    /** Checks if blend mode has changed. */\n    CanvasRenderer.prototype.invalidateBlendMode = function () {\n        this._activeBlendMode = this.blendModes.indexOf(this.context.globalCompositeOperation);\n    };\n    /**\n     * Collection of installed plugins. These are included by default in PIXI, but can be excluded\n     * by creating a custom build. Consult the README for more information about creating custom\n     * builds and excluding plugins.\n     * @member {object} plugins\n     * @readonly\n     * @property {PIXI.AccessibilityManager} accessibility Support tabbing interactive elements.\n     * @property {PIXI.CanvasExtract} extract Extract image data from renderer.\n     * @property {PIXI.InteractionManager} interaction Handles mouse, touch and pointer events.\n     * @property {PIXI.CanvasPrepare} prepare Pre-render display objects.\n     */\n    /**\n     * Adds a plugin to the renderer.\n     * @param pluginName - The name of the plugin.\n     * @param ctor - The constructor function or class for the plugin.\n     */\n    CanvasRenderer.registerPlugin = function (pluginName, ctor) {\n        CanvasRenderer.__plugins = CanvasRenderer.__plugins || {};\n        CanvasRenderer.__plugins[pluginName] = ctor;\n    };\n    return CanvasRenderer;\n}(AbstractRenderer));\n\n/**\n * Utility methods for Sprite/Texture tinting.\n *\n * Tinting with the CanvasRenderer involves creating a new canvas to use as a texture,\n * so be aware of the performance implications.\n * @namespace PIXI.canvasUtils\n * @memberof PIXI\n */\nvar canvasUtils = {\n    canvas: null,\n    /**\n     * Basically this method just needs a sprite and a color and tints the sprite with the given color.\n     * @memberof PIXI.canvasUtils\n     * @param {PIXI.Sprite} sprite - the sprite to tint\n     * @param sprite.texture\n     * @param {number} color - the color to use to tint the sprite with\n     * @returns {HTMLCanvasElement} The tinted canvas\n     */\n    getTintedCanvas: function (sprite, color) {\n        var texture = sprite.texture;\n        color = canvasUtils.roundColor(color);\n        var stringColor = \"#\" + (\"00000\" + (color | 0).toString(16)).slice(-6);\n        texture.tintCache = texture.tintCache || {};\n        var cachedCanvas = texture.tintCache[stringColor];\n        var canvas;\n        if (cachedCanvas) {\n            if (cachedCanvas.tintId === texture._updateID) {\n                return texture.tintCache[stringColor];\n            }\n            canvas = texture.tintCache[stringColor];\n        }\n        else {\n            canvas = document.createElement('canvas');\n        }\n        canvasUtils.tintMethod(texture, color, canvas);\n        canvas.tintId = texture._updateID;\n        if (canvasUtils.convertTintToImage) {\n            // is this better?\n            var tintImage = new Image();\n            tintImage.src = canvas.toDataURL();\n            texture.tintCache[stringColor] = tintImage;\n        }\n        else {\n            texture.tintCache[stringColor] = canvas;\n        }\n        return canvas;\n    },\n    /**\n     * Basically this method just needs a sprite and a color and tints the sprite with the given color.\n     * @memberof PIXI.canvasUtils\n     * @param {PIXI.Texture} texture - the sprite to tint\n     * @param {number} color - the color to use to tint the sprite with\n     * @returns {HTMLCanvasElement} The tinted canvas\n     */\n    getTintedPattern: function (texture, color) {\n        color = canvasUtils.roundColor(color);\n        var stringColor = \"#\" + (\"00000\" + (color | 0).toString(16)).slice(-6);\n        texture.patternCache = texture.patternCache || {};\n        var pattern = texture.patternCache[stringColor];\n        if (pattern && pattern.tintId === texture._updateID) {\n            return pattern;\n        }\n        if (!canvasUtils.canvas) {\n            canvasUtils.canvas = document.createElement('canvas');\n        }\n        canvasUtils.tintMethod(texture, color, canvasUtils.canvas);\n        pattern = canvasUtils.canvas.getContext('2d').createPattern(canvasUtils.canvas, 'repeat');\n        pattern.tintId = texture._updateID;\n        texture.patternCache[stringColor] = pattern;\n        return pattern;\n    },\n    /**\n     * Tint a texture using the 'multiply' operation.\n     * @memberof PIXI.canvasUtils\n     * @param {PIXI.Texture} texture - the texture to tint\n     * @param {number} color - the color to use to tint the sprite with\n     * @param {HTMLCanvasElement} canvas - the current canvas\n     */\n    tintWithMultiply: function (texture, color, canvas) {\n        var context = canvas.getContext('2d');\n        var crop = texture._frame.clone();\n        var resolution = texture.baseTexture.resolution;\n        crop.x *= resolution;\n        crop.y *= resolution;\n        crop.width *= resolution;\n        crop.height *= resolution;\n        canvas.width = Math.ceil(crop.width);\n        canvas.height = Math.ceil(crop.height);\n        context.save();\n        context.fillStyle = \"#\" + (\"00000\" + (color | 0).toString(16)).slice(-6);\n        context.fillRect(0, 0, crop.width, crop.height);\n        context.globalCompositeOperation = 'multiply';\n        var source = texture.baseTexture.getDrawableSource();\n        context.drawImage(source, crop.x, crop.y, crop.width, crop.height, 0, 0, crop.width, crop.height);\n        context.globalCompositeOperation = 'destination-atop';\n        context.drawImage(source, crop.x, crop.y, crop.width, crop.height, 0, 0, crop.width, crop.height);\n        context.restore();\n    },\n    /**\n     * Tint a texture using the 'overlay' operation.\n     * @memberof PIXI.canvasUtils\n     * @param {PIXI.Texture} texture - the texture to tint\n     * @param {number} color - the color to use to tint the sprite with\n     * @param {HTMLCanvasElement} canvas - the current canvas\n     */\n    tintWithOverlay: function (texture, color, canvas) {\n        var context = canvas.getContext('2d');\n        var crop = texture._frame.clone();\n        var resolution = texture.baseTexture.resolution;\n        crop.x *= resolution;\n        crop.y *= resolution;\n        crop.width *= resolution;\n        crop.height *= resolution;\n        canvas.width = Math.ceil(crop.width);\n        canvas.height = Math.ceil(crop.height);\n        context.save();\n        context.globalCompositeOperation = 'copy';\n        context.fillStyle = \"#\" + (\"00000\" + (color | 0).toString(16)).slice(-6);\n        context.fillRect(0, 0, crop.width, crop.height);\n        context.globalCompositeOperation = 'destination-atop';\n        context.drawImage(texture.baseTexture.getDrawableSource(), crop.x, crop.y, crop.width, crop.height, 0, 0, crop.width, crop.height);\n        // context.globalCompositeOperation = 'copy';\n        context.restore();\n    },\n    /**\n     * Tint a texture pixel per pixel.\n     * @memberof PIXI.canvasUtils\n     * @param {PIXI.Texture} texture - the texture to tint\n     * @param {number} color - the color to use to tint the sprite with\n     * @param {HTMLCanvasElement} canvas - the current canvas\n     */\n    tintWithPerPixel: function (texture, color, canvas) {\n        var context = canvas.getContext('2d');\n        var crop = texture._frame.clone();\n        var resolution = texture.baseTexture.resolution;\n        crop.x *= resolution;\n        crop.y *= resolution;\n        crop.width *= resolution;\n        crop.height *= resolution;\n        canvas.width = Math.ceil(crop.width);\n        canvas.height = Math.ceil(crop.height);\n        context.save();\n        context.globalCompositeOperation = 'copy';\n        context.drawImage(texture.baseTexture.getDrawableSource(), crop.x, crop.y, crop.width, crop.height, 0, 0, crop.width, crop.height);\n        context.restore();\n        var rgbValues = hex2rgb(color);\n        var r = rgbValues[0];\n        var g = rgbValues[1];\n        var b = rgbValues[2];\n        var pixelData = context.getImageData(0, 0, crop.width, crop.height);\n        var pixels = pixelData.data;\n        for (var i = 0; i < pixels.length; i += 4) {\n            pixels[i + 0] *= r;\n            pixels[i + 1] *= g;\n            pixels[i + 2] *= b;\n        }\n        context.putImageData(pixelData, 0, 0);\n    },\n    /**\n     * Rounds the specified color according to the canvasUtils.cacheStepsPerColorChannel.\n     * @memberof PIXI.canvasUtils\n     * @param {number} color - the color to round, should be a hex color\n     * @returns {number} The rounded color.\n     */\n    roundColor: function (color) {\n        var step = canvasUtils.cacheStepsPerColorChannel;\n        var rgbValues = hex2rgb(color);\n        rgbValues[0] = Math.min(255, (rgbValues[0] / step) * step);\n        rgbValues[1] = Math.min(255, (rgbValues[1] / step) * step);\n        rgbValues[2] = Math.min(255, (rgbValues[2] / step) * step);\n        return rgb2hex(rgbValues);\n    },\n    /**\n     * Number of steps which will be used as a cap when rounding colors.\n     * @memberof PIXI.canvasUtils\n     * @type {number}\n     */\n    cacheStepsPerColorChannel: 8,\n    /**\n     * Tint cache boolean flag.\n     * @memberof PIXI.canvasUtils\n     * @type {boolean}\n     */\n    convertTintToImage: false,\n    /**\n     * Whether or not the Canvas BlendModes are supported, consequently the ability to tint using the multiply method.\n     * @memberof PIXI.canvasUtils\n     * @type {boolean}\n     */\n    canUseMultiply: canUseNewCanvasBlendModes(),\n    /**\n     * The tinting method that will be used.\n     * @memberof PIXI.canvasUtils\n     * @type {Function}\n     */\n    tintMethod: null,\n};\ncanvasUtils.tintMethod = canvasUtils.canUseMultiply ? canvasUtils.tintWithMultiply : canvasUtils.tintWithPerPixel;\n\n// Reference to Renderer.create static function\nvar parentCreate = Renderer.create;\n/**\n * Override the Renderer.create to fallback to use CanvasRenderer.\n * Also supports forceCanvas option with Application or autoDetectRenderer.\n * @param options\n * @private\n */\nRenderer.create = function create(options) {\n    var forceCanvas = options && options.forceCanvas;\n    if (!forceCanvas) {\n        try {\n            return parentCreate(options);\n        }\n        catch (err) {\n            // swallow WebGL-unsupported error\n        }\n    }\n    return new CanvasRenderer(options);\n};\n\n/**\n * Get the drawable source, such as HTMLCanvasElement or HTMLImageElement suitable\n * for rendering with CanvasRenderer. Provided by **@pixi/canvas-renderer** package.\n * @method getDrawableSource\n * @memberof PIXI.BaseTexture#\n * @returns {PIXI.ICanvasImageSource} Source to render with CanvasRenderer\n */\nBaseTexture.prototype.getDrawableSource = function getDrawableSource() {\n    var resource = this.resource;\n    return resource ? (resource.bitmap || resource.source) : null;\n};\n/**\n * A reference to the canvas render target (we only need one as this can be shared across renderers)\n * @protected\n * @member {PIXI.utils.CanvasRenderTarget} _canvasRenderTarget\n * @memberof PIXI.BaseRenderTexture#\n */\nBaseRenderTexture.prototype._canvasRenderTarget = null;\nTexture.prototype.patternCache = null;\nTexture.prototype.tintCache = null;\n\nexport { CanvasRenderer, canUseNewCanvasBlendModes, canvasUtils };\n//# sourceMappingURL=canvas-renderer.js.map\n","/*!\n * @pixi/canvas-sprite - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/canvas-sprite is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { SCALE_MODES, BLEND_MODES } from '@pixi/constants';\nimport { Matrix, groupD8 } from '@pixi/math';\nimport { canvasUtils } from '@pixi/canvas-renderer';\nimport { Sprite } from '@pixi/sprite';\n\nvar canvasRenderWorldTransform = new Matrix();\n/**\n * Types that can be passed to drawImage\n * @typedef {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | ImageBitmap} ICanvasImageSource\n * @memberof PIXI\n */\n/*\n * @author Mat Groves\n *\n * Big thanks to the very clever Matt DesLauriers <mattdesl> https://github.com/mattdesl/\n * for creating the original PixiJS version!\n * Also a thanks to https://github.com/bchevalier for tweaking the tint and alpha so that they now\n * share 4 bytes on the vertex buffer\n *\n * Heavily inspired by LibGDX's CanvasSpriteRenderer:\n * https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/CanvasSpriteRenderer.java\n */\n/**\n * Renderer dedicated to drawing and batching sprites.\n * @class\n * @protected\n * @memberof PIXI\n */\nvar CanvasSpriteRenderer = /** @class */ (function () {\n    /** @param renderer - A reference to the current renderer */\n    function CanvasSpriteRenderer(renderer) {\n        this.renderer = renderer;\n    }\n    /**\n     * Renders the sprite object.\n     * @param sprite - the sprite to render when using this spritebatch\n     */\n    CanvasSpriteRenderer.prototype.render = function (sprite) {\n        var texture = sprite._texture;\n        var renderer = this.renderer;\n        var context = renderer.context;\n        if (!texture.valid) {\n            return;\n        }\n        var width = texture._frame.width;\n        var height = texture._frame.height;\n        var wt = sprite.transform.worldTransform;\n        var dx = 0;\n        var dy = 0;\n        var source = texture.baseTexture.getDrawableSource();\n        if (texture.orig.width <= 0 || texture.orig.height <= 0 || !texture.valid || !source) {\n            return;\n        }\n        renderer.setBlendMode(sprite.blendMode, true);\n        renderer.context.globalAlpha = sprite.worldAlpha;\n        // If smoothingEnabled is supported and we need to change the smoothing property for sprite texture\n        var smoothingEnabled = texture.baseTexture.scaleMode === SCALE_MODES.LINEAR;\n        if (renderer.smoothProperty\n            && renderer.context[renderer.smoothProperty] !== smoothingEnabled) {\n            context[renderer.smoothProperty] = smoothingEnabled;\n        }\n        if (texture.trim) {\n            dx = (texture.trim.width / 2) + texture.trim.x - (sprite.anchor.x * texture.orig.width);\n            dy = (texture.trim.height / 2) + texture.trim.y - (sprite.anchor.y * texture.orig.height);\n        }\n        else {\n            dx = (0.5 - sprite.anchor.x) * texture.orig.width;\n            dy = (0.5 - sprite.anchor.y) * texture.orig.height;\n        }\n        if (texture.rotate) {\n            wt.copyTo(canvasRenderWorldTransform);\n            wt = canvasRenderWorldTransform;\n            groupD8.matrixAppendRotationInv(wt, texture.rotate, dx, dy);\n            // the anchor has already been applied above, so lets set it to zero\n            dx = 0;\n            dy = 0;\n        }\n        dx -= width / 2;\n        dy -= height / 2;\n        renderer.setContextTransform(wt, sprite.roundPixels, 1);\n        // Allow for pixel rounding\n        if (sprite.roundPixels) {\n            dx = dx | 0;\n            dy = dy | 0;\n        }\n        var resolution = texture.baseTexture.resolution;\n        var outerBlend = renderer._outerBlend;\n        if (outerBlend) {\n            context.save();\n            context.beginPath();\n            context.rect(dx * renderer.resolution, dy * renderer.resolution, width * renderer.resolution, height * renderer.resolution);\n            context.clip();\n        }\n        if (sprite.tint !== 0xFFFFFF) {\n            if (sprite._cachedTint !== sprite.tint || sprite._tintedCanvas.tintId !== sprite._texture._updateID) {\n                sprite._cachedTint = sprite.tint;\n                // TODO clean up caching - how to clean up the caches?\n                sprite._tintedCanvas = canvasUtils.getTintedCanvas(sprite, sprite.tint);\n            }\n            context.drawImage(sprite._tintedCanvas, 0, 0, Math.floor(width * resolution), Math.floor(height * resolution), Math.floor(dx * renderer.resolution), Math.floor(dy * renderer.resolution), Math.floor(width * renderer.resolution), Math.floor(height * renderer.resolution));\n        }\n        else {\n            context.drawImage(source, texture._frame.x * resolution, texture._frame.y * resolution, Math.floor(width * resolution), Math.floor(height * resolution), Math.floor(dx * renderer.resolution), Math.floor(dy * renderer.resolution), Math.floor(width * renderer.resolution), Math.floor(height * renderer.resolution));\n        }\n        if (outerBlend) {\n            context.restore();\n        }\n        // just in case, leaking outer blend here will be catastrophic!\n        renderer.setBlendMode(BLEND_MODES.NORMAL);\n    };\n    /** destroy the sprite object */\n    CanvasSpriteRenderer.prototype.destroy = function () {\n        this.renderer = null;\n    };\n    return CanvasSpriteRenderer;\n}());\n\n/**\n * Cached tinted texture.\n * @memberof PIXI.Sprite#\n * @member {HTMLCanvasElement} _tintedCanvas\n * @protected\n */\nSprite.prototype._tintedCanvas = null;\n/**\n * Renders the object using the Canvas renderer\n * @private\n * @method _renderCanvas\n * @memberof PIXI.Sprite#\n * @param {PIXI.CanvasRenderer} renderer - The renderer\n */\nSprite.prototype._renderCanvas = function _renderCanvas(renderer) {\n    renderer.plugins.sprite.render(this);\n};\n\nexport { CanvasSpriteRenderer };\n//# sourceMappingURL=canvas-sprite.js.map\n","/*!\n * @pixi/graphics - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/graphics is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { Texture, BaseTexture, BatchDrawCall, BatchTextureArray, BatchGeometry, UniformGroup, Shader, State } from '@pixi/core';\nimport { SHAPES, Point, PI_2, Matrix, Polygon, Rectangle, RoundedRectangle, Circle, Ellipse } from '@pixi/math';\nimport { earcut, premultiplyTint, hex2rgb } from '@pixi/utils';\nimport { WRAP_MODES, DRAW_MODES, BLEND_MODES } from '@pixi/constants';\nimport { Bounds, Container } from '@pixi/display';\n\n/**\n * Supported line joints in `PIXI.LineStyle` for graphics.\n * @see PIXI.Graphics#lineStyle\n * @see https://graphicdesign.stackexchange.com/questions/59018/what-is-a-bevel-join-of-two-lines-exactly-illustrator\n * @name LINE_JOIN\n * @memberof PIXI\n * @static\n * @enum {string}\n * @property {string} MITER - 'miter': make a sharp corner where outer part of lines meet\n * @property {string} BEVEL - 'bevel': add a square butt at each end of line segment and fill the triangle at turn\n * @property {string} ROUND - 'round': add an arc at the joint\n */\nvar LINE_JOIN;\n(function (LINE_JOIN) {\n    LINE_JOIN[\"MITER\"] = \"miter\";\n    LINE_JOIN[\"BEVEL\"] = \"bevel\";\n    LINE_JOIN[\"ROUND\"] = \"round\";\n})(LINE_JOIN || (LINE_JOIN = {}));\n/**\n * Support line caps in `PIXI.LineStyle` for graphics.\n * @see PIXI.Graphics#lineStyle\n * @name LINE_CAP\n * @memberof PIXI\n * @static\n * @enum {string}\n * @property {string} BUTT - 'butt': don't add any cap at line ends (leaves orthogonal edges)\n * @property {string} ROUND - 'round': add semicircle at ends\n * @property {string} SQUARE - 'square': add square at end (like `BUTT` except more length at end)\n */\nvar LINE_CAP;\n(function (LINE_CAP) {\n    LINE_CAP[\"BUTT\"] = \"butt\";\n    LINE_CAP[\"ROUND\"] = \"round\";\n    LINE_CAP[\"SQUARE\"] = \"square\";\n})(LINE_CAP || (LINE_CAP = {}));\n/**\n * Graphics curves resolution settings. If `adaptive` flag is set to `true`,\n * the resolution is calculated based on the curve's length to ensure better visual quality.\n * Adaptive draw works with `bezierCurveTo` and `quadraticCurveTo`.\n * @static\n * @constant\n * @memberof PIXI\n * @name GRAPHICS_CURVES\n * @type {object}\n * @property {boolean} [adaptive=true] - flag indicating if the resolution should be adaptive\n * @property {number} [maxLength=10] - maximal length of a single segment of the curve (if adaptive = false, ignored)\n * @property {number} [minSegments=8] - minimal number of segments in the curve (if adaptive = false, ignored)\n * @property {number} [maxSegments=2048] - maximal number of segments in the curve (if adaptive = false, ignored)\n */\nvar GRAPHICS_CURVES = {\n    adaptive: true,\n    maxLength: 10,\n    minSegments: 8,\n    maxSegments: 2048,\n    epsilon: 0.0001,\n    _segmentsCount: function (length, defaultSegments) {\n        if (defaultSegments === void 0) { defaultSegments = 20; }\n        if (!this.adaptive || !length || isNaN(length)) {\n            return defaultSegments;\n        }\n        var result = Math.ceil(length / this.maxLength);\n        if (result < this.minSegments) {\n            result = this.minSegments;\n        }\n        else if (result > this.maxSegments) {\n            result = this.maxSegments;\n        }\n        return result;\n    },\n};\n\n/**\n * Fill style object for Graphics.\n * @memberof PIXI\n */\nvar FillStyle = /** @class */ (function () {\n    function FillStyle() {\n        /**\n         * The hex color value used when coloring the Graphics object.\n         * @default 0xFFFFFF\n         */\n        this.color = 0xFFFFFF;\n        /** The alpha value used when filling the Graphics object. */\n        this.alpha = 1.0;\n        /**\n         * The texture to be used for the fill.\n         * @default 0\n         */\n        this.texture = Texture.WHITE;\n        /**\n         * The transform applied to the texture.\n         * @default null\n         */\n        this.matrix = null;\n        /** If the current fill is visible. */\n        this.visible = false;\n        this.reset();\n    }\n    /** Clones the object */\n    FillStyle.prototype.clone = function () {\n        var obj = new FillStyle();\n        obj.color = this.color;\n        obj.alpha = this.alpha;\n        obj.texture = this.texture;\n        obj.matrix = this.matrix;\n        obj.visible = this.visible;\n        return obj;\n    };\n    /** Reset */\n    FillStyle.prototype.reset = function () {\n        this.color = 0xFFFFFF;\n        this.alpha = 1;\n        this.texture = Texture.WHITE;\n        this.matrix = null;\n        this.visible = false;\n    };\n    /** Destroy and don't use after this. */\n    FillStyle.prototype.destroy = function () {\n        this.texture = null;\n        this.matrix = null;\n    };\n    return FillStyle;\n}());\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) { if (b.hasOwnProperty(p)) { d[p] = b[p]; } } };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nfunction fixOrientation(points, hole) {\n    var _a, _b;\n    if (hole === void 0) { hole = false; }\n    var m = points.length;\n    if (m < 6) {\n        return;\n    }\n    var area = 0;\n    for (var i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2) {\n        var x2 = points[i];\n        var y2 = points[i + 1];\n        area += (x2 - x1) * (y2 + y1);\n        x1 = x2;\n        y1 = y2;\n    }\n    if ((!hole && area > 0) || (hole && area <= 0)) {\n        var n = m / 2;\n        for (var i = n + (n % 2); i < m; i += 2) {\n            var i1 = m - i - 2;\n            var i2 = m - i - 1;\n            var i3 = i;\n            var i4 = i + 1;\n            _a = [points[i3], points[i1]], points[i1] = _a[0], points[i3] = _a[1];\n            _b = [points[i4], points[i2]], points[i2] = _b[0], points[i4] = _b[1];\n        }\n    }\n}\n/**\n * Builds a polygon to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {PIXI.WebGLGraphicsData} graphicsData - The graphics object containing all the necessary properties\n * @param {object} webGLData - an object containing all the WebGL-specific information to create this shape\n * @param {object} webGLDataNativeLines - an object containing all the WebGL-specific information to create nativeLines\n */\nvar buildPoly = {\n    build: function (graphicsData) {\n        graphicsData.points = graphicsData.shape.points.slice();\n    },\n    triangulate: function (graphicsData, graphicsGeometry) {\n        var points = graphicsData.points;\n        var holes = graphicsData.holes;\n        var verts = graphicsGeometry.points;\n        var indices = graphicsGeometry.indices;\n        if (points.length >= 6) {\n            fixOrientation(points, false);\n            var holeArray = [];\n            // Process holes..\n            for (var i = 0; i < holes.length; i++) {\n                var hole = holes[i];\n                fixOrientation(hole.points, true);\n                holeArray.push(points.length / 2);\n                points = points.concat(hole.points);\n            }\n            // sort color\n            var triangles = earcut(points, holeArray, 2);\n            if (!triangles) {\n                return;\n            }\n            var vertPos = verts.length / 2;\n            for (var i = 0; i < triangles.length; i += 3) {\n                indices.push(triangles[i] + vertPos);\n                indices.push(triangles[i + 1] + vertPos);\n                indices.push(triangles[i + 2] + vertPos);\n            }\n            for (var i = 0; i < points.length; i++) {\n                verts.push(points[i]);\n            }\n        }\n    },\n};\n\n// for type only\n/**\n * Builds a circle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {PIXI.WebGLGraphicsData} graphicsData - The graphics object to draw\n * @param {object} webGLData - an object containing all the WebGL-specific information to create this shape\n * @param {object} webGLDataNativeLines - an object containing all the WebGL-specific information to create nativeLines\n */\nvar buildCircle = {\n    build: function (graphicsData) {\n        // need to convert points to a nice regular data\n        var points = graphicsData.points;\n        var x;\n        var y;\n        var dx;\n        var dy;\n        var rx;\n        var ry;\n        if (graphicsData.type === SHAPES.CIRC) {\n            var circle = graphicsData.shape;\n            x = circle.x;\n            y = circle.y;\n            rx = ry = circle.radius;\n            dx = dy = 0;\n        }\n        else if (graphicsData.type === SHAPES.ELIP) {\n            var ellipse = graphicsData.shape;\n            x = ellipse.x;\n            y = ellipse.y;\n            rx = ellipse.width;\n            ry = ellipse.height;\n            dx = dy = 0;\n        }\n        else {\n            var roundedRect = graphicsData.shape;\n            var halfWidth = roundedRect.width / 2;\n            var halfHeight = roundedRect.height / 2;\n            x = roundedRect.x + halfWidth;\n            y = roundedRect.y + halfHeight;\n            rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n            dx = halfWidth - rx;\n            dy = halfHeight - ry;\n        }\n        if (!(rx >= 0 && ry >= 0 && dx >= 0 && dy >= 0)) {\n            points.length = 0;\n            return;\n        }\n        // Choose a number of segments such that the maximum absolute deviation from the circle is approximately 0.029\n        var n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n        var m = (n * 8) + (dx ? 4 : 0) + (dy ? 4 : 0);\n        points.length = m;\n        if (m === 0) {\n            return;\n        }\n        if (n === 0) {\n            points.length = 8;\n            points[0] = points[6] = x + dx;\n            points[1] = points[3] = y + dy;\n            points[2] = points[4] = x - dx;\n            points[5] = points[7] = y - dy;\n            return;\n        }\n        var j1 = 0;\n        var j2 = (n * 4) + (dx ? 2 : 0) + 2;\n        var j3 = j2;\n        var j4 = m;\n        {\n            var x0 = dx + rx;\n            var y0 = dy;\n            var x1 = x + x0;\n            var x2 = x - x0;\n            var y1 = y + y0;\n            points[j1++] = x1;\n            points[j1++] = y1;\n            points[--j2] = y1;\n            points[--j2] = x2;\n            if (dy) {\n                var y2 = y - y0;\n                points[j3++] = x2;\n                points[j3++] = y2;\n                points[--j4] = y2;\n                points[--j4] = x1;\n            }\n        }\n        for (var i = 1; i < n; i++) {\n            var a = Math.PI / 2 * (i / n);\n            var x0 = dx + (Math.cos(a) * rx);\n            var y0 = dy + (Math.sin(a) * ry);\n            var x1 = x + x0;\n            var x2 = x - x0;\n            var y1 = y + y0;\n            var y2 = y - y0;\n            points[j1++] = x1;\n            points[j1++] = y1;\n            points[--j2] = y1;\n            points[--j2] = x2;\n            points[j3++] = x2;\n            points[j3++] = y2;\n            points[--j4] = y2;\n            points[--j4] = x1;\n        }\n        {\n            var x0 = dx;\n            var y0 = dy + ry;\n            var x1 = x + x0;\n            var x2 = x - x0;\n            var y1 = y + y0;\n            var y2 = y - y0;\n            points[j1++] = x1;\n            points[j1++] = y1;\n            points[--j4] = y2;\n            points[--j4] = x1;\n            if (dx) {\n                points[j1++] = x2;\n                points[j1++] = y1;\n                points[--j4] = y2;\n                points[--j4] = x2;\n            }\n        }\n    },\n    triangulate: function (graphicsData, graphicsGeometry) {\n        var points = graphicsData.points;\n        var verts = graphicsGeometry.points;\n        var indices = graphicsGeometry.indices;\n        var vertPos = verts.length / 2;\n        var center = vertPos;\n        var x;\n        var y;\n        if (graphicsData.type !== SHAPES.RREC) {\n            var circle = graphicsData.shape;\n            x = circle.x;\n            y = circle.y;\n        }\n        else {\n            var roundedRect = graphicsData.shape;\n            x = roundedRect.x + (roundedRect.width / 2);\n            y = roundedRect.y + (roundedRect.height / 2);\n        }\n        var matrix = graphicsData.matrix;\n        // Push center (special point)\n        verts.push(graphicsData.matrix ? (matrix.a * x) + (matrix.c * y) + matrix.tx : x, graphicsData.matrix ? (matrix.b * x) + (matrix.d * y) + matrix.ty : y);\n        vertPos++;\n        verts.push(points[0], points[1]);\n        for (var i = 2; i < points.length; i += 2) {\n            verts.push(points[i], points[i + 1]);\n            // add some uvs\n            indices.push(vertPos++, center, vertPos);\n        }\n        indices.push(center + 1, center, vertPos);\n    },\n};\n\n/**\n * Builds a rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {PIXI.WebGLGraphicsData} graphicsData - The graphics object containing all the necessary properties\n * @param {object} webGLData - an object containing all the WebGL-specific information to create this shape\n * @param {object} webGLDataNativeLines - an object containing all the WebGL-specific information to create nativeLines\n */\nvar buildRectangle = {\n    build: function (graphicsData) {\n        // --- //\n        // need to convert points to a nice regular data\n        //\n        var rectData = graphicsData.shape;\n        var x = rectData.x;\n        var y = rectData.y;\n        var width = rectData.width;\n        var height = rectData.height;\n        var points = graphicsData.points;\n        points.length = 0;\n        points.push(x, y, x + width, y, x + width, y + height, x, y + height);\n    },\n    triangulate: function (graphicsData, graphicsGeometry) {\n        var points = graphicsData.points;\n        var verts = graphicsGeometry.points;\n        var vertPos = verts.length / 2;\n        verts.push(points[0], points[1], points[2], points[3], points[6], points[7], points[4], points[5]);\n        graphicsGeometry.indices.push(vertPos, vertPos + 1, vertPos + 2, vertPos + 1, vertPos + 2, vertPos + 3);\n    },\n};\n\n/**\n * Calculate a single point for a quadratic bezier curve.\n * Utility function used by quadraticBezierCurve.\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} n1 - first number\n * @param {number} n2 - second number\n * @param {number} perc - percentage\n * @returns {number} the result\n */\nfunction getPt(n1, n2, perc) {\n    var diff = n2 - n1;\n    return n1 + (diff * perc);\n}\n/**\n * Calculate the points for a quadratic bezier curve. (helper function..)\n * Based on: https://stackoverflow.com/questions/785097/how-do-i-implement-a-bezier-curve-in-c\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} fromX - Origin point x\n * @param {number} fromY - Origin point x\n * @param {number} cpX - Control point x\n * @param {number} cpY - Control point y\n * @param {number} toX - Destination point x\n * @param {number} toY - Destination point y\n * @param {number[]} [out=[]] - The output array to add points into. If not passed, a new array is created.\n * @returns {number[]} an array of points\n */\nfunction quadraticBezierCurve(fromX, fromY, cpX, cpY, toX, toY, out) {\n    if (out === void 0) { out = []; }\n    var n = 20;\n    var points = out;\n    var xa = 0;\n    var ya = 0;\n    var xb = 0;\n    var yb = 0;\n    var x = 0;\n    var y = 0;\n    for (var i = 0, j = 0; i <= n; ++i) {\n        j = i / n;\n        // The Green Line\n        xa = getPt(fromX, cpX, j);\n        ya = getPt(fromY, cpY, j);\n        xb = getPt(cpX, toX, j);\n        yb = getPt(cpY, toY, j);\n        // The Black Dot\n        x = getPt(xa, xb, j);\n        y = getPt(ya, yb, j);\n        // Handle case when first curve points overlaps and earcut fails to triangulate\n        if (i === 0 && points[points.length - 2] === x && points[points.length - 1] === y) {\n            continue;\n        }\n        points.push(x, y);\n    }\n    return points;\n}\n/**\n * Builds a rounded rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {PIXI.WebGLGraphicsData} graphicsData - The graphics object containing all the necessary properties\n * @param {object} webGLData - an object containing all the WebGL-specific information to create this shape\n * @param {object} webGLDataNativeLines - an object containing all the WebGL-specific information to create nativeLines\n */\nvar buildRoundedRectangle = {\n    build: function (graphicsData) {\n        if (Graphics.nextRoundedRectBehavior) {\n            buildCircle.build(graphicsData);\n            return;\n        }\n        var rrectData = graphicsData.shape;\n        var points = graphicsData.points;\n        var x = rrectData.x;\n        var y = rrectData.y;\n        var width = rrectData.width;\n        var height = rrectData.height;\n        // Don't allow negative radius or greater than half the smallest width\n        var radius = Math.max(0, Math.min(rrectData.radius, Math.min(width, height) / 2));\n        points.length = 0;\n        // No radius, do a simple rectangle\n        if (!radius) {\n            points.push(x, y, x + width, y, x + width, y + height, x, y + height);\n        }\n        else {\n            quadraticBezierCurve(x, y + radius, x, y, x + radius, y, points);\n            quadraticBezierCurve(x + width - radius, y, x + width, y, x + width, y + radius, points);\n            quadraticBezierCurve(x + width, y + height - radius, x + width, y + height, x + width - radius, y + height, points);\n            quadraticBezierCurve(x + radius, y + height, x, y + height, x, y + height - radius, points);\n        }\n    },\n    triangulate: function (graphicsData, graphicsGeometry) {\n        if (Graphics.nextRoundedRectBehavior) {\n            buildCircle.triangulate(graphicsData, graphicsGeometry);\n            return;\n        }\n        var points = graphicsData.points;\n        var verts = graphicsGeometry.points;\n        var indices = graphicsGeometry.indices;\n        var vecPos = verts.length / 2;\n        var triangles = earcut(points, null, 2);\n        for (var i = 0, j = triangles.length; i < j; i += 3) {\n            indices.push(triangles[i] + vecPos);\n            //     indices.push(triangles[i] + vecPos);\n            indices.push(triangles[i + 1] + vecPos);\n            //   indices.push(triangles[i + 2] + vecPos);\n            indices.push(triangles[i + 2] + vecPos);\n        }\n        for (var i = 0, j = points.length; i < j; i++) {\n            verts.push(points[i], points[++i]);\n        }\n    },\n};\n\n/**\n * Buffers vertices to draw a square cap.\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} x - X-coord of end point\n * @param {number} y - Y-coord of end point\n * @param {number} nx - X-coord of line normal pointing inside\n * @param {number} ny - Y-coord of line normal pointing inside\n * @param {number} innerWeight - Weight of inner points\n * @param {number} outerWeight - Weight of outer points\n * @param {boolean} clockwise - Whether the cap is drawn clockwise\n * @param {Array<number>} verts - vertex buffer\n * @returns {number} - no. of vertices pushed\n */\nfunction square(x, y, nx, ny, innerWeight, outerWeight, clockwise, /* rotation for square (true at left end, false at right end) */ verts) {\n    var ix = x - (nx * innerWeight);\n    var iy = y - (ny * innerWeight);\n    var ox = x + (nx * outerWeight);\n    var oy = y + (ny * outerWeight);\n    /* Rotate nx,ny for extension vector */\n    var exx;\n    var eyy;\n    if (clockwise) {\n        exx = ny;\n        eyy = -nx;\n    }\n    else {\n        exx = -ny;\n        eyy = nx;\n    }\n    /* [i|0]x,y extended at cap */\n    var eix = ix + exx;\n    var eiy = iy + eyy;\n    var eox = ox + exx;\n    var eoy = oy + eyy;\n    /* Square itself must be inserted clockwise*/\n    verts.push(eix, eiy);\n    verts.push(eox, eoy);\n    return 2;\n}\n/**\n * Buffers vertices to draw an arc at the line joint or cap.\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} cx - X-coord of center\n * @param {number} cy - Y-coord of center\n * @param {number} sx - X-coord of arc start\n * @param {number} sy - Y-coord of arc start\n * @param {number} ex - X-coord of arc end\n * @param {number} ey - Y-coord of arc end\n * @param {Array<number>} verts - buffer of vertices\n * @param {boolean} clockwise - orientation of vertices\n * @returns {number} - no. of vertices pushed\n */\nfunction round(cx, cy, sx, sy, ex, ey, verts, clockwise) {\n    var cx2p0x = sx - cx;\n    var cy2p0y = sy - cy;\n    var angle0 = Math.atan2(cx2p0x, cy2p0y);\n    var angle1 = Math.atan2(ex - cx, ey - cy);\n    if (clockwise && angle0 < angle1) {\n        angle0 += Math.PI * 2;\n    }\n    else if (!clockwise && angle0 > angle1) {\n        angle1 += Math.PI * 2;\n    }\n    var startAngle = angle0;\n    var angleDiff = angle1 - angle0;\n    var absAngleDiff = Math.abs(angleDiff);\n    /* if (absAngleDiff >= PI_LBOUND && absAngleDiff <= PI_UBOUND)\n    {\n        const r1x = cx - nxtPx;\n        const r1y = cy - nxtPy;\n\n        if (r1x === 0)\n        {\n            if (r1y > 0)\n            {\n                angleDiff = -angleDiff;\n            }\n        }\n        else if (r1x >= -GRAPHICS_CURVES.epsilon)\n        {\n            angleDiff = -angleDiff;\n        }\n    }*/\n    var radius = Math.sqrt((cx2p0x * cx2p0x) + (cy2p0y * cy2p0y));\n    var segCount = ((15 * absAngleDiff * Math.sqrt(radius) / Math.PI) >> 0) + 1;\n    var angleInc = angleDiff / segCount;\n    startAngle += angleInc;\n    if (clockwise) {\n        verts.push(cx, cy);\n        verts.push(sx, sy);\n        for (var i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n            verts.push(cx, cy);\n            verts.push(cx + ((Math.sin(angle) * radius)), cy + ((Math.cos(angle) * radius)));\n        }\n        verts.push(cx, cy);\n        verts.push(ex, ey);\n    }\n    else {\n        verts.push(sx, sy);\n        verts.push(cx, cy);\n        for (var i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n            verts.push(cx + ((Math.sin(angle) * radius)), cy + ((Math.cos(angle) * radius)));\n            verts.push(cx, cy);\n        }\n        verts.push(ex, ey);\n        verts.push(cx, cy);\n    }\n    return segCount * 2;\n}\n/**\n * Builds a line to draw using the polygon method.\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {PIXI.GraphicsData} graphicsData - The graphics object containing all the necessary properties\n * @param {PIXI.GraphicsGeometry} graphicsGeometry - Geometry where to append output\n */\nfunction buildNonNativeLine(graphicsData, graphicsGeometry) {\n    var shape = graphicsData.shape;\n    var points = graphicsData.points || shape.points.slice();\n    var eps = graphicsGeometry.closePointEps;\n    if (points.length === 0) {\n        return;\n    }\n    // if the line width is an odd number add 0.5 to align to a whole pixel\n    // commenting this out fixes #711 and #1620\n    // if (graphicsData.lineWidth%2)\n    // {\n    //     for (i = 0; i < points.length; i++)\n    //     {\n    //         points[i] += 0.5;\n    //     }\n    // }\n    var style = graphicsData.lineStyle;\n    // get first and last point.. figure out the middle!\n    var firstPoint = new Point(points[0], points[1]);\n    var lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n    var closedShape = shape.type !== SHAPES.POLY || shape.closeStroke;\n    var closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps\n        && Math.abs(firstPoint.y - lastPoint.y) < eps;\n    // if the first point is the last point - gonna have issues :)\n    if (closedShape) {\n        // need to clone as we are going to slightly modify the shape..\n        points = points.slice();\n        if (closedPath) {\n            points.pop();\n            points.pop();\n            lastPoint.set(points[points.length - 2], points[points.length - 1]);\n        }\n        var midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n        var midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n        points.unshift(midPointX, midPointY);\n        points.push(midPointX, midPointY);\n    }\n    var verts = graphicsGeometry.points;\n    var length = points.length / 2;\n    var indexCount = points.length;\n    var indexStart = verts.length / 2;\n    // Max. inner and outer width\n    var width = style.width / 2;\n    var widthSquared = width * width;\n    var miterLimitSquared = style.miterLimit * style.miterLimit;\n    /* Line segments of interest where (x1,y1) forms the corner. */\n    var x0 = points[0];\n    var y0 = points[1];\n    var x1 = points[2];\n    var y1 = points[3];\n    var x2 = 0;\n    var y2 = 0;\n    /* perp[?](x|y) = the line normal with magnitude lineWidth. */\n    var perpx = -(y0 - y1);\n    var perpy = x0 - x1;\n    var perp1x = 0;\n    var perp1y = 0;\n    var dist = Math.sqrt((perpx * perpx) + (perpy * perpy));\n    perpx /= dist;\n    perpy /= dist;\n    perpx *= width;\n    perpy *= width;\n    var ratio = style.alignment; // 0.5;\n    var innerWeight = (1 - ratio) * 2;\n    var outerWeight = ratio * 2;\n    if (!closedShape) {\n        if (style.cap === LINE_CAP.ROUND) {\n            indexCount += round(x0 - (perpx * (innerWeight - outerWeight) * 0.5), y0 - (perpy * (innerWeight - outerWeight) * 0.5), x0 - (perpx * innerWeight), y0 - (perpy * innerWeight), x0 + (perpx * outerWeight), y0 + (perpy * outerWeight), verts, true) + 2;\n        }\n        else if (style.cap === LINE_CAP.SQUARE) {\n            indexCount += square(x0, y0, perpx, perpy, innerWeight, outerWeight, true, verts);\n        }\n    }\n    // Push first point (below & above vertices)\n    verts.push(x0 - (perpx * innerWeight), y0 - (perpy * innerWeight));\n    verts.push(x0 + (perpx * outerWeight), y0 + (perpy * outerWeight));\n    for (var i = 1; i < length - 1; ++i) {\n        x0 = points[(i - 1) * 2];\n        y0 = points[((i - 1) * 2) + 1];\n        x1 = points[i * 2];\n        y1 = points[(i * 2) + 1];\n        x2 = points[(i + 1) * 2];\n        y2 = points[((i + 1) * 2) + 1];\n        perpx = -(y0 - y1);\n        perpy = x0 - x1;\n        dist = Math.sqrt((perpx * perpx) + (perpy * perpy));\n        perpx /= dist;\n        perpy /= dist;\n        perpx *= width;\n        perpy *= width;\n        perp1x = -(y1 - y2);\n        perp1y = x1 - x2;\n        dist = Math.sqrt((perp1x * perp1x) + (perp1y * perp1y));\n        perp1x /= dist;\n        perp1y /= dist;\n        perp1x *= width;\n        perp1y *= width;\n        /* d[x|y](0|1) = the component displacement between points p(0,1|1,2) */\n        var dx0 = x1 - x0;\n        var dy0 = y0 - y1;\n        var dx1 = x1 - x2;\n        var dy1 = y2 - y1;\n        /* +ve if internal angle counterclockwise, -ve if internal angle clockwise. */\n        var cross = (dy0 * dx1) - (dy1 * dx0);\n        var clockwise = (cross < 0);\n        /* Going nearly straight? */\n        if (Math.abs(cross) < 0.1) {\n            verts.push(x1 - (perpx * innerWeight), y1 - (perpy * innerWeight));\n            verts.push(x1 + (perpx * outerWeight), y1 + (perpy * outerWeight));\n            continue;\n        }\n        /* p[x|y] is the miter point. pdist is the distance between miter point and p1. */\n        var c1 = ((-perpx + x0) * (-perpy + y1)) - ((-perpx + x1) * (-perpy + y0));\n        var c2 = ((-perp1x + x2) * (-perp1y + y1)) - ((-perp1x + x1) * (-perp1y + y2));\n        var px = ((dx0 * c2) - (dx1 * c1)) / cross;\n        var py = ((dy1 * c1) - (dy0 * c2)) / cross;\n        var pdist = ((px - x1) * (px - x1)) + ((py - y1) * (py - y1));\n        /* Inner miter point */\n        var imx = x1 + ((px - x1) * innerWeight);\n        var imy = y1 + ((py - y1) * innerWeight);\n        /* Outer miter point */\n        var omx = x1 - ((px - x1) * outerWeight);\n        var omy = y1 - ((py - y1) * outerWeight);\n        /* Is the inside miter point too far away, creating a spike? */\n        var smallerInsideSegmentSq = Math.min((dx0 * dx0) + (dy0 * dy0), (dx1 * dx1) + (dy1 * dy1));\n        var insideWeight = clockwise ? innerWeight : outerWeight;\n        var smallerInsideDiagonalSq = smallerInsideSegmentSq + (insideWeight * insideWeight * widthSquared);\n        var insideMiterOk = pdist <= smallerInsideDiagonalSq;\n        if (insideMiterOk) {\n            if (style.join === LINE_JOIN.BEVEL || pdist / widthSquared > miterLimitSquared) {\n                if (clockwise) /* rotating at inner angle */ {\n                    verts.push(imx, imy); // inner miter point\n                    verts.push(x1 + (perpx * outerWeight), y1 + (perpy * outerWeight)); // first segment's outer vertex\n                    verts.push(imx, imy); // inner miter point\n                    verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight)); // second segment's outer vertex\n                }\n                else /* rotating at outer angle */ {\n                    verts.push(x1 - (perpx * innerWeight), y1 - (perpy * innerWeight)); // first segment's inner vertex\n                    verts.push(omx, omy); // outer miter point\n                    verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight)); // second segment's outer vertex\n                    verts.push(omx, omy); // outer miter point\n                }\n                indexCount += 2;\n            }\n            else if (style.join === LINE_JOIN.ROUND) {\n                if (clockwise) /* arc is outside */ {\n                    verts.push(imx, imy);\n                    verts.push(x1 + (perpx * outerWeight), y1 + (perpy * outerWeight));\n                    indexCount += round(x1, y1, x1 + (perpx * outerWeight), y1 + (perpy * outerWeight), x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight), verts, true) + 4;\n                    verts.push(imx, imy);\n                    verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight));\n                }\n                else /* arc is inside */ {\n                    verts.push(x1 - (perpx * innerWeight), y1 - (perpy * innerWeight));\n                    verts.push(omx, omy);\n                    indexCount += round(x1, y1, x1 - (perpx * innerWeight), y1 - (perpy * innerWeight), x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight), verts, false) + 4;\n                    verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight));\n                    verts.push(omx, omy);\n                }\n            }\n            else {\n                verts.push(imx, imy);\n                verts.push(omx, omy);\n            }\n        }\n        else // inside miter is NOT ok\n         {\n            verts.push(x1 - (perpx * innerWeight), y1 - (perpy * innerWeight)); // first segment's inner vertex\n            verts.push(x1 + (perpx * outerWeight), y1 + (perpy * outerWeight)); // first segment's outer vertex\n            if (style.join === LINE_JOIN.ROUND) {\n                if (clockwise) /* arc is outside */ {\n                    indexCount += round(x1, y1, x1 + (perpx * outerWeight), y1 + (perpy * outerWeight), x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight), verts, true) + 2;\n                }\n                else /* arc is inside */ {\n                    indexCount += round(x1, y1, x1 - (perpx * innerWeight), y1 - (perpy * innerWeight), x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight), verts, false) + 2;\n                }\n            }\n            else if (style.join === LINE_JOIN.MITER && pdist / widthSquared <= miterLimitSquared) {\n                if (clockwise) {\n                    verts.push(omx, omy); // inner miter point\n                    verts.push(omx, omy); // inner miter point\n                }\n                else {\n                    verts.push(imx, imy); // outer miter point\n                    verts.push(imx, imy); // outer miter point\n                }\n                indexCount += 2;\n            }\n            verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight)); // second segment's inner vertex\n            verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight)); // second segment's outer vertex\n            indexCount += 2;\n        }\n    }\n    x0 = points[(length - 2) * 2];\n    y0 = points[((length - 2) * 2) + 1];\n    x1 = points[(length - 1) * 2];\n    y1 = points[((length - 1) * 2) + 1];\n    perpx = -(y0 - y1);\n    perpy = x0 - x1;\n    dist = Math.sqrt((perpx * perpx) + (perpy * perpy));\n    perpx /= dist;\n    perpy /= dist;\n    perpx *= width;\n    perpy *= width;\n    verts.push(x1 - (perpx * innerWeight), y1 - (perpy * innerWeight));\n    verts.push(x1 + (perpx * outerWeight), y1 + (perpy * outerWeight));\n    if (!closedShape) {\n        if (style.cap === LINE_CAP.ROUND) {\n            indexCount += round(x1 - (perpx * (innerWeight - outerWeight) * 0.5), y1 - (perpy * (innerWeight - outerWeight) * 0.5), x1 - (perpx * innerWeight), y1 - (perpy * innerWeight), x1 + (perpx * outerWeight), y1 + (perpy * outerWeight), verts, false) + 2;\n        }\n        else if (style.cap === LINE_CAP.SQUARE) {\n            indexCount += square(x1, y1, perpx, perpy, innerWeight, outerWeight, false, verts);\n        }\n    }\n    var indices = graphicsGeometry.indices;\n    var eps2 = GRAPHICS_CURVES.epsilon * GRAPHICS_CURVES.epsilon;\n    // indices.push(indexStart);\n    for (var i = indexStart; i < indexCount + indexStart - 2; ++i) {\n        x0 = verts[(i * 2)];\n        y0 = verts[(i * 2) + 1];\n        x1 = verts[(i + 1) * 2];\n        y1 = verts[((i + 1) * 2) + 1];\n        x2 = verts[(i + 2) * 2];\n        y2 = verts[((i + 2) * 2) + 1];\n        /* Skip zero area triangles */\n        if (Math.abs((x0 * (y1 - y2)) + (x1 * (y2 - y0)) + (x2 * (y0 - y1))) < eps2) {\n            continue;\n        }\n        indices.push(i, i + 1, i + 2);\n    }\n}\n/**\n * Builds a line to draw using the gl.drawArrays(gl.LINES) method\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {PIXI.GraphicsData} graphicsData - The graphics object containing all the necessary properties\n * @param {PIXI.GraphicsGeometry} graphicsGeometry - Geometry where to append output\n */\nfunction buildNativeLine(graphicsData, graphicsGeometry) {\n    var i = 0;\n    var shape = graphicsData.shape;\n    var points = graphicsData.points || shape.points;\n    var closedShape = shape.type !== SHAPES.POLY || shape.closeStroke;\n    if (points.length === 0)\n        { return; }\n    var verts = graphicsGeometry.points;\n    var indices = graphicsGeometry.indices;\n    var length = points.length / 2;\n    var startIndex = verts.length / 2;\n    var currentIndex = startIndex;\n    verts.push(points[0], points[1]);\n    for (i = 1; i < length; i++) {\n        verts.push(points[i * 2], points[(i * 2) + 1]);\n        indices.push(currentIndex, currentIndex + 1);\n        currentIndex++;\n    }\n    if (closedShape) {\n        indices.push(currentIndex, startIndex);\n    }\n}\n/**\n * Builds a line to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {PIXI.GraphicsData} graphicsData - The graphics object containing all the necessary properties\n * @param {PIXI.GraphicsGeometry} graphicsGeometry - Geometry where to append output\n */\nfunction buildLine(graphicsData, graphicsGeometry) {\n    if (graphicsData.lineStyle.native) {\n        buildNativeLine(graphicsData, graphicsGeometry);\n    }\n    else {\n        buildNonNativeLine(graphicsData, graphicsGeometry);\n    }\n}\n\n/**\n * Utilities for arc curves.\n * @private\n */\nvar ArcUtils = /** @class */ (function () {\n    function ArcUtils() {\n    }\n    /**\n     * The arcTo() method creates an arc/curve between two tangents on the canvas.\n     *\n     * \"borrowed\" from https://code.google.com/p/fxcanvas/ - thanks google!\n     * @private\n     * @param x1 - The x-coordinate of the beginning of the arc\n     * @param y1 - The y-coordinate of the beginning of the arc\n     * @param x2 - The x-coordinate of the end of the arc\n     * @param y2 - The y-coordinate of the end of the arc\n     * @param radius - The radius of the arc\n     * @param points -\n     * @returns - If the arc length is valid, return center of circle, radius and other info otherwise `null`.\n     */\n    ArcUtils.curveTo = function (x1, y1, x2, y2, radius, points) {\n        var fromX = points[points.length - 2];\n        var fromY = points[points.length - 1];\n        var a1 = fromY - y1;\n        var b1 = fromX - x1;\n        var a2 = y2 - y1;\n        var b2 = x2 - x1;\n        var mm = Math.abs((a1 * b2) - (b1 * a2));\n        if (mm < 1.0e-8 || radius === 0) {\n            if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {\n                points.push(x1, y1);\n            }\n            return null;\n        }\n        var dd = (a1 * a1) + (b1 * b1);\n        var cc = (a2 * a2) + (b2 * b2);\n        var tt = (a1 * a2) + (b1 * b2);\n        var k1 = radius * Math.sqrt(dd) / mm;\n        var k2 = radius * Math.sqrt(cc) / mm;\n        var j1 = k1 * tt / dd;\n        var j2 = k2 * tt / cc;\n        var cx = (k1 * b2) + (k2 * b1);\n        var cy = (k1 * a2) + (k2 * a1);\n        var px = b1 * (k2 + j1);\n        var py = a1 * (k2 + j1);\n        var qx = b2 * (k1 + j2);\n        var qy = a2 * (k1 + j2);\n        var startAngle = Math.atan2(py - cy, px - cx);\n        var endAngle = Math.atan2(qy - cy, qx - cx);\n        return {\n            cx: (cx + x1),\n            cy: (cy + y1),\n            radius: radius,\n            startAngle: startAngle,\n            endAngle: endAngle,\n            anticlockwise: (b1 * a2 > b2 * a1),\n        };\n    };\n    /* eslint-disable max-len */\n    /**\n     * The arc method creates an arc/curve (used to create circles, or parts of circles).\n     * @private\n     * @param _startX - Start x location of arc\n     * @param _startY - Start y location of arc\n     * @param cx - The x-coordinate of the center of the circle\n     * @param cy - The y-coordinate of the center of the circle\n     * @param radius - The radius of the circle\n     * @param startAngle - The starting angle, in radians (0 is at the 3 o'clock position\n     *  of the arc's circle)\n     * @param endAngle - The ending angle, in radians\n     * @param _anticlockwise - Specifies whether the drawing should be\n     *  counter-clockwise or clockwise. False is default, and indicates clockwise, while true\n     *  indicates counter-clockwise.\n     * @param points - Collection of points to add to\n     */\n    ArcUtils.arc = function (_startX, _startY, cx, cy, radius, startAngle, endAngle, _anticlockwise, points) {\n        var sweep = endAngle - startAngle;\n        var n = GRAPHICS_CURVES._segmentsCount(Math.abs(sweep) * radius, Math.ceil(Math.abs(sweep) / PI_2) * 40);\n        var theta = (sweep) / (n * 2);\n        var theta2 = theta * 2;\n        var cTheta = Math.cos(theta);\n        var sTheta = Math.sin(theta);\n        var segMinus = n - 1;\n        var remainder = (segMinus % 1) / segMinus;\n        for (var i = 0; i <= segMinus; ++i) {\n            var real = i + (remainder * i);\n            var angle = ((theta) + startAngle + (theta2 * real));\n            var c = Math.cos(angle);\n            var s = -Math.sin(angle);\n            points.push((((cTheta * c) + (sTheta * s)) * radius) + cx, (((cTheta * -s) + (sTheta * c)) * radius) + cy);\n        }\n    };\n    return ArcUtils;\n}());\n\n/**\n * Utilities for bezier curves\n * @private\n */\nvar BezierUtils = /** @class */ (function () {\n    function BezierUtils() {\n    }\n    /**\n     * Calculate length of bezier curve.\n     * Analytical solution is impossible, since it involves an integral that does not integrate in general.\n     * Therefore numerical solution is used.\n     * @private\n     * @param fromX - Starting point x\n     * @param fromY - Starting point y\n     * @param cpX - Control point x\n     * @param cpY - Control point y\n     * @param cpX2 - Second Control point x\n     * @param cpY2 - Second Control point y\n     * @param toX - Destination point x\n     * @param toY - Destination point y\n     * @returns - Length of bezier curve\n     */\n    BezierUtils.curveLength = function (fromX, fromY, cpX, cpY, cpX2, cpY2, toX, toY) {\n        var n = 10;\n        var result = 0.0;\n        var t = 0.0;\n        var t2 = 0.0;\n        var t3 = 0.0;\n        var nt = 0.0;\n        var nt2 = 0.0;\n        var nt3 = 0.0;\n        var x = 0.0;\n        var y = 0.0;\n        var dx = 0.0;\n        var dy = 0.0;\n        var prevX = fromX;\n        var prevY = fromY;\n        for (var i = 1; i <= n; ++i) {\n            t = i / n;\n            t2 = t * t;\n            t3 = t2 * t;\n            nt = (1.0 - t);\n            nt2 = nt * nt;\n            nt3 = nt2 * nt;\n            x = (nt3 * fromX) + (3.0 * nt2 * t * cpX) + (3.0 * nt * t2 * cpX2) + (t3 * toX);\n            y = (nt3 * fromY) + (3.0 * nt2 * t * cpY) + (3 * nt * t2 * cpY2) + (t3 * toY);\n            dx = prevX - x;\n            dy = prevY - y;\n            prevX = x;\n            prevY = y;\n            result += Math.sqrt((dx * dx) + (dy * dy));\n        }\n        return result;\n    };\n    /**\n     * Calculate the points for a bezier curve and then draws it.\n     *\n     * Ignored from docs since it is not directly exposed.\n     * @ignore\n     * @param cpX - Control point x\n     * @param cpY - Control point y\n     * @param cpX2 - Second Control point x\n     * @param cpY2 - Second Control point y\n     * @param toX - Destination point x\n     * @param toY - Destination point y\n     * @param points - Path array to push points into\n     */\n    BezierUtils.curveTo = function (cpX, cpY, cpX2, cpY2, toX, toY, points) {\n        var fromX = points[points.length - 2];\n        var fromY = points[points.length - 1];\n        points.length -= 2;\n        var n = GRAPHICS_CURVES._segmentsCount(BezierUtils.curveLength(fromX, fromY, cpX, cpY, cpX2, cpY2, toX, toY));\n        var dt = 0;\n        var dt2 = 0;\n        var dt3 = 0;\n        var t2 = 0;\n        var t3 = 0;\n        points.push(fromX, fromY);\n        for (var i = 1, j = 0; i <= n; ++i) {\n            j = i / n;\n            dt = (1 - j);\n            dt2 = dt * dt;\n            dt3 = dt2 * dt;\n            t2 = j * j;\n            t3 = t2 * j;\n            points.push((dt3 * fromX) + (3 * dt2 * j * cpX) + (3 * dt * t2 * cpX2) + (t3 * toX), (dt3 * fromY) + (3 * dt2 * j * cpY) + (3 * dt * t2 * cpY2) + (t3 * toY));\n        }\n    };\n    return BezierUtils;\n}());\n\n/**\n * Utilities for quadratic curves.\n * @private\n */\nvar QuadraticUtils = /** @class */ (function () {\n    function QuadraticUtils() {\n    }\n    /**\n     * Calculate length of quadratic curve\n     * @see {@link http://www.malczak.linuxpl.com/blog/quadratic-bezier-curve-length/}\n     * for the detailed explanation of math behind this.\n     * @private\n     * @param fromX - x-coordinate of curve start point\n     * @param fromY - y-coordinate of curve start point\n     * @param cpX - x-coordinate of curve control point\n     * @param cpY - y-coordinate of curve control point\n     * @param toX - x-coordinate of curve end point\n     * @param toY - y-coordinate of curve end point\n     * @returns - Length of quadratic curve\n     */\n    QuadraticUtils.curveLength = function (fromX, fromY, cpX, cpY, toX, toY) {\n        var ax = fromX - (2.0 * cpX) + toX;\n        var ay = fromY - (2.0 * cpY) + toY;\n        var bx = (2.0 * cpX) - (2.0 * fromX);\n        var by = (2.0 * cpY) - (2.0 * fromY);\n        var a = 4.0 * ((ax * ax) + (ay * ay));\n        var b = 4.0 * ((ax * bx) + (ay * by));\n        var c = (bx * bx) + (by * by);\n        var s = 2.0 * Math.sqrt(a + b + c);\n        var a2 = Math.sqrt(a);\n        var a32 = 2.0 * a * a2;\n        var c2 = 2.0 * Math.sqrt(c);\n        var ba = b / a2;\n        return ((a32 * s)\n            + (a2 * b * (s - c2))\n            + (((4.0 * c * a) - (b * b))\n                * Math.log(((2.0 * a2) + ba + s) / (ba + c2)))) / (4.0 * a32);\n    };\n    /**\n     * Calculate the points for a quadratic bezier curve and then draws it.\n     * Based on: https://stackoverflow.com/questions/785097/how-do-i-implement-a-bezier-curve-in-c\n     * @private\n     * @param cpX - Control point x\n     * @param cpY - Control point y\n     * @param toX - Destination point x\n     * @param toY - Destination point y\n     * @param points - Points to add segments to.\n     */\n    QuadraticUtils.curveTo = function (cpX, cpY, toX, toY, points) {\n        var fromX = points[points.length - 2];\n        var fromY = points[points.length - 1];\n        var n = GRAPHICS_CURVES._segmentsCount(QuadraticUtils.curveLength(fromX, fromY, cpX, cpY, toX, toY));\n        var xa = 0;\n        var ya = 0;\n        for (var i = 1; i <= n; ++i) {\n            var j = i / n;\n            xa = fromX + ((cpX - fromX) * j);\n            ya = fromY + ((cpY - fromY) * j);\n            points.push(xa + (((cpX + ((toX - cpX) * j)) - xa) * j), ya + (((cpY + ((toY - cpY) * j)) - ya) * j));\n        }\n    };\n    return QuadraticUtils;\n}());\n\n/**\n * A structure to hold interim batch objects for Graphics.\n * @memberof PIXI.graphicsUtils\n */\nvar BatchPart = /** @class */ (function () {\n    function BatchPart() {\n        this.reset();\n    }\n    /**\n     * Begin batch part.\n     * @param style\n     * @param startIndex\n     * @param attribStart\n     */\n    BatchPart.prototype.begin = function (style, startIndex, attribStart) {\n        this.reset();\n        this.style = style;\n        this.start = startIndex;\n        this.attribStart = attribStart;\n    };\n    /**\n     * End batch part.\n     * @param endIndex\n     * @param endAttrib\n     */\n    BatchPart.prototype.end = function (endIndex, endAttrib) {\n        this.attribSize = endAttrib - this.attribStart;\n        this.size = endIndex - this.start;\n    };\n    BatchPart.prototype.reset = function () {\n        this.style = null;\n        this.size = 0;\n        this.start = 0;\n        this.attribStart = 0;\n        this.attribSize = 0;\n    };\n    return BatchPart;\n}());\n\n/**\n * Generalized convenience utilities for Graphics.\n * @namespace graphicsUtils\n * @memberof PIXI\n */\nvar _a;\n/**\n * Map of fill commands for each shape type.\n * @memberof PIXI.graphicsUtils\n * @member {object} FILL_COMMANDS\n */\nvar FILL_COMMANDS = (_a = {},\n    _a[SHAPES.POLY] = buildPoly,\n    _a[SHAPES.CIRC] = buildCircle,\n    _a[SHAPES.ELIP] = buildCircle,\n    _a[SHAPES.RECT] = buildRectangle,\n    _a[SHAPES.RREC] = buildRoundedRectangle,\n    _a);\n/**\n * Batch pool, stores unused batches for preventing allocations.\n * @memberof PIXI.graphicsUtils\n * @member {Array<PIXI.graphicsUtils.BatchPart>} BATCH_POOL\n */\nvar BATCH_POOL = [];\n/**\n * Draw call pool, stores unused draw calls for preventing allocations.\n * @memberof PIXI.graphicsUtils\n * @member {Array<PIXI.BatchDrawCall>} DRAW_CALL_POOL\n */\nvar DRAW_CALL_POOL = [];\n\n/**\n * A class to contain data useful for Graphics objects\n * @memberof PIXI\n */\nvar GraphicsData = /** @class */ (function () {\n    /**\n     * @param {PIXI.Circle|PIXI.Ellipse|PIXI.Polygon|PIXI.Rectangle|PIXI.RoundedRectangle} shape - The shape object to draw.\n     * @param fillStyle - the width of the line to draw\n     * @param lineStyle - the color of the line to draw\n     * @param matrix - Transform matrix\n     */\n    function GraphicsData(shape, fillStyle, lineStyle, matrix) {\n        if (fillStyle === void 0) { fillStyle = null; }\n        if (lineStyle === void 0) { lineStyle = null; }\n        if (matrix === void 0) { matrix = null; }\n        /** The collection of points. */\n        this.points = [];\n        /** The collection of holes. */\n        this.holes = [];\n        this.shape = shape;\n        this.lineStyle = lineStyle;\n        this.fillStyle = fillStyle;\n        this.matrix = matrix;\n        this.type = shape.type;\n    }\n    /**\n     * Creates a new GraphicsData object with the same values as this one.\n     * @returns - Cloned GraphicsData object\n     */\n    GraphicsData.prototype.clone = function () {\n        return new GraphicsData(this.shape, this.fillStyle, this.lineStyle, this.matrix);\n    };\n    /** Destroys the Graphics data. */\n    GraphicsData.prototype.destroy = function () {\n        this.shape = null;\n        this.holes.length = 0;\n        this.holes = null;\n        this.points.length = 0;\n        this.points = null;\n        this.lineStyle = null;\n        this.fillStyle = null;\n    };\n    return GraphicsData;\n}());\n\nvar tmpPoint = new Point();\nvar tmpBounds = new Bounds();\n/**\n * The Graphics class contains methods used to draw primitive shapes such as lines, circles and\n * rectangles to the display, and to color and fill them.\n *\n * GraphicsGeometry is designed to not be continually updating the geometry since it's expensive\n * to re-tesselate using **earcut**. Consider using {@link PIXI.Mesh} for this use-case, it's much faster.\n * @memberof PIXI\n */\nvar GraphicsGeometry = /** @class */ (function (_super) {\n    __extends(GraphicsGeometry, _super);\n    // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n    function GraphicsGeometry() {\n        var _this = _super.call(this) || this;\n        /** Minimal distance between points that are considered different. Affects line tesselation. */\n        _this.closePointEps = 1e-4;\n        /** Padding to add to the bounds. */\n        _this.boundsPadding = 0;\n        _this.uvsFloat32 = null;\n        _this.indicesUint16 = null;\n        _this.batchable = false;\n        /** An array of points to draw, 2 numbers per point */\n        _this.points = [];\n        /** The collection of colors */\n        _this.colors = [];\n        /** The UVs collection */\n        _this.uvs = [];\n        /** The indices of the vertices */\n        _this.indices = [];\n        /** Reference to the texture IDs. */\n        _this.textureIds = [];\n        /**\n         * The collection of drawn shapes.\n         * @member {PIXI.GraphicsData[]}\n         */\n        _this.graphicsData = [];\n        /**\n         * List of current draw calls drived from the batches.\n         * @member {PIXI.BatchDrawCall[]}\n         */\n        _this.drawCalls = [];\n        /** Batches need to regenerated if the geometry is updated. */\n        _this.batchDirty = -1;\n        /**\n         * Intermediate abstract format sent to batch system.\n         * Can be converted to drawCalls or to batchable objects.\n         * @member {PIXI.graphicsUtils.BatchPart[]}\n         */\n        _this.batches = [];\n        /** Used to detect if the graphics object has changed. */\n        _this.dirty = 0;\n        /** Used to check if the cache is dirty. */\n        _this.cacheDirty = -1;\n        /** Used to detect if we cleared the graphicsData. */\n        _this.clearDirty = 0;\n        /** Index of the last batched shape in the stack of calls. */\n        _this.shapeIndex = 0;\n        /** Cached bounds. */\n        _this._bounds = new Bounds();\n        /** The bounds dirty flag. */\n        _this.boundsDirty = -1;\n        return _this;\n    }\n    Object.defineProperty(GraphicsGeometry.prototype, \"bounds\", {\n        /**\n         * Get the current bounds of the graphic geometry.\n         * @readonly\n         */\n        get: function () {\n            if (this.boundsDirty !== this.dirty) {\n                this.boundsDirty = this.dirty;\n                this.calculateBounds();\n            }\n            return this._bounds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /** Call if you changed graphicsData manually. Empties all batch buffers. */\n    GraphicsGeometry.prototype.invalidate = function () {\n        this.boundsDirty = -1;\n        this.dirty++;\n        this.batchDirty++;\n        this.shapeIndex = 0;\n        this.points.length = 0;\n        this.colors.length = 0;\n        this.uvs.length = 0;\n        this.indices.length = 0;\n        this.textureIds.length = 0;\n        for (var i = 0; i < this.drawCalls.length; i++) {\n            this.drawCalls[i].texArray.clear();\n            DRAW_CALL_POOL.push(this.drawCalls[i]);\n        }\n        this.drawCalls.length = 0;\n        for (var i = 0; i < this.batches.length; i++) {\n            var batchPart = this.batches[i];\n            batchPart.reset();\n            BATCH_POOL.push(batchPart);\n        }\n        this.batches.length = 0;\n    };\n    /**\n     * Clears the graphics that were drawn to this Graphics object, and resets fill and line style settings.\n     * @returns - This GraphicsGeometry object. Good for chaining method calls\n     */\n    GraphicsGeometry.prototype.clear = function () {\n        if (this.graphicsData.length > 0) {\n            this.invalidate();\n            this.clearDirty++;\n            this.graphicsData.length = 0;\n        }\n        return this;\n    };\n    /**\n     * Draws the given shape to this Graphics object. Can be any of Circle, Rectangle, Ellipse, Line or Polygon.\n     * @param {PIXI.Circle|PIXI.Ellipse|PIXI.Polygon|PIXI.Rectangle|PIXI.RoundedRectangle} shape - The shape object to draw.\n     * @param fillStyle - Defines style of the fill.\n     * @param lineStyle - Defines style of the lines.\n     * @param matrix - Transform applied to the points of the shape.\n     * @returns - Returns geometry for chaining.\n     */\n    GraphicsGeometry.prototype.drawShape = function (shape, fillStyle, lineStyle, matrix) {\n        if (fillStyle === void 0) { fillStyle = null; }\n        if (lineStyle === void 0) { lineStyle = null; }\n        if (matrix === void 0) { matrix = null; }\n        var data = new GraphicsData(shape, fillStyle, lineStyle, matrix);\n        this.graphicsData.push(data);\n        this.dirty++;\n        return this;\n    };\n    /**\n     * Draws the given shape to this Graphics object. Can be any of Circle, Rectangle, Ellipse, Line or Polygon.\n     * @param {PIXI.Circle|PIXI.Ellipse|PIXI.Polygon|PIXI.Rectangle|PIXI.RoundedRectangle} shape - The shape object to draw.\n     * @param matrix - Transform applied to the points of the shape.\n     * @returns - Returns geometry for chaining.\n     */\n    GraphicsGeometry.prototype.drawHole = function (shape, matrix) {\n        if (matrix === void 0) { matrix = null; }\n        if (!this.graphicsData.length) {\n            return null;\n        }\n        var data = new GraphicsData(shape, null, null, matrix);\n        var lastShape = this.graphicsData[this.graphicsData.length - 1];\n        data.lineStyle = lastShape.lineStyle;\n        lastShape.holes.push(data);\n        this.dirty++;\n        return this;\n    };\n    /** Destroys the GraphicsGeometry object. */\n    GraphicsGeometry.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        // destroy each of the GraphicsData objects\n        for (var i = 0; i < this.graphicsData.length; ++i) {\n            this.graphicsData[i].destroy();\n        }\n        this.points.length = 0;\n        this.points = null;\n        this.colors.length = 0;\n        this.colors = null;\n        this.uvs.length = 0;\n        this.uvs = null;\n        this.indices.length = 0;\n        this.indices = null;\n        this.indexBuffer.destroy();\n        this.indexBuffer = null;\n        this.graphicsData.length = 0;\n        this.graphicsData = null;\n        this.drawCalls.length = 0;\n        this.drawCalls = null;\n        this.batches.length = 0;\n        this.batches = null;\n        this._bounds = null;\n    };\n    /**\n     * Check to see if a point is contained within this geometry.\n     * @param point - Point to check if it's contained.\n     * @returns {boolean} `true` if the point is contained within geometry.\n     */\n    GraphicsGeometry.prototype.containsPoint = function (point) {\n        var graphicsData = this.graphicsData;\n        for (var i = 0; i < graphicsData.length; ++i) {\n            var data = graphicsData[i];\n            if (!data.fillStyle.visible) {\n                continue;\n            }\n            // only deal with fills..\n            if (data.shape) {\n                if (data.matrix) {\n                    data.matrix.applyInverse(point, tmpPoint);\n                }\n                else {\n                    tmpPoint.copyFrom(point);\n                }\n                if (data.shape.contains(tmpPoint.x, tmpPoint.y)) {\n                    var hitHole = false;\n                    if (data.holes) {\n                        for (var i_1 = 0; i_1 < data.holes.length; i_1++) {\n                            var hole = data.holes[i_1];\n                            if (hole.shape.contains(tmpPoint.x, tmpPoint.y)) {\n                                hitHole = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!hitHole) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * Generates intermediate batch data. Either gets converted to drawCalls\n     * or used to convert to batch objects directly by the Graphics object.\n     * @param allow32Indices - Allow using 32-bit indices for preventing artifacts when more that 65535 vertices\n     */\n    GraphicsGeometry.prototype.updateBatches = function (allow32Indices) {\n        if (!this.graphicsData.length) {\n            this.batchable = true;\n            return;\n        }\n        if (!this.validateBatching()) {\n            return;\n        }\n        this.cacheDirty = this.dirty;\n        var uvs = this.uvs;\n        var graphicsData = this.graphicsData;\n        var batchPart = null;\n        var currentStyle = null;\n        if (this.batches.length > 0) {\n            batchPart = this.batches[this.batches.length - 1];\n            currentStyle = batchPart.style;\n        }\n        for (var i = this.shapeIndex; i < graphicsData.length; i++) {\n            this.shapeIndex++;\n            var data = graphicsData[i];\n            var fillStyle = data.fillStyle;\n            var lineStyle = data.lineStyle;\n            var command = FILL_COMMANDS[data.type];\n            // build out the shapes points..\n            command.build(data);\n            if (data.matrix) {\n                this.transformPoints(data.points, data.matrix);\n            }\n            if (fillStyle.visible || lineStyle.visible) {\n                this.processHoles(data.holes);\n            }\n            for (var j = 0; j < 2; j++) {\n                var style = (j === 0) ? fillStyle : lineStyle;\n                if (!style.visible)\n                    { continue; }\n                var nextTexture = style.texture.baseTexture;\n                var index_1 = this.indices.length;\n                var attribIndex = this.points.length / 2;\n                nextTexture.wrapMode = WRAP_MODES.REPEAT;\n                if (j === 0) {\n                    this.processFill(data);\n                }\n                else {\n                    this.processLine(data);\n                }\n                var size = (this.points.length / 2) - attribIndex;\n                if (size === 0)\n                    { continue; }\n                // close batch if style is different\n                if (batchPart && !this._compareStyles(currentStyle, style)) {\n                    batchPart.end(index_1, attribIndex);\n                    batchPart = null;\n                }\n                // spawn new batch if its first batch or previous was closed\n                if (!batchPart) {\n                    batchPart = BATCH_POOL.pop() || new BatchPart();\n                    batchPart.begin(style, index_1, attribIndex);\n                    this.batches.push(batchPart);\n                    currentStyle = style;\n                }\n                this.addUvs(this.points, uvs, style.texture, attribIndex, size, style.matrix);\n            }\n        }\n        var index = this.indices.length;\n        var attrib = this.points.length / 2;\n        if (batchPart) {\n            batchPart.end(index, attrib);\n        }\n        if (this.batches.length === 0) {\n            // there are no visible styles in GraphicsData\n            // its possible that someone wants Graphics just for the bounds\n            this.batchable = true;\n            return;\n        }\n        // prevent allocation when length is same as buffer\n        if (this.indicesUint16 && this.indices.length === this.indicesUint16.length) {\n            this.indicesUint16.set(this.indices);\n        }\n        else {\n            var need32 = attrib > 0xffff && allow32Indices;\n            this.indicesUint16 = need32 ? new Uint32Array(this.indices) : new Uint16Array(this.indices);\n        }\n        // TODO make this a const..\n        this.batchable = this.isBatchable();\n        if (this.batchable) {\n            this.packBatches();\n        }\n        else {\n            this.buildDrawCalls();\n        }\n    };\n    /**\n     * Affinity check\n     * @param styleA\n     * @param styleB\n     */\n    GraphicsGeometry.prototype._compareStyles = function (styleA, styleB) {\n        if (!styleA || !styleB) {\n            return false;\n        }\n        if (styleA.texture.baseTexture !== styleB.texture.baseTexture) {\n            return false;\n        }\n        if (styleA.color + styleA.alpha !== styleB.color + styleB.alpha) {\n            return false;\n        }\n        if (!!styleA.native !== !!styleB.native) {\n            return false;\n        }\n        return true;\n    };\n    /** Test geometry for batching process. */\n    GraphicsGeometry.prototype.validateBatching = function () {\n        if (this.dirty === this.cacheDirty || !this.graphicsData.length) {\n            return false;\n        }\n        for (var i = 0, l = this.graphicsData.length; i < l; i++) {\n            var data = this.graphicsData[i];\n            var fill = data.fillStyle;\n            var line = data.lineStyle;\n            if (fill && !fill.texture.baseTexture.valid)\n                { return false; }\n            if (line && !line.texture.baseTexture.valid)\n                { return false; }\n        }\n        return true;\n    };\n    /** Offset the indices so that it works with the batcher. */\n    GraphicsGeometry.prototype.packBatches = function () {\n        this.batchDirty++;\n        this.uvsFloat32 = new Float32Array(this.uvs);\n        var batches = this.batches;\n        for (var i = 0, l = batches.length; i < l; i++) {\n            var batch = batches[i];\n            for (var j = 0; j < batch.size; j++) {\n                var index = batch.start + j;\n                this.indicesUint16[index] = this.indicesUint16[index] - batch.attribStart;\n            }\n        }\n    };\n    /**\n     * Checks to see if this graphics geometry can be batched.\n     * Currently it needs to be small enough and not contain any native lines.\n     */\n    GraphicsGeometry.prototype.isBatchable = function () {\n        // prevent heavy mesh batching\n        if (this.points.length > 0xffff * 2) {\n            return false;\n        }\n        var batches = this.batches;\n        for (var i = 0; i < batches.length; i++) {\n            if (batches[i].style.native) {\n                return false;\n            }\n        }\n        return (this.points.length < GraphicsGeometry.BATCHABLE_SIZE * 2);\n    };\n    /** Converts intermediate batches data to drawCalls. */\n    GraphicsGeometry.prototype.buildDrawCalls = function () {\n        var TICK = ++BaseTexture._globalBatch;\n        for (var i = 0; i < this.drawCalls.length; i++) {\n            this.drawCalls[i].texArray.clear();\n            DRAW_CALL_POOL.push(this.drawCalls[i]);\n        }\n        this.drawCalls.length = 0;\n        var colors = this.colors;\n        var textureIds = this.textureIds;\n        var currentGroup = DRAW_CALL_POOL.pop();\n        if (!currentGroup) {\n            currentGroup = new BatchDrawCall();\n            currentGroup.texArray = new BatchTextureArray();\n        }\n        currentGroup.texArray.count = 0;\n        currentGroup.start = 0;\n        currentGroup.size = 0;\n        currentGroup.type = DRAW_MODES.TRIANGLES;\n        var textureCount = 0;\n        var currentTexture = null;\n        var textureId = 0;\n        var native = false;\n        var drawMode = DRAW_MODES.TRIANGLES;\n        var index = 0;\n        this.drawCalls.push(currentGroup);\n        // TODO - this can be simplified\n        for (var i = 0; i < this.batches.length; i++) {\n            var data = this.batches[i];\n            // TODO add some full on MAX_TEXTURE CODE..\n            var MAX_TEXTURES = 8;\n            // Forced cast for checking `native` without errors\n            var style = data.style;\n            var nextTexture = style.texture.baseTexture;\n            if (native !== !!style.native) {\n                native = !!style.native;\n                drawMode = native ? DRAW_MODES.LINES : DRAW_MODES.TRIANGLES;\n                // force the batch to break!\n                currentTexture = null;\n                textureCount = MAX_TEXTURES;\n                TICK++;\n            }\n            if (currentTexture !== nextTexture) {\n                currentTexture = nextTexture;\n                if (nextTexture._batchEnabled !== TICK) {\n                    if (textureCount === MAX_TEXTURES) {\n                        TICK++;\n                        textureCount = 0;\n                        if (currentGroup.size > 0) {\n                            currentGroup = DRAW_CALL_POOL.pop();\n                            if (!currentGroup) {\n                                currentGroup = new BatchDrawCall();\n                                currentGroup.texArray = new BatchTextureArray();\n                            }\n                            this.drawCalls.push(currentGroup);\n                        }\n                        currentGroup.start = index;\n                        currentGroup.size = 0;\n                        currentGroup.texArray.count = 0;\n                        currentGroup.type = drawMode;\n                    }\n                    // TODO add this to the render part..\n                    // Hack! Because texture has protected `touched`\n                    nextTexture.touched = 1; // touch;\n                    nextTexture._batchEnabled = TICK;\n                    nextTexture._batchLocation = textureCount;\n                    nextTexture.wrapMode = WRAP_MODES.REPEAT;\n                    currentGroup.texArray.elements[currentGroup.texArray.count++] = nextTexture;\n                    textureCount++;\n                }\n            }\n            currentGroup.size += data.size;\n            index += data.size;\n            textureId = nextTexture._batchLocation;\n            this.addColors(colors, style.color, style.alpha, data.attribSize, data.attribStart);\n            this.addTextureIds(textureIds, textureId, data.attribSize, data.attribStart);\n        }\n        BaseTexture._globalBatch = TICK;\n        // upload..\n        // merge for now!\n        this.packAttributes();\n    };\n    /** Packs attributes to single buffer. */\n    GraphicsGeometry.prototype.packAttributes = function () {\n        var verts = this.points;\n        var uvs = this.uvs;\n        var colors = this.colors;\n        var textureIds = this.textureIds;\n        // verts are 2 positions.. so we * by 3 as there are 6 properties.. then 4 cos its bytes\n        var glPoints = new ArrayBuffer(verts.length * 3 * 4);\n        var f32 = new Float32Array(glPoints);\n        var u32 = new Uint32Array(glPoints);\n        var p = 0;\n        for (var i = 0; i < verts.length / 2; i++) {\n            f32[p++] = verts[i * 2];\n            f32[p++] = verts[(i * 2) + 1];\n            f32[p++] = uvs[i * 2];\n            f32[p++] = uvs[(i * 2) + 1];\n            u32[p++] = colors[i];\n            f32[p++] = textureIds[i];\n        }\n        this._buffer.update(glPoints);\n        this._indexBuffer.update(this.indicesUint16);\n    };\n    /**\n     * Process fill part of Graphics.\n     * @param data\n     */\n    GraphicsGeometry.prototype.processFill = function (data) {\n        if (data.holes.length) {\n            buildPoly.triangulate(data, this);\n        }\n        else {\n            var command = FILL_COMMANDS[data.type];\n            command.triangulate(data, this);\n        }\n    };\n    /**\n     * Process line part of Graphics.\n     * @param data\n     */\n    GraphicsGeometry.prototype.processLine = function (data) {\n        buildLine(data, this);\n        for (var i = 0; i < data.holes.length; i++) {\n            buildLine(data.holes[i], this);\n        }\n    };\n    /**\n     * Process the holes data.\n     * @param holes\n     */\n    GraphicsGeometry.prototype.processHoles = function (holes) {\n        for (var i = 0; i < holes.length; i++) {\n            var hole = holes[i];\n            var command = FILL_COMMANDS[hole.type];\n            command.build(hole);\n            if (hole.matrix) {\n                this.transformPoints(hole.points, hole.matrix);\n            }\n        }\n    };\n    /** Update the local bounds of the object. Expensive to use performance-wise. */\n    GraphicsGeometry.prototype.calculateBounds = function () {\n        var bounds = this._bounds;\n        var sequenceBounds = tmpBounds;\n        var curMatrix = Matrix.IDENTITY;\n        this._bounds.clear();\n        sequenceBounds.clear();\n        for (var i = 0; i < this.graphicsData.length; i++) {\n            var data = this.graphicsData[i];\n            var shape = data.shape;\n            var type = data.type;\n            var lineStyle = data.lineStyle;\n            var nextMatrix = data.matrix || Matrix.IDENTITY;\n            var lineWidth = 0.0;\n            if (lineStyle && lineStyle.visible) {\n                lineWidth = lineStyle.width;\n                if (type !== SHAPES.POLY || data.fillStyle.visible) {\n                    lineWidth *= Math.max(0, lineStyle.alignment);\n                }\n                else {\n                    lineWidth *= Math.max(lineStyle.alignment, 1 - lineStyle.alignment);\n                }\n            }\n            if (curMatrix !== nextMatrix) {\n                if (!sequenceBounds.isEmpty()) {\n                    bounds.addBoundsMatrix(sequenceBounds, curMatrix);\n                    sequenceBounds.clear();\n                }\n                curMatrix = nextMatrix;\n            }\n            if (type === SHAPES.RECT || type === SHAPES.RREC) {\n                var rect = shape;\n                sequenceBounds.addFramePad(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, lineWidth, lineWidth);\n            }\n            else if (type === SHAPES.CIRC) {\n                var circle = shape;\n                sequenceBounds.addFramePad(circle.x, circle.y, circle.x, circle.y, circle.radius + lineWidth, circle.radius + lineWidth);\n            }\n            else if (type === SHAPES.ELIP) {\n                var ellipse = shape;\n                sequenceBounds.addFramePad(ellipse.x, ellipse.y, ellipse.x, ellipse.y, ellipse.width + lineWidth, ellipse.height + lineWidth);\n            }\n            else {\n                var poly = shape;\n                // adding directly to the bounds\n                bounds.addVerticesMatrix(curMatrix, poly.points, 0, poly.points.length, lineWidth, lineWidth);\n            }\n        }\n        if (!sequenceBounds.isEmpty()) {\n            bounds.addBoundsMatrix(sequenceBounds, curMatrix);\n        }\n        bounds.pad(this.boundsPadding, this.boundsPadding);\n    };\n    /**\n     * Transform points using matrix.\n     * @param points - Points to transform\n     * @param matrix - Transform matrix\n     */\n    GraphicsGeometry.prototype.transformPoints = function (points, matrix) {\n        for (var i = 0; i < points.length / 2; i++) {\n            var x = points[(i * 2)];\n            var y = points[(i * 2) + 1];\n            points[(i * 2)] = (matrix.a * x) + (matrix.c * y) + matrix.tx;\n            points[(i * 2) + 1] = (matrix.b * x) + (matrix.d * y) + matrix.ty;\n        }\n    };\n    /**\n     * Add colors.\n     * @param colors - List of colors to add to\n     * @param color - Color to add\n     * @param alpha - Alpha to use\n     * @param size - Number of colors to add\n     * @param offset\n     */\n    GraphicsGeometry.prototype.addColors = function (colors, color, alpha, size, offset) {\n        if (offset === void 0) { offset = 0; }\n        // TODO use the premultiply bits Ivan added\n        var rgb = (color >> 16) + (color & 0xff00) + ((color & 0xff) << 16);\n        var rgba = premultiplyTint(rgb, alpha);\n        colors.length = Math.max(colors.length, offset + size);\n        for (var i = 0; i < size; i++) {\n            colors[offset + i] = rgba;\n        }\n    };\n    /**\n     * Add texture id that the shader/fragment wants to use.\n     * @param textureIds\n     * @param id\n     * @param size\n     * @param offset\n     */\n    GraphicsGeometry.prototype.addTextureIds = function (textureIds, id, size, offset) {\n        if (offset === void 0) { offset = 0; }\n        textureIds.length = Math.max(textureIds.length, offset + size);\n        for (var i = 0; i < size; i++) {\n            textureIds[offset + i] = id;\n        }\n    };\n    /**\n     * Generates the UVs for a shape.\n     * @param verts - Vertices\n     * @param uvs - UVs\n     * @param texture - Reference to Texture\n     * @param start - Index buffer start index.\n     * @param size - The size/length for index buffer.\n     * @param matrix - Optional transform for all points.\n     */\n    GraphicsGeometry.prototype.addUvs = function (verts, uvs, texture, start, size, matrix) {\n        if (matrix === void 0) { matrix = null; }\n        var index = 0;\n        var uvsStart = uvs.length;\n        var frame = texture.frame;\n        while (index < size) {\n            var x = verts[(start + index) * 2];\n            var y = verts[((start + index) * 2) + 1];\n            if (matrix) {\n                var nx = (matrix.a * x) + (matrix.c * y) + matrix.tx;\n                y = (matrix.b * x) + (matrix.d * y) + matrix.ty;\n                x = nx;\n            }\n            index++;\n            uvs.push(x / frame.width, y / frame.height);\n        }\n        var baseTexture = texture.baseTexture;\n        if (frame.width < baseTexture.width\n            || frame.height < baseTexture.height) {\n            this.adjustUvs(uvs, texture, uvsStart, size);\n        }\n    };\n    /**\n     * Modify uvs array according to position of texture region\n     * Does not work with rotated or trimmed textures\n     * @param uvs - array\n     * @param texture - region\n     * @param start - starting index for uvs\n     * @param size - how many points to adjust\n     */\n    GraphicsGeometry.prototype.adjustUvs = function (uvs, texture, start, size) {\n        var baseTexture = texture.baseTexture;\n        var eps = 1e-6;\n        var finish = start + (size * 2);\n        var frame = texture.frame;\n        var scaleX = frame.width / baseTexture.width;\n        var scaleY = frame.height / baseTexture.height;\n        var offsetX = frame.x / frame.width;\n        var offsetY = frame.y / frame.height;\n        var minX = Math.floor(uvs[start] + eps);\n        var minY = Math.floor(uvs[start + 1] + eps);\n        for (var i = start + 2; i < finish; i += 2) {\n            minX = Math.min(minX, Math.floor(uvs[i] + eps));\n            minY = Math.min(minY, Math.floor(uvs[i + 1] + eps));\n        }\n        offsetX -= minX;\n        offsetY -= minY;\n        for (var i = start; i < finish; i += 2) {\n            uvs[i] = (uvs[i] + offsetX) * scaleX;\n            uvs[i + 1] = (uvs[i + 1] + offsetY) * scaleY;\n        }\n    };\n    /**\n     * The maximum number of points to consider an object \"batchable\",\n     * able to be batched by the renderer's batch system.\n\\\n     */\n    GraphicsGeometry.BATCHABLE_SIZE = 100;\n    return GraphicsGeometry;\n}(BatchGeometry));\n\n/**\n * Represents the line style for Graphics.\n * @memberof PIXI\n */\nvar LineStyle = /** @class */ (function (_super) {\n    __extends(LineStyle, _super);\n    function LineStyle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** The width (thickness) of any lines drawn. */\n        _this.width = 0;\n        /** The alignment of any lines drawn (0.5 = middle, 1 = outer, 0 = inner). WebGL only. */\n        _this.alignment = 0.5;\n        /** If true the lines will be draw using LINES instead of TRIANGLE_STRIP. */\n        _this.native = false;\n        /**\n         * Line cap style.\n         * @member {PIXI.LINE_CAP}\n         * @default PIXI.LINE_CAP.BUTT\n         */\n        _this.cap = LINE_CAP.BUTT;\n        /**\n         * Line join style.\n         * @member {PIXI.LINE_JOIN}\n         * @default PIXI.LINE_JOIN.MITER\n         */\n        _this.join = LINE_JOIN.MITER;\n        /** Miter limit. */\n        _this.miterLimit = 10;\n        return _this;\n    }\n    /** Clones the object. */\n    LineStyle.prototype.clone = function () {\n        var obj = new LineStyle();\n        obj.color = this.color;\n        obj.alpha = this.alpha;\n        obj.texture = this.texture;\n        obj.matrix = this.matrix;\n        obj.visible = this.visible;\n        obj.width = this.width;\n        obj.alignment = this.alignment;\n        obj.native = this.native;\n        obj.cap = this.cap;\n        obj.join = this.join;\n        obj.miterLimit = this.miterLimit;\n        return obj;\n    };\n    /** Reset the line style to default. */\n    LineStyle.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        // Override default line style color\n        this.color = 0x0;\n        this.alignment = 0.5;\n        this.width = 0;\n        this.native = false;\n    };\n    return LineStyle;\n}(FillStyle));\n\nvar temp = new Float32Array(3);\n// a default shaders map used by graphics..\nvar DEFAULT_SHADERS = {};\n/**\n * The Graphics class is primarily used to render primitive shapes such as lines, circles and\n * rectangles to the display, and to color and fill them.  However, you can also use a Graphics\n * object to build a list of primitives to use as a mask, or as a complex hitArea.\n *\n * Please note that due to legacy naming conventions, the behavior of some functions in this class\n * can be confusing.  Each call to `drawRect()`, `drawPolygon()`, etc. actually stores that primitive\n * in the Geometry class's GraphicsGeometry object for later use in rendering or hit testing - the\n * functions do not directly draw anything to the screen.  Similarly, the `clear()` function doesn't\n * change the screen, it simply resets the list of primitives, which can be useful if you want to\n * rebuild the contents of an existing Graphics object.\n *\n * Once a GraphicsGeometry list is built, you can re-use it in other Geometry objects as\n * an optimization, by passing it into a new Geometry object's constructor.  Because of this\n * ability, it's important to call `destroy()` on Geometry objects once you are done with them, to\n * properly dereference each GraphicsGeometry and prevent memory leaks.\n * @memberof PIXI\n */\nvar Graphics = /** @class */ (function (_super) {\n    __extends(Graphics, _super);\n    /**\n     * @param geometry - Geometry to use, if omitted will create a new GraphicsGeometry instance.\n     */\n    function Graphics(geometry) {\n        if (geometry === void 0) { geometry = null; }\n        var _this = _super.call(this) || this;\n        /**\n         * Represents the vertex and fragment shaders that processes the geometry and runs on the GPU.\n         * Can be shared between multiple Graphics objects.\n         */\n        _this.shader = null;\n        /** Renderer plugin for batching */\n        _this.pluginName = 'batch';\n        /**\n         * Current path\n         * @readonly\n         */\n        _this.currentPath = null;\n        /** A collections of batches! These can be drawn by the renderer batch system. */\n        _this.batches = [];\n        /** Update dirty for limiting calculating tints for batches. */\n        _this.batchTint = -1;\n        /** Update dirty for limiting calculating batches.*/\n        _this.batchDirty = -1;\n        /** Copy of the object vertex data. */\n        _this.vertexData = null;\n        /** Current fill style. */\n        _this._fillStyle = new FillStyle();\n        /** Current line style. */\n        _this._lineStyle = new LineStyle();\n        /** Current shape transform matrix. */\n        _this._matrix = null;\n        /** Current hole mode is enabled. */\n        _this._holeMode = false;\n        /**\n         * Represents the WebGL state the Graphics required to render, excludes shader and geometry. E.g.,\n         * blend mode, culling, depth testing, direction of rendering triangles, backface, etc.\n         */\n        _this.state = State.for2d();\n        _this._geometry = geometry || new GraphicsGeometry();\n        _this._geometry.refCount++;\n        /**\n         * When cacheAsBitmap is set to true the graphics object will be rendered as if it was a sprite.\n         * This is useful if your graphics element does not change often, as it will speed up the rendering\n         * of the object in exchange for taking up texture memory. It is also useful if you need the graphics\n         * object to be anti-aliased, because it will be rendered using canvas. This is not recommended if\n         * you are constantly redrawing the graphics element.\n         * @name cacheAsBitmap\n         * @member {boolean}\n         * @memberof PIXI.Graphics#\n         * @default false\n         */\n        _this._transformID = -1;\n        // Set default\n        _this.tint = 0xFFFFFF;\n        _this.blendMode = BLEND_MODES.NORMAL;\n        return _this;\n    }\n    Object.defineProperty(Graphics.prototype, \"geometry\", {\n        /**\n         * Includes vertex positions, face indices, normals, colors, UVs, and\n         * custom attributes within buffers, reducing the cost of passing all\n         * this data to the GPU. Can be shared between multiple Mesh or Graphics objects.\n         * @readonly\n         */\n        get: function () {\n            return this._geometry;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Creates a new Graphics object with the same values as this one.\n     * Note that only the geometry of the object is cloned, not its transform (position,scale,etc)\n     * @returns - A clone of the graphics object\n     */\n    Graphics.prototype.clone = function () {\n        this.finishPoly();\n        return new Graphics(this._geometry);\n    };\n    Object.defineProperty(Graphics.prototype, \"blendMode\", {\n        get: function () {\n            return this.state.blendMode;\n        },\n        /**\n         * The blend mode to be applied to the graphic shape. Apply a value of\n         * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.  Note that, since each\n         * primitive in the GraphicsGeometry list is rendered sequentially, modes\n         * such as `PIXI.BLEND_MODES.ADD` and `PIXI.BLEND_MODES.MULTIPLY` will\n         * be applied per-primitive.\n         * @default PIXI.BLEND_MODES.NORMAL\n         */\n        set: function (value) {\n            this.state.blendMode = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Graphics.prototype, \"tint\", {\n        /**\n         * The tint applied to each graphic shape. This is a hex value. A value of\n         * 0xFFFFFF will remove any tint effect.\n         * @default 0xFFFFFF\n         */\n        get: function () {\n            return this._tint;\n        },\n        set: function (value) {\n            this._tint = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Graphics.prototype, \"fill\", {\n        /**\n         * The current fill style.\n         * @readonly\n         */\n        get: function () {\n            return this._fillStyle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Graphics.prototype, \"line\", {\n        /**\n         * The current line style.\n         * @readonly\n         */\n        get: function () {\n            return this._lineStyle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Graphics.prototype.lineStyle = function (options, color, alpha, alignment, native) {\n        if (options === void 0) { options = null; }\n        if (color === void 0) { color = 0x0; }\n        if (alpha === void 0) { alpha = 1; }\n        if (alignment === void 0) { alignment = 0.5; }\n        if (native === void 0) { native = false; }\n        // Support non-object params: (width, color, alpha, alignment, native)\n        if (typeof options === 'number') {\n            options = { width: options, color: color, alpha: alpha, alignment: alignment, native: native };\n        }\n        return this.lineTextureStyle(options);\n    };\n    /**\n     * Like line style but support texture for line fill.\n     * @param [options] - Collection of options for setting line style.\n     * @param {number} [options.width=0] - width of the line to draw, will update the objects stored style\n     * @param {PIXI.Texture} [options.texture=PIXI.Texture.WHITE] - Texture to use\n     * @param {number} [options.color=0x0] - color of the line to draw, will update the objects stored style.\n     *  Default 0xFFFFFF if texture present.\n     * @param {number} [options.alpha=1] - alpha of the line to draw, will update the objects stored style\n     * @param {PIXI.Matrix} [options.matrix=null] - Texture matrix to transform texture\n     * @param {number} [options.alignment=0.5] - alignment of the line to draw, (0 = inner, 0.5 = middle, 1 = outer).\n     *        WebGL only.\n     * @param {boolean} [options.native=false] - If true the lines will be draw using LINES instead of TRIANGLE_STRIP\n     * @param {PIXI.LINE_CAP}[options.cap=PIXI.LINE_CAP.BUTT] - line cap style\n     * @param {PIXI.LINE_JOIN}[options.join=PIXI.LINE_JOIN.MITER] - line join style\n     * @param {number}[options.miterLimit=10] - miter limit ratio\n     * @returns {PIXI.Graphics} This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.lineTextureStyle = function (options) {\n        // Apply defaults\n        options = Object.assign({\n            width: 0,\n            texture: Texture.WHITE,\n            color: (options && options.texture) ? 0xFFFFFF : 0x0,\n            alpha: 1,\n            matrix: null,\n            alignment: 0.5,\n            native: false,\n            cap: LINE_CAP.BUTT,\n            join: LINE_JOIN.MITER,\n            miterLimit: 10,\n        }, options);\n        if (this.currentPath) {\n            this.startPoly();\n        }\n        var visible = options.width > 0 && options.alpha > 0;\n        if (!visible) {\n            this._lineStyle.reset();\n        }\n        else {\n            if (options.matrix) {\n                options.matrix = options.matrix.clone();\n                options.matrix.invert();\n            }\n            Object.assign(this._lineStyle, { visible: visible }, options);\n        }\n        return this;\n    };\n    /**\n     * Start a polygon object internally.\n     * @protected\n     */\n    Graphics.prototype.startPoly = function () {\n        if (this.currentPath) {\n            var points = this.currentPath.points;\n            var len = this.currentPath.points.length;\n            if (len > 2) {\n                this.drawShape(this.currentPath);\n                this.currentPath = new Polygon();\n                this.currentPath.closeStroke = false;\n                this.currentPath.points.push(points[len - 2], points[len - 1]);\n            }\n        }\n        else {\n            this.currentPath = new Polygon();\n            this.currentPath.closeStroke = false;\n        }\n    };\n    /**\n     * Finish the polygon object.\n     * @protected\n     */\n    Graphics.prototype.finishPoly = function () {\n        if (this.currentPath) {\n            if (this.currentPath.points.length > 2) {\n                this.drawShape(this.currentPath);\n                this.currentPath = null;\n            }\n            else {\n                this.currentPath.points.length = 0;\n            }\n        }\n    };\n    /**\n     * Moves the current drawing position to x, y.\n     * @param x - the X coordinate to move to\n     * @param y - the Y coordinate to move to\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.moveTo = function (x, y) {\n        this.startPoly();\n        this.currentPath.points[0] = x;\n        this.currentPath.points[1] = y;\n        return this;\n    };\n    /**\n     * Draws a line using the current line style from the current drawing position to (x, y);\n     * The current drawing position is then set to (x, y).\n     * @param x - the X coordinate to draw to\n     * @param y - the Y coordinate to draw to\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.lineTo = function (x, y) {\n        if (!this.currentPath) {\n            this.moveTo(0, 0);\n        }\n        // remove duplicates..\n        var points = this.currentPath.points;\n        var fromX = points[points.length - 2];\n        var fromY = points[points.length - 1];\n        if (fromX !== x || fromY !== y) {\n            points.push(x, y);\n        }\n        return this;\n    };\n    /**\n     * Initialize the curve\n     * @param x\n     * @param y\n     */\n    Graphics.prototype._initCurve = function (x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (this.currentPath) {\n            if (this.currentPath.points.length === 0) {\n                this.currentPath.points = [x, y];\n            }\n        }\n        else {\n            this.moveTo(x, y);\n        }\n    };\n    /**\n     * Calculate the points for a quadratic bezier curve and then draws it.\n     * Based on: https://stackoverflow.com/questions/785097/how-do-i-implement-a-bezier-curve-in-c\n     * @param cpX - Control point x\n     * @param cpY - Control point y\n     * @param toX - Destination point x\n     * @param toY - Destination point y\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.quadraticCurveTo = function (cpX, cpY, toX, toY) {\n        this._initCurve();\n        var points = this.currentPath.points;\n        if (points.length === 0) {\n            this.moveTo(0, 0);\n        }\n        QuadraticUtils.curveTo(cpX, cpY, toX, toY, points);\n        return this;\n    };\n    /**\n     * Calculate the points for a bezier curve and then draws it.\n     * @param cpX - Control point x\n     * @param cpY - Control point y\n     * @param cpX2 - Second Control point x\n     * @param cpY2 - Second Control point y\n     * @param toX - Destination point x\n     * @param toY - Destination point y\n     * @returns This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.bezierCurveTo = function (cpX, cpY, cpX2, cpY2, toX, toY) {\n        this._initCurve();\n        BezierUtils.curveTo(cpX, cpY, cpX2, cpY2, toX, toY, this.currentPath.points);\n        return this;\n    };\n    /**\n     * The arcTo() method creates an arc/curve between two tangents on the canvas.\n     *\n     * \"borrowed\" from https://code.google.com/p/fxcanvas/ - thanks google!\n     * @param x1 - The x-coordinate of the first tangent point of the arc\n     * @param y1 - The y-coordinate of the first tangent point of the arc\n     * @param x2 - The x-coordinate of the end of the arc\n     * @param y2 - The y-coordinate of the end of the arc\n     * @param radius - The radius of the arc\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n        this._initCurve(x1, y1);\n        var points = this.currentPath.points;\n        var result = ArcUtils.curveTo(x1, y1, x2, y2, radius, points);\n        if (result) {\n            var cx = result.cx, cy = result.cy, radius_1 = result.radius, startAngle = result.startAngle, endAngle = result.endAngle, anticlockwise = result.anticlockwise;\n            this.arc(cx, cy, radius_1, startAngle, endAngle, anticlockwise);\n        }\n        return this;\n    };\n    /**\n     * The arc method creates an arc/curve (used to create circles, or parts of circles).\n     * @param cx - The x-coordinate of the center of the circle\n     * @param cy - The y-coordinate of the center of the circle\n     * @param radius - The radius of the circle\n     * @param startAngle - The starting angle, in radians (0 is at the 3 o'clock position\n     *  of the arc's circle)\n     * @param endAngle - The ending angle, in radians\n     * @param anticlockwise - Specifies whether the drawing should be\n     *  counter-clockwise or clockwise. False is default, and indicates clockwise, while true\n     *  indicates counter-clockwise.\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.arc = function (cx, cy, radius, startAngle, endAngle, anticlockwise) {\n        if (anticlockwise === void 0) { anticlockwise = false; }\n        if (startAngle === endAngle) {\n            return this;\n        }\n        if (!anticlockwise && endAngle <= startAngle) {\n            endAngle += PI_2;\n        }\n        else if (anticlockwise && startAngle <= endAngle) {\n            startAngle += PI_2;\n        }\n        var sweep = endAngle - startAngle;\n        if (sweep === 0) {\n            return this;\n        }\n        var startX = cx + (Math.cos(startAngle) * radius);\n        var startY = cy + (Math.sin(startAngle) * radius);\n        var eps = this._geometry.closePointEps;\n        // If the currentPath exists, take its points. Otherwise call `moveTo` to start a path.\n        var points = this.currentPath ? this.currentPath.points : null;\n        if (points) {\n            // TODO: make a better fix.\n            // We check how far our start is from the last existing point\n            var xDiff = Math.abs(points[points.length - 2] - startX);\n            var yDiff = Math.abs(points[points.length - 1] - startY);\n            if (xDiff < eps && yDiff < eps) ;\n            else {\n                points.push(startX, startY);\n            }\n        }\n        else {\n            this.moveTo(startX, startY);\n            points = this.currentPath.points;\n        }\n        ArcUtils.arc(startX, startY, cx, cy, radius, startAngle, endAngle, anticlockwise, points);\n        return this;\n    };\n    /**\n     * Specifies a simple one-color fill that subsequent calls to other Graphics methods\n     * (such as lineTo() or drawCircle()) use when drawing.\n     * @param color - the color of the fill\n     * @param alpha - the alpha of the fill\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.beginFill = function (color, alpha) {\n        if (color === void 0) { color = 0; }\n        if (alpha === void 0) { alpha = 1; }\n        return this.beginTextureFill({ texture: Texture.WHITE, color: color, alpha: alpha });\n    };\n    /**\n     * Begin the texture fill\n     * @param options - Object object.\n     * @param {PIXI.Texture} [options.texture=PIXI.Texture.WHITE] - Texture to fill\n     * @param {number} [options.color=0xffffff] - Background to fill behind texture\n     * @param {number} [options.alpha=1] - Alpha of fill\n     * @param {PIXI.Matrix} [options.matrix=null] - Transform matrix\n     * @returns {PIXI.Graphics} This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.beginTextureFill = function (options) {\n        // Apply defaults\n        options = Object.assign({\n            texture: Texture.WHITE,\n            color: 0xFFFFFF,\n            alpha: 1,\n            matrix: null,\n        }, options);\n        if (this.currentPath) {\n            this.startPoly();\n        }\n        var visible = options.alpha > 0;\n        if (!visible) {\n            this._fillStyle.reset();\n        }\n        else {\n            if (options.matrix) {\n                options.matrix = options.matrix.clone();\n                options.matrix.invert();\n            }\n            Object.assign(this._fillStyle, { visible: visible }, options);\n        }\n        return this;\n    };\n    /**\n     * Applies a fill to the lines and shapes that were added since the last call to the beginFill() method.\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.endFill = function () {\n        this.finishPoly();\n        this._fillStyle.reset();\n        return this;\n    };\n    /**\n     * Draws a rectangle shape.\n     * @param x - The X coord of the top-left of the rectangle\n     * @param y - The Y coord of the top-left of the rectangle\n     * @param width - The width of the rectangle\n     * @param height - The height of the rectangle\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.drawRect = function (x, y, width, height) {\n        return this.drawShape(new Rectangle(x, y, width, height));\n    };\n    /**\n     * Draw a rectangle shape with rounded/beveled corners.\n     * @param x - The X coord of the top-left of the rectangle\n     * @param y - The Y coord of the top-left of the rectangle\n     * @param width - The width of the rectangle\n     * @param height - The height of the rectangle\n     * @param radius - Radius of the rectangle corners\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.drawRoundedRect = function (x, y, width, height, radius) {\n        return this.drawShape(new RoundedRectangle(x, y, width, height, radius));\n    };\n    /**\n     * Draws a circle.\n     * @param x - The X coordinate of the center of the circle\n     * @param y - The Y coordinate of the center of the circle\n     * @param radius - The radius of the circle\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.drawCircle = function (x, y, radius) {\n        return this.drawShape(new Circle(x, y, radius));\n    };\n    /**\n     * Draws an ellipse.\n     * @param x - The X coordinate of the center of the ellipse\n     * @param y - The Y coordinate of the center of the ellipse\n     * @param width - The half width of the ellipse\n     * @param height - The half height of the ellipse\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.drawEllipse = function (x, y, width, height) {\n        return this.drawShape(new Ellipse(x, y, width, height));\n    };\n    /**\n     * Draws a polygon using the given path.\n     * @param {number[]|PIXI.Point[]|PIXI.Polygon} path - The path data used to construct the polygon.\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.drawPolygon = function () {\n        var arguments$1 = arguments;\n\n        var path = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            path[_i] = arguments$1[_i];\n        }\n        var points;\n        var closeStroke = true; // !!this._fillStyle;\n        var poly = path[0];\n        // check if data has points..\n        if (poly.points) {\n            closeStroke = poly.closeStroke;\n            points = poly.points;\n        }\n        else if (Array.isArray(path[0])) {\n            points = path[0];\n        }\n        else {\n            points = path;\n        }\n        var shape = new Polygon(points);\n        shape.closeStroke = closeStroke;\n        this.drawShape(shape);\n        return this;\n    };\n    /**\n     * Draw any shape.\n     * @param {PIXI.Circle|PIXI.Ellipse|PIXI.Polygon|PIXI.Rectangle|PIXI.RoundedRectangle} shape - Shape to draw\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.drawShape = function (shape) {\n        if (!this._holeMode) {\n            this._geometry.drawShape(shape, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix);\n        }\n        else {\n            this._geometry.drawHole(shape, this._matrix);\n        }\n        return this;\n    };\n    /**\n     * Clears the graphics that were drawn to this Graphics object, and resets fill and line style settings.\n     * @returns - This Graphics object. Good for chaining method calls\n     */\n    Graphics.prototype.clear = function () {\n        this._geometry.clear();\n        this._lineStyle.reset();\n        this._fillStyle.reset();\n        this._boundsID++;\n        this._matrix = null;\n        this._holeMode = false;\n        this.currentPath = null;\n        return this;\n    };\n    /**\n     * True if graphics consists of one rectangle, and thus, can be drawn like a Sprite and\n     * masked with gl.scissor.\n     * @returns - True if only 1 rect.\n     */\n    Graphics.prototype.isFastRect = function () {\n        var data = this._geometry.graphicsData;\n        return data.length === 1\n            && data[0].shape.type === SHAPES.RECT\n            && !data[0].matrix\n            && !data[0].holes.length\n            && !(data[0].lineStyle.visible && data[0].lineStyle.width);\n    };\n    /**\n     * Renders the object using the WebGL renderer\n     * @param renderer - The renderer\n     */\n    Graphics.prototype._render = function (renderer) {\n        this.finishPoly();\n        var geometry = this._geometry;\n        var hasuint32 = renderer.context.supports.uint32Indices;\n        // batch part..\n        // batch it!\n        geometry.updateBatches(hasuint32);\n        if (geometry.batchable) {\n            if (this.batchDirty !== geometry.batchDirty) {\n                this._populateBatches();\n            }\n            this._renderBatched(renderer);\n        }\n        else {\n            // no batching...\n            renderer.batch.flush();\n            this._renderDirect(renderer);\n        }\n    };\n    /** Populating batches for rendering. */\n    Graphics.prototype._populateBatches = function () {\n        var geometry = this._geometry;\n        var blendMode = this.blendMode;\n        var len = geometry.batches.length;\n        this.batchTint = -1;\n        this._transformID = -1;\n        this.batchDirty = geometry.batchDirty;\n        this.batches.length = len;\n        this.vertexData = new Float32Array(geometry.points);\n        for (var i = 0; i < len; i++) {\n            var gI = geometry.batches[i];\n            var color = gI.style.color;\n            var vertexData = new Float32Array(this.vertexData.buffer, gI.attribStart * 4 * 2, gI.attribSize * 2);\n            var uvs = new Float32Array(geometry.uvsFloat32.buffer, gI.attribStart * 4 * 2, gI.attribSize * 2);\n            var indices = new Uint16Array(geometry.indicesUint16.buffer, gI.start * 2, gI.size);\n            var batch = {\n                vertexData: vertexData,\n                blendMode: blendMode,\n                indices: indices,\n                uvs: uvs,\n                _batchRGB: hex2rgb(color),\n                _tintRGB: color,\n                _texture: gI.style.texture,\n                alpha: gI.style.alpha,\n                worldAlpha: 1\n            };\n            this.batches[i] = batch;\n        }\n    };\n    /**\n     * Renders the batches using the BathedRenderer plugin\n     * @param renderer - The renderer\n     */\n    Graphics.prototype._renderBatched = function (renderer) {\n        if (!this.batches.length) {\n            return;\n        }\n        renderer.batch.setObjectRenderer(renderer.plugins[this.pluginName]);\n        this.calculateVertices();\n        this.calculateTints();\n        for (var i = 0, l = this.batches.length; i < l; i++) {\n            var batch = this.batches[i];\n            batch.worldAlpha = this.worldAlpha * batch.alpha;\n            renderer.plugins[this.pluginName].render(batch);\n        }\n    };\n    /**\n     * Renders the graphics direct\n     * @param renderer - The renderer\n     */\n    Graphics.prototype._renderDirect = function (renderer) {\n        var shader = this._resolveDirectShader(renderer);\n        var geometry = this._geometry;\n        var tint = this.tint;\n        var worldAlpha = this.worldAlpha;\n        var uniforms = shader.uniforms;\n        var drawCalls = geometry.drawCalls;\n        // lets set the transfomr\n        uniforms.translationMatrix = this.transform.worldTransform;\n        // and then lets set the tint..\n        uniforms.tint[0] = (((tint >> 16) & 0xFF) / 255) * worldAlpha;\n        uniforms.tint[1] = (((tint >> 8) & 0xFF) / 255) * worldAlpha;\n        uniforms.tint[2] = ((tint & 0xFF) / 255) * worldAlpha;\n        uniforms.tint[3] = worldAlpha;\n        // the first draw call, we can set the uniforms of the shader directly here.\n        // this means that we can tack advantage of the sync function of pixi!\n        // bind and sync uniforms..\n        // there is a way to optimise this..\n        renderer.shader.bind(shader);\n        renderer.geometry.bind(geometry, shader);\n        // set state..\n        renderer.state.set(this.state);\n        // then render the rest of them...\n        for (var i = 0, l = drawCalls.length; i < l; i++) {\n            this._renderDrawCallDirect(renderer, geometry.drawCalls[i]);\n        }\n    };\n    /**\n     * Renders specific DrawCall\n     * @param renderer\n     * @param drawCall\n     */\n    Graphics.prototype._renderDrawCallDirect = function (renderer, drawCall) {\n        var texArray = drawCall.texArray, type = drawCall.type, size = drawCall.size, start = drawCall.start;\n        var groupTextureCount = texArray.count;\n        for (var j = 0; j < groupTextureCount; j++) {\n            renderer.texture.bind(texArray.elements[j], j);\n        }\n        renderer.geometry.draw(type, size, start);\n    };\n    /**\n     * Resolves shader for direct rendering\n     * @param renderer - The renderer\n     */\n    Graphics.prototype._resolveDirectShader = function (renderer) {\n        var shader = this.shader;\n        var pluginName = this.pluginName;\n        if (!shader) {\n            // if there is no shader here, we can use the default shader.\n            // and that only gets created if we actually need it..\n            // but may be more than one plugins for graphics\n            if (!DEFAULT_SHADERS[pluginName]) {\n                var MAX_TEXTURES = renderer.plugins[pluginName].MAX_TEXTURES;\n                var sampleValues = new Int32Array(MAX_TEXTURES);\n                for (var i = 0; i < MAX_TEXTURES; i++) {\n                    sampleValues[i] = i;\n                }\n                var uniforms = {\n                    tint: new Float32Array([1, 1, 1, 1]),\n                    translationMatrix: new Matrix(),\n                    default: UniformGroup.from({ uSamplers: sampleValues }, true),\n                };\n                var program = renderer.plugins[pluginName]._shader.program;\n                DEFAULT_SHADERS[pluginName] = new Shader(program, uniforms);\n            }\n            shader = DEFAULT_SHADERS[pluginName];\n        }\n        return shader;\n    };\n    /** Retrieves the bounds of the graphic shape as a rectangle object. */\n    Graphics.prototype._calculateBounds = function () {\n        this.finishPoly();\n        var geometry = this._geometry;\n        // skipping when graphics is empty, like a container\n        if (!geometry.graphicsData.length) {\n            return;\n        }\n        var _a = geometry.bounds, minX = _a.minX, minY = _a.minY, maxX = _a.maxX, maxY = _a.maxY;\n        this._bounds.addFrame(this.transform, minX, minY, maxX, maxY);\n    };\n    /**\n     * Tests if a point is inside this graphics object\n     * @param point - the point to test\n     * @returns - the result of the test\n     */\n    Graphics.prototype.containsPoint = function (point) {\n        this.worldTransform.applyInverse(point, Graphics._TEMP_POINT);\n        return this._geometry.containsPoint(Graphics._TEMP_POINT);\n    };\n    /** Recalculate the tint by applying tint to batches using Graphics tint. */\n    Graphics.prototype.calculateTints = function () {\n        if (this.batchTint !== this.tint) {\n            this.batchTint = this.tint;\n            var tintRGB = hex2rgb(this.tint, temp);\n            for (var i = 0; i < this.batches.length; i++) {\n                var batch = this.batches[i];\n                var batchTint = batch._batchRGB;\n                var r = (tintRGB[0] * batchTint[0]) * 255;\n                var g = (tintRGB[1] * batchTint[1]) * 255;\n                var b = (tintRGB[2] * batchTint[2]) * 255;\n                // TODO Ivan, can this be done in one go?\n                var color = (r << 16) + (g << 8) + (b | 0);\n                batch._tintRGB = (color >> 16)\n                    + (color & 0xff00)\n                    + ((color & 0xff) << 16);\n            }\n        }\n    };\n    /** If there's a transform update or a change to the shape of the geometry, recalculate the vertices. */\n    Graphics.prototype.calculateVertices = function () {\n        var wtID = this.transform._worldID;\n        if (this._transformID === wtID) {\n            return;\n        }\n        this._transformID = wtID;\n        var wt = this.transform.worldTransform;\n        var a = wt.a;\n        var b = wt.b;\n        var c = wt.c;\n        var d = wt.d;\n        var tx = wt.tx;\n        var ty = wt.ty;\n        var data = this._geometry.points; // batch.vertexDataOriginal;\n        var vertexData = this.vertexData;\n        var count = 0;\n        for (var i = 0; i < data.length; i += 2) {\n            var x = data[i];\n            var y = data[i + 1];\n            vertexData[count++] = (a * x) + (c * y) + tx;\n            vertexData[count++] = (d * y) + (b * x) + ty;\n        }\n    };\n    /**\n     * Closes the current path.\n     * @returns - Returns itself.\n     */\n    Graphics.prototype.closePath = function () {\n        var currentPath = this.currentPath;\n        if (currentPath) {\n            // we don't need to add extra point in the end because buildLine will take care of that\n            currentPath.closeStroke = true;\n            // ensure that the polygon is completed, and is available for hit detection\n            // (even if the graphics is not rendered yet)\n            this.finishPoly();\n        }\n        return this;\n    };\n    /**\n     * Apply a matrix to the positional data.\n     * @param matrix - Matrix to use for transform current shape.\n     * @returns - Returns itself.\n     */\n    Graphics.prototype.setMatrix = function (matrix) {\n        this._matrix = matrix;\n        return this;\n    };\n    /**\n     * Begin adding holes to the last draw shape\n     * IMPORTANT: holes must be fully inside a shape to work\n     * Also weirdness ensues if holes overlap!\n     * Ellipses, Circles, Rectangles and Rounded Rectangles cannot be holes or host for holes in CanvasRenderer,\n     * please use `moveTo` `lineTo`, `quadraticCurveTo` if you rely on pixi-legacy bundle.\n     * @returns - Returns itself.\n     */\n    Graphics.prototype.beginHole = function () {\n        this.finishPoly();\n        this._holeMode = true;\n        return this;\n    };\n    /**\n     * End adding holes to the last draw shape.\n     * @returns - Returns itself.\n     */\n    Graphics.prototype.endHole = function () {\n        this.finishPoly();\n        this._holeMode = false;\n        return this;\n    };\n    /**\n     * Destroys the Graphics object.\n     * @param options - Options parameter. A boolean will act as if all\n     *  options have been set to that value\n     * @param {boolean} [options.children=false] - if set to true, all the children will have\n     *  their destroy method called as well. 'options' will be passed on to those calls.\n     * @param {boolean} [options.texture=false] - Only used for child Sprites if options.children is set to true\n     *  Should it destroy the texture of the child sprite\n     * @param {boolean} [options.baseTexture=false] - Only used for child Sprites if options.children is set to true\n     *  Should it destroy the base texture of the child sprite\n     */\n    Graphics.prototype.destroy = function (options) {\n        this._geometry.refCount--;\n        if (this._geometry.refCount === 0) {\n            this._geometry.dispose();\n        }\n        this._matrix = null;\n        this.currentPath = null;\n        this._lineStyle.destroy();\n        this._lineStyle = null;\n        this._fillStyle.destroy();\n        this._fillStyle = null;\n        this._geometry = null;\n        this.shader = null;\n        this.vertexData = null;\n        this.batches.length = 0;\n        this.batches = null;\n        _super.prototype.destroy.call(this, options);\n    };\n    /**\n     * New rendering behavior for rounded rectangles: circular arcs instead of quadratic bezier curves.\n     * In the next major release, we'll enable this by default.\n     */\n    Graphics.nextRoundedRectBehavior = false;\n    /**\n     * Temporary point to use for containsPoint.\n     * @private\n     */\n    Graphics._TEMP_POINT = new Point();\n    return Graphics;\n}(Container));\n\nvar graphicsUtils = {\n    buildPoly: buildPoly,\n    buildCircle: buildCircle,\n    buildRectangle: buildRectangle,\n    buildRoundedRectangle: buildRoundedRectangle,\n    buildLine: buildLine,\n    ArcUtils: ArcUtils,\n    BezierUtils: BezierUtils,\n    QuadraticUtils: QuadraticUtils,\n    BatchPart: BatchPart,\n    FILL_COMMANDS: FILL_COMMANDS,\n    BATCH_POOL: BATCH_POOL,\n    DRAW_CALL_POOL: DRAW_CALL_POOL\n};\n\nexport { FillStyle, GRAPHICS_CURVES, Graphics, GraphicsData, GraphicsGeometry, LINE_CAP, LINE_JOIN, LineStyle, graphicsUtils };\n//# sourceMappingURL=graphics.js.map\n","/*!\n * @pixi/text - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/text is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { Sprite } from '@pixi/sprite';\nimport { Texture } from '@pixi/core';\nimport { settings } from '@pixi/settings';\nimport { Rectangle } from '@pixi/math';\nimport { hex2string, hex2rgb, string2hex, trimCanvas, sign } from '@pixi/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) { if (b.hasOwnProperty(p)) { d[p] = b[p]; } } };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/**\n * Constants that define the type of gradient on text.\n * @static\n * @constant\n * @name TEXT_GRADIENT\n * @memberof PIXI\n * @type {object}\n * @property {number} LINEAR_VERTICAL Vertical gradient\n * @property {number} LINEAR_HORIZONTAL Linear gradient\n */\nvar TEXT_GRADIENT;\n(function (TEXT_GRADIENT) {\n    TEXT_GRADIENT[TEXT_GRADIENT[\"LINEAR_VERTICAL\"] = 0] = \"LINEAR_VERTICAL\";\n    TEXT_GRADIENT[TEXT_GRADIENT[\"LINEAR_HORIZONTAL\"] = 1] = \"LINEAR_HORIZONTAL\";\n})(TEXT_GRADIENT || (TEXT_GRADIENT = {}));\n\n// disabling eslint for now, going to rewrite this in v5\nvar defaultStyle = {\n    align: 'left',\n    breakWords: false,\n    dropShadow: false,\n    dropShadowAlpha: 1,\n    dropShadowAngle: Math.PI / 6,\n    dropShadowBlur: 0,\n    dropShadowColor: 'black',\n    dropShadowDistance: 5,\n    fill: 'black',\n    fillGradientType: TEXT_GRADIENT.LINEAR_VERTICAL,\n    fillGradientStops: [],\n    fontFamily: 'Arial',\n    fontSize: 26,\n    fontStyle: 'normal',\n    fontVariant: 'normal',\n    fontWeight: 'normal',\n    letterSpacing: 0,\n    lineHeight: 0,\n    lineJoin: 'miter',\n    miterLimit: 10,\n    padding: 0,\n    stroke: 'black',\n    strokeThickness: 0,\n    textBaseline: 'alphabetic',\n    trim: false,\n    whiteSpace: 'pre',\n    wordWrap: false,\n    wordWrapWidth: 100,\n    leading: 0,\n};\nvar genericFontFamilies = [\n    'serif',\n    'sans-serif',\n    'monospace',\n    'cursive',\n    'fantasy',\n    'system-ui' ];\n/**\n * A TextStyle Object contains information to decorate a Text objects.\n *\n * An instance can be shared between multiple Text objects; then changing the style will update all text objects using it.\n *\n * A tool can be used to generate a text style [here](https://pixijs.io/pixi-text-style).\n *\n * @memberof PIXI\n */\nvar TextStyle = /** @class */ (function () {\n    /**\n     * @param {object} [style] - The style parameters\n     * @param {string} [style.align='left'] - Alignment for multiline text ('left', 'center' or 'right'),\n     *  does not affect single line text\n     * @param {boolean} [style.breakWords=false] - Indicates if lines can be wrapped within words, it\n     *  needs wordWrap to be set to true\n     * @param {boolean} [style.dropShadow=false] - Set a drop shadow for the text\n     * @param {number} [style.dropShadowAlpha=1] - Set alpha for the drop shadow\n     * @param {number} [style.dropShadowAngle=Math.PI/6] - Set a angle of the drop shadow\n     * @param {number} [style.dropShadowBlur=0] - Set a shadow blur radius\n     * @param {string|number} [style.dropShadowColor='black'] - A fill style to be used on the dropshadow e.g 'red', '#00FF00'\n     * @param {number} [style.dropShadowDistance=5] - Set a distance of the drop shadow\n     * @param {string|string[]|number|number[]|CanvasGradient|CanvasPattern} [style.fill='black'] - A canvas\n     *  fillstyle that will be used on the text e.g 'red', '#00FF00'. Can be an array to create a gradient\n     *  eg ['#000000','#FFFFFF']\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}\n     * @param {number} [style.fillGradientType=PIXI.TEXT_GRADIENT.LINEAR_VERTICAL] - If fill is an array of colours\n     *  to create a gradient, this can change the type/direction of the gradient. See {@link PIXI.TEXT_GRADIENT}\n     * @param {number[]} [style.fillGradientStops] - If fill is an array of colours to create a gradient, this array can set\n     * the stop points (numbers between 0 and 1) for the color, overriding the default behaviour of evenly spacing them.\n     * @param {string|string[]} [style.fontFamily='Arial'] - The font family\n     * @param {number|string} [style.fontSize=26] - The font size (as a number it converts to px, but as a string,\n     *  equivalents are '26px','20pt','160%' or '1.6em')\n     * @param {string} [style.fontStyle='normal'] - The font style ('normal', 'italic' or 'oblique')\n     * @param {string} [style.fontVariant='normal'] - The font variant ('normal' or 'small-caps')\n     * @param {string} [style.fontWeight='normal'] - The font weight ('normal', 'bold', 'bolder', 'lighter' and '100',\n     *  '200', '300', '400', '500', '600', '700', '800' or '900')\n     * @param {number} [style.leading=0] - The space between lines\n     * @param {number} [style.letterSpacing=0] - The amount of spacing between letters, default is 0\n     * @param {number} [style.lineHeight] - The line height, a number that represents the vertical space that a letter uses\n     * @param {string} [style.lineJoin='miter'] - The lineJoin property sets the type of corner created, it can resolve\n     *      spiked text issues. Possible values \"miter\" (creates a sharp corner), \"round\" (creates a round corner) or \"bevel\"\n     *      (creates a squared corner).\n     * @param {number} [style.miterLimit=10] - The miter limit to use when using the 'miter' lineJoin mode. This can reduce\n     *      or increase the spikiness of rendered text.\n     * @param {number} [style.padding=0] - Occasionally some fonts are cropped. Adding some padding will prevent this from\n     *     happening by adding padding to all sides of the text.\n     * @param {string|number} [style.stroke='black'] - A canvas fillstyle that will be used on the text stroke\n     *  e.g 'blue', '#FCFF00'\n     * @param {number} [style.strokeThickness=0] - A number that represents the thickness of the stroke.\n     *  Default is 0 (no stroke)\n     * @param {boolean} [style.trim=false] - Trim transparent borders\n     * @param {string} [style.textBaseline='alphabetic'] - The baseline of the text that is rendered.\n     * @param {string} [style.whiteSpace='pre'] - Determines whether newlines & spaces are collapsed or preserved \"normal\"\n     *      (collapse, collapse), \"pre\" (preserve, preserve) | \"pre-line\" (preserve, collapse). It needs wordWrap to be set to true\n     * @param {boolean} [style.wordWrap=false] - Indicates if word wrap should be used\n     * @param {number} [style.wordWrapWidth=100] - The width at which text will wrap, it needs wordWrap to be set to true\n     */\n    function TextStyle(style) {\n        this.styleID = 0;\n        this.reset();\n        deepCopyProperties(this, style, style);\n    }\n    /**\n     * Creates a new TextStyle object with the same values as this one.\n     * Note that the only the properties of the object are cloned.\n     *\n     * @return New cloned TextStyle object\n     */\n    TextStyle.prototype.clone = function () {\n        var clonedProperties = {};\n        deepCopyProperties(clonedProperties, this, defaultStyle);\n        return new TextStyle(clonedProperties);\n    };\n    /** Resets all properties to the defaults specified in TextStyle.prototype._default */\n    TextStyle.prototype.reset = function () {\n        deepCopyProperties(this, defaultStyle, defaultStyle);\n    };\n    Object.defineProperty(TextStyle.prototype, \"align\", {\n        /**\n         * Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text\n         *\n         * @member {string}\n         */\n        get: function () {\n            return this._align;\n        },\n        set: function (align) {\n            if (this._align !== align) {\n                this._align = align;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"breakWords\", {\n        /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n        get: function () {\n            return this._breakWords;\n        },\n        set: function (breakWords) {\n            if (this._breakWords !== breakWords) {\n                this._breakWords = breakWords;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"dropShadow\", {\n        /** Set a drop shadow for the text. */\n        get: function () {\n            return this._dropShadow;\n        },\n        set: function (dropShadow) {\n            if (this._dropShadow !== dropShadow) {\n                this._dropShadow = dropShadow;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"dropShadowAlpha\", {\n        /** Set alpha for the drop shadow. */\n        get: function () {\n            return this._dropShadowAlpha;\n        },\n        set: function (dropShadowAlpha) {\n            if (this._dropShadowAlpha !== dropShadowAlpha) {\n                this._dropShadowAlpha = dropShadowAlpha;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"dropShadowAngle\", {\n        /** Set a angle of the drop shadow. */\n        get: function () {\n            return this._dropShadowAngle;\n        },\n        set: function (dropShadowAngle) {\n            if (this._dropShadowAngle !== dropShadowAngle) {\n                this._dropShadowAngle = dropShadowAngle;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"dropShadowBlur\", {\n        /** Set a shadow blur radius. */\n        get: function () {\n            return this._dropShadowBlur;\n        },\n        set: function (dropShadowBlur) {\n            if (this._dropShadowBlur !== dropShadowBlur) {\n                this._dropShadowBlur = dropShadowBlur;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"dropShadowColor\", {\n        /** A fill style to be used on the dropshadow e.g 'red', '#00FF00'. */\n        get: function () {\n            return this._dropShadowColor;\n        },\n        set: function (dropShadowColor) {\n            var outputColor = getColor(dropShadowColor);\n            if (this._dropShadowColor !== outputColor) {\n                this._dropShadowColor = outputColor;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"dropShadowDistance\", {\n        /** Set a distance of the drop shadow. */\n        get: function () {\n            return this._dropShadowDistance;\n        },\n        set: function (dropShadowDistance) {\n            if (this._dropShadowDistance !== dropShadowDistance) {\n                this._dropShadowDistance = dropShadowDistance;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fill\", {\n        /**\n         * A canvas fillstyle that will be used on the text e.g 'red', '#00FF00'.\n         *\n         * Can be an array to create a gradient eg ['#000000','#FFFFFF']\n         * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}\n         *\n         * @member {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n         */\n        get: function () {\n            return this._fill;\n        },\n        set: function (fill) {\n            // TODO: Can't have different types for getter and setter. The getter shouldn't have the number type as\n            //       the setter converts to string. See this thread for more details:\n            //       https://github.com/microsoft/TypeScript/issues/2521\n            // TODO: Not sure if getColor works properly with CanvasGradient and/or CanvasPattern, can't pass in\n            //       without casting here.\n            var outputColor = getColor(fill);\n            if (this._fill !== outputColor) {\n                this._fill = outputColor;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fillGradientType\", {\n        /**\n         * If fill is an array of colours to create a gradient, this can change the type/direction of the gradient.\n         *\n         * @see PIXI.TEXT_GRADIENT\n         */\n        get: function () {\n            return this._fillGradientType;\n        },\n        set: function (fillGradientType) {\n            if (this._fillGradientType !== fillGradientType) {\n                this._fillGradientType = fillGradientType;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fillGradientStops\", {\n        /**\n         * If fill is an array of colours to create a gradient, this array can set the stop points\n         * (numbers between 0 and 1) for the color, overriding the default behaviour of evenly spacing them.\n         */\n        get: function () {\n            return this._fillGradientStops;\n        },\n        set: function (fillGradientStops) {\n            if (!areArraysEqual(this._fillGradientStops, fillGradientStops)) {\n                this._fillGradientStops = fillGradientStops;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fontFamily\", {\n        /** The font family. */\n        get: function () {\n            return this._fontFamily;\n        },\n        set: function (fontFamily) {\n            if (this.fontFamily !== fontFamily) {\n                this._fontFamily = fontFamily;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fontSize\", {\n        /**\n         * The font size\n         * (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em')\n         */\n        get: function () {\n            return this._fontSize;\n        },\n        set: function (fontSize) {\n            if (this._fontSize !== fontSize) {\n                this._fontSize = fontSize;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fontStyle\", {\n        /**\n         * The font style\n         * ('normal', 'italic' or 'oblique')\n         *\n         * @member {string}\n         */\n        get: function () {\n            return this._fontStyle;\n        },\n        set: function (fontStyle) {\n            if (this._fontStyle !== fontStyle) {\n                this._fontStyle = fontStyle;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fontVariant\", {\n        /**\n         * The font variant\n         * ('normal' or 'small-caps')\n         *\n         * @member {string}\n         */\n        get: function () {\n            return this._fontVariant;\n        },\n        set: function (fontVariant) {\n            if (this._fontVariant !== fontVariant) {\n                this._fontVariant = fontVariant;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"fontWeight\", {\n        /**\n         * The font weight\n         * ('normal', 'bold', 'bolder', 'lighter' and '100', '200', '300', '400', '500', '600', '700', 800' or '900')\n         *\n         * @member {string}\n         */\n        get: function () {\n            return this._fontWeight;\n        },\n        set: function (fontWeight) {\n            if (this._fontWeight !== fontWeight) {\n                this._fontWeight = fontWeight;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"letterSpacing\", {\n        /** The amount of spacing between letters, default is 0. */\n        get: function () {\n            return this._letterSpacing;\n        },\n        set: function (letterSpacing) {\n            if (this._letterSpacing !== letterSpacing) {\n                this._letterSpacing = letterSpacing;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"lineHeight\", {\n        /** The line height, a number that represents the vertical space that a letter uses. */\n        get: function () {\n            return this._lineHeight;\n        },\n        set: function (lineHeight) {\n            if (this._lineHeight !== lineHeight) {\n                this._lineHeight = lineHeight;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"leading\", {\n        /** The space between lines. */\n        get: function () {\n            return this._leading;\n        },\n        set: function (leading) {\n            if (this._leading !== leading) {\n                this._leading = leading;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"lineJoin\", {\n        /**\n         * The lineJoin property sets the type of corner created, it can resolve spiked text issues.\n         * Default is 'miter' (creates a sharp corner).\n         *\n         * @member {string}\n         */\n        get: function () {\n            return this._lineJoin;\n        },\n        set: function (lineJoin) {\n            if (this._lineJoin !== lineJoin) {\n                this._lineJoin = lineJoin;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"miterLimit\", {\n        /**\n         * The miter limit to use when using the 'miter' lineJoin mode.\n         *\n         * This can reduce or increase the spikiness of rendered text.\n         */\n        get: function () {\n            return this._miterLimit;\n        },\n        set: function (miterLimit) {\n            if (this._miterLimit !== miterLimit) {\n                this._miterLimit = miterLimit;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"padding\", {\n        /**\n         * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n         * by adding padding to all sides of the text.\n         */\n        get: function () {\n            return this._padding;\n        },\n        set: function (padding) {\n            if (this._padding !== padding) {\n                this._padding = padding;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"stroke\", {\n        /**\n         * A canvas fillstyle that will be used on the text stroke\n         * e.g 'blue', '#FCFF00'\n         */\n        get: function () {\n            return this._stroke;\n        },\n        set: function (stroke) {\n            // TODO: Can't have different types for getter and setter. The getter shouldn't have the number type as\n            //       the setter converts to string. See this thread for more details:\n            //       https://github.com/microsoft/TypeScript/issues/2521\n            var outputColor = getColor(stroke);\n            if (this._stroke !== outputColor) {\n                this._stroke = outputColor;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"strokeThickness\", {\n        /**\n         * A number that represents the thickness of the stroke.\n         *\n         * @default 0\n         */\n        get: function () {\n            return this._strokeThickness;\n        },\n        set: function (strokeThickness) {\n            if (this._strokeThickness !== strokeThickness) {\n                this._strokeThickness = strokeThickness;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"textBaseline\", {\n        /**\n         * The baseline of the text that is rendered.\n         *\n         * @member {string}\n         */\n        get: function () {\n            return this._textBaseline;\n        },\n        set: function (textBaseline) {\n            if (this._textBaseline !== textBaseline) {\n                this._textBaseline = textBaseline;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"trim\", {\n        /** Trim transparent borders. */\n        get: function () {\n            return this._trim;\n        },\n        set: function (trim) {\n            if (this._trim !== trim) {\n                this._trim = trim;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"whiteSpace\", {\n        /**\n         * How newlines and spaces should be handled.\n         * Default is 'pre' (preserve, preserve).\n         *\n         *  value       | New lines     |   Spaces\n         *  ---         | ---           |   ---\n         * 'normal'     | Collapse      |   Collapse\n         * 'pre'        | Preserve      |   Preserve\n         * 'pre-line'   | Preserve      |   Collapse\n         *\n         * @member {string}\n         */\n        get: function () {\n            return this._whiteSpace;\n        },\n        set: function (whiteSpace) {\n            if (this._whiteSpace !== whiteSpace) {\n                this._whiteSpace = whiteSpace;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"wordWrap\", {\n        /** Indicates if word wrap should be used. */\n        get: function () {\n            return this._wordWrap;\n        },\n        set: function (wordWrap) {\n            if (this._wordWrap !== wordWrap) {\n                this._wordWrap = wordWrap;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextStyle.prototype, \"wordWrapWidth\", {\n        /** The width at which text will wrap, it needs wordWrap to be set to true. */\n        get: function () {\n            return this._wordWrapWidth;\n        },\n        set: function (wordWrapWidth) {\n            if (this._wordWrapWidth !== wordWrapWidth) {\n                this._wordWrapWidth = wordWrapWidth;\n                this.styleID++;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Generates a font style string to use for `TextMetrics.measureFont()`.\n     *\n     * @return Font style string, for passing to `TextMetrics.measureFont()`\n     */\n    TextStyle.prototype.toFontString = function () {\n        // build canvas api font setting from individual components. Convert a numeric this.fontSize to px\n        var fontSizeString = (typeof this.fontSize === 'number') ? this.fontSize + \"px\" : this.fontSize;\n        // Clean-up fontFamily property by quoting each font name\n        // this will support font names with spaces\n        var fontFamilies = this.fontFamily;\n        if (!Array.isArray(this.fontFamily)) {\n            fontFamilies = this.fontFamily.split(',');\n        }\n        for (var i = fontFamilies.length - 1; i >= 0; i--) {\n            // Trim any extra white-space\n            var fontFamily = fontFamilies[i].trim();\n            // Check if font already contains strings\n            if (!(/([\\\"\\'])[^\\'\\\"]+\\1/).test(fontFamily) && genericFontFamilies.indexOf(fontFamily) < 0) {\n                fontFamily = \"\\\"\" + fontFamily + \"\\\"\";\n            }\n            fontFamilies[i] = fontFamily;\n        }\n        return this.fontStyle + \" \" + this.fontVariant + \" \" + this.fontWeight + \" \" + fontSizeString + \" \" + fontFamilies.join(',');\n    };\n    return TextStyle;\n}());\n/**\n * Utility function to convert hexadecimal colors to strings, and simply return the color if it's a string.\n * @private\n * @param color\n * @return The color as a string.\n */\nfunction getSingleColor(color) {\n    if (typeof color === 'number') {\n        return hex2string(color);\n    }\n    else if (typeof color === 'string') {\n        if (color.indexOf('0x') === 0) {\n            color = color.replace('0x', '#');\n        }\n    }\n    return color;\n}\nfunction getColor(color) {\n    if (!Array.isArray(color)) {\n        return getSingleColor(color);\n    }\n    else {\n        for (var i = 0; i < color.length; ++i) {\n            color[i] = getSingleColor(color[i]);\n        }\n        return color;\n    }\n}\n/**\n * Utility function to convert hexadecimal colors to strings, and simply return the color if it's a string.\n * This version can also convert array of colors\n * @private\n * @param array1 - First array to compare\n * @param array2 - Second array to compare\n * @return Do the arrays contain the same values in the same order\n */\nfunction areArraysEqual(array1, array2) {\n    if (!Array.isArray(array1) || !Array.isArray(array2)) {\n        return false;\n    }\n    if (array1.length !== array2.length) {\n        return false;\n    }\n    for (var i = 0; i < array1.length; ++i) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Utility function to ensure that object properties are copied by value, and not by reference\n * @private\n * @param target - Target object to copy properties into\n * @param source - Source object for the properties to copy\n * @param propertyObj - Object containing properties names we want to loop over\n */\nfunction deepCopyProperties(target, source, propertyObj) {\n    for (var prop in propertyObj) {\n        if (Array.isArray(source[prop])) {\n            target[prop] = source[prop].slice();\n        }\n        else {\n            target[prop] = source[prop];\n        }\n    }\n}\n\n/**\n * The TextMetrics object represents the measurement of a block of text with a specified style.\n *\n * ```js\n * let style = new PIXI.TextStyle({fontFamily : 'Arial', fontSize: 24, fill : 0xff1010, align : 'center'})\n * let textMetrics = PIXI.TextMetrics.measureText('Your text', style)\n * ```\n * @memberof PIXI\n */\nvar TextMetrics = /** @class */ (function () {\n    /**\n     * @param text - the text that was measured\n     * @param style - the style that was measured\n     * @param width - the measured width of the text\n     * @param height - the measured height of the text\n     * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n     * @param lineWidths - an array of the line widths for each line matched to `lines`\n     * @param lineHeight - the measured line height for this style\n     * @param maxLineWidth - the maximum line width for all measured lines\n     * @param {PIXI.IFontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n     */\n    function TextMetrics(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n        this.text = text;\n        this.style = style;\n        this.width = width;\n        this.height = height;\n        this.lines = lines;\n        this.lineWidths = lineWidths;\n        this.lineHeight = lineHeight;\n        this.maxLineWidth = maxLineWidth;\n        this.fontProperties = fontProperties;\n    }\n    /**\n     * Measures the supplied string of text and returns a Rectangle.\n     * @param text - The text to measure.\n     * @param style - The text style to use for measuring\n     * @param wordWrap - Override for if word-wrap should be applied to the text.\n     * @param canvas - optional specification of the canvas to use for measuring.\n     * @returns Measured width and height of the text.\n     */\n    TextMetrics.measureText = function (text, style, wordWrap, canvas) {\n        if (canvas === void 0) { canvas = TextMetrics._canvas; }\n        wordWrap = (wordWrap === undefined || wordWrap === null) ? style.wordWrap : wordWrap;\n        var font = style.toFontString();\n        var fontProperties = TextMetrics.measureFont(font);\n        // fallback in case UA disallow canvas data extraction\n        // (toDataURI, getImageData functions)\n        if (fontProperties.fontSize === 0) {\n            fontProperties.fontSize = style.fontSize;\n            fontProperties.ascent = style.fontSize;\n        }\n        var context = canvas.getContext('2d');\n        context.font = font;\n        var outputText = wordWrap ? TextMetrics.wordWrap(text, style, canvas) : text;\n        var lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n        var lineWidths = new Array(lines.length);\n        var maxLineWidth = 0;\n        for (var i = 0; i < lines.length; i++) {\n            var lineWidth = context.measureText(lines[i]).width + ((lines[i].length - 1) * style.letterSpacing);\n            lineWidths[i] = lineWidth;\n            maxLineWidth = Math.max(maxLineWidth, lineWidth);\n        }\n        var width = maxLineWidth + style.strokeThickness;\n        if (style.dropShadow) {\n            width += style.dropShadowDistance;\n        }\n        var lineHeight = style.lineHeight || fontProperties.fontSize + style.strokeThickness;\n        var height = Math.max(lineHeight, fontProperties.fontSize + style.strokeThickness)\n            + ((lines.length - 1) * (lineHeight + style.leading));\n        if (style.dropShadow) {\n            height += style.dropShadowDistance;\n        }\n        return new TextMetrics(text, style, width, height, lines, lineWidths, lineHeight + style.leading, maxLineWidth, fontProperties);\n    };\n    /**\n     * Applies newlines to a string to have it optimally fit into the horizontal\n     * bounds set by the Text object's wordWrapWidth property.\n     * @param text - String to apply word wrapping to\n     * @param style - the style to use when wrapping\n     * @param canvas - optional specification of the canvas to use for measuring.\n     * @returns New string with new lines applied where required\n     */\n    TextMetrics.wordWrap = function (text, style, canvas) {\n        if (canvas === void 0) { canvas = TextMetrics._canvas; }\n        var context = canvas.getContext('2d');\n        var width = 0;\n        var line = '';\n        var lines = '';\n        var cache = Object.create(null);\n        var letterSpacing = style.letterSpacing, whiteSpace = style.whiteSpace;\n        // How to handle whitespaces\n        var collapseSpaces = TextMetrics.collapseSpaces(whiteSpace);\n        var collapseNewlines = TextMetrics.collapseNewlines(whiteSpace);\n        // whether or not spaces may be added to the beginning of lines\n        var canPrependSpaces = !collapseSpaces;\n        // There is letterSpacing after every char except the last one\n        // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!\n        // so for convenience the above needs to be compared to width + 1 extra letterSpace\n        // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!_\n        // ________________________________________________\n        // And then the final space is simply no appended to each line\n        var wordWrapWidth = style.wordWrapWidth + letterSpacing;\n        // break text into words, spaces and newline chars\n        var tokens = TextMetrics.tokenize(text);\n        for (var i = 0; i < tokens.length; i++) {\n            // get the word, space or newlineChar\n            var token = tokens[i];\n            // if word is a new line\n            if (TextMetrics.isNewline(token)) {\n                // keep the new line\n                if (!collapseNewlines) {\n                    lines += TextMetrics.addLine(line);\n                    canPrependSpaces = !collapseSpaces;\n                    line = '';\n                    width = 0;\n                    continue;\n                }\n                // if we should collapse new lines\n                // we simply convert it into a space\n                token = ' ';\n            }\n            // if we should collapse repeated whitespaces\n            if (collapseSpaces) {\n                // check both this and the last tokens for spaces\n                var currIsBreakingSpace = TextMetrics.isBreakingSpace(token);\n                var lastIsBreakingSpace = TextMetrics.isBreakingSpace(line[line.length - 1]);\n                if (currIsBreakingSpace && lastIsBreakingSpace) {\n                    continue;\n                }\n            }\n            // get word width from cache if possible\n            var tokenWidth = TextMetrics.getFromCache(token, letterSpacing, cache, context);\n            // word is longer than desired bounds\n            if (tokenWidth > wordWrapWidth) {\n                // if we are not already at the beginning of a line\n                if (line !== '') {\n                    // start newlines for overflow words\n                    lines += TextMetrics.addLine(line);\n                    line = '';\n                    width = 0;\n                }\n                // break large word over multiple lines\n                if (TextMetrics.canBreakWords(token, style.breakWords)) {\n                    // break word into characters\n                    var characters = TextMetrics.wordWrapSplit(token);\n                    // loop the characters\n                    for (var j = 0; j < characters.length; j++) {\n                        var char = characters[j];\n                        var k = 1;\n                        // we are not at the end of the token\n                        while (characters[j + k]) {\n                            var nextChar = characters[j + k];\n                            var lastChar = char[char.length - 1];\n                            // should not split chars\n                            if (!TextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                                // combine chars & move forward one\n                                char += nextChar;\n                            }\n                            else {\n                                break;\n                            }\n                            k++;\n                        }\n                        j += char.length - 1;\n                        var characterWidth = TextMetrics.getFromCache(char, letterSpacing, cache, context);\n                        if (characterWidth + width > wordWrapWidth) {\n                            lines += TextMetrics.addLine(line);\n                            canPrependSpaces = false;\n                            line = '';\n                            width = 0;\n                        }\n                        line += char;\n                        width += characterWidth;\n                    }\n                }\n                // run word out of the bounds\n                else {\n                    // if there are words in this line already\n                    // finish that line and start a new one\n                    if (line.length > 0) {\n                        lines += TextMetrics.addLine(line);\n                        line = '';\n                        width = 0;\n                    }\n                    var isLastToken = i === tokens.length - 1;\n                    // give it its own line if it's not the end\n                    lines += TextMetrics.addLine(token, !isLastToken);\n                    canPrependSpaces = false;\n                    line = '';\n                    width = 0;\n                }\n            }\n            // word could fit\n            else {\n                // word won't fit because of existing words\n                // start a new line\n                if (tokenWidth + width > wordWrapWidth) {\n                    // if its a space we don't want it\n                    canPrependSpaces = false;\n                    // add a new line\n                    lines += TextMetrics.addLine(line);\n                    // start a new line\n                    line = '';\n                    width = 0;\n                }\n                // don't add spaces to the beginning of lines\n                if (line.length > 0 || !TextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n                    // add the word to the current line\n                    line += token;\n                    // update width counter\n                    width += tokenWidth;\n                }\n            }\n        }\n        lines += TextMetrics.addLine(line, false);\n        return lines;\n    };\n    /**\n     * Convienience function for logging each line added during the wordWrap method.\n     * @param line    - The line of text to add\n     * @param newLine - Add new line character to end\n     * @returns A formatted line\n     */\n    TextMetrics.addLine = function (line, newLine) {\n        if (newLine === void 0) { newLine = true; }\n        line = TextMetrics.trimRight(line);\n        line = (newLine) ? line + \"\\n\" : line;\n        return line;\n    };\n    /**\n     * Gets & sets the widths of calculated characters in a cache object\n     * @param key            - The key\n     * @param letterSpacing  - The letter spacing\n     * @param cache          - The cache\n     * @param context        - The canvas context\n     * @returns The from cache.\n     */\n    TextMetrics.getFromCache = function (key, letterSpacing, cache, context) {\n        var width = cache[key];\n        if (typeof width !== 'number') {\n            var spacing = ((key.length) * letterSpacing);\n            width = context.measureText(key).width + spacing;\n            cache[key] = width;\n        }\n        return width;\n    };\n    /**\n     * Determines whether we should collapse breaking spaces.\n     * @param whiteSpace - The TextStyle property whiteSpace\n     * @returns Should collapse\n     */\n    TextMetrics.collapseSpaces = function (whiteSpace) {\n        return (whiteSpace === 'normal' || whiteSpace === 'pre-line');\n    };\n    /**\n     * Determines whether we should collapse newLine chars.\n     * @param whiteSpace - The white space\n     * @returns  should collapse\n     */\n    TextMetrics.collapseNewlines = function (whiteSpace) {\n        return (whiteSpace === 'normal');\n    };\n    /**\n     * Trims breaking whitespaces from string.\n     * @param  text - The text\n     * @returns Trimmed string\n     */\n    TextMetrics.trimRight = function (text) {\n        if (typeof text !== 'string') {\n            return '';\n        }\n        for (var i = text.length - 1; i >= 0; i--) {\n            var char = text[i];\n            if (!TextMetrics.isBreakingSpace(char)) {\n                break;\n            }\n            text = text.slice(0, -1);\n        }\n        return text;\n    };\n    /**\n     * Determines if char is a newline.\n     * @param  char - The character\n     * @returns True if newline, False otherwise.\n     */\n    TextMetrics.isNewline = function (char) {\n        if (typeof char !== 'string') {\n            return false;\n        }\n        return (TextMetrics._newlines.indexOf(char.charCodeAt(0)) >= 0);\n    };\n    /**\n     * Determines if char is a breaking whitespace.\n     *\n     * It allows one to determine whether char should be a breaking whitespace\n     * For example certain characters in CJK langs or numbers.\n     * It must return a boolean.\n     * @param char - The character\n     * @param [_nextChar] - The next character\n     * @returns True if whitespace, False otherwise.\n     */\n    TextMetrics.isBreakingSpace = function (char, _nextChar) {\n        if (typeof char !== 'string') {\n            return false;\n        }\n        return (TextMetrics._breakingSpaces.indexOf(char.charCodeAt(0)) >= 0);\n    };\n    /**\n     * Splits a string into words, breaking-spaces and newLine characters\n     * @param  text - The text\n     * @returns  A tokenized array\n     */\n    TextMetrics.tokenize = function (text) {\n        var tokens = [];\n        var token = '';\n        if (typeof text !== 'string') {\n            return tokens;\n        }\n        for (var i = 0; i < text.length; i++) {\n            var char = text[i];\n            var nextChar = text[i + 1];\n            if (TextMetrics.isBreakingSpace(char, nextChar) || TextMetrics.isNewline(char)) {\n                if (token !== '') {\n                    tokens.push(token);\n                    token = '';\n                }\n                tokens.push(char);\n                continue;\n            }\n            token += char;\n        }\n        if (token !== '') {\n            tokens.push(token);\n        }\n        return tokens;\n    };\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It allows one to customise which words should break\n     * Examples are if the token is CJK or numbers.\n     * It must return a boolean.\n     * @param _token - The token\n     * @param  breakWords - The style attr break words\n     * @returns Whether to break word or not\n     */\n    TextMetrics.canBreakWords = function (_token, breakWords) {\n        return breakWords;\n    };\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It allows one to determine whether a pair of characters\n     * should be broken by newlines\n     * For example certain characters in CJK langs or numbers.\n     * It must return a boolean.\n     * @param _char - The character\n     * @param _nextChar - The next character\n     * @param _token - The token/word the characters are from\n     * @param _index - The index in the token of the char\n     * @param _breakWords - The style attr break words\n     * @returns whether to break word or not\n     */\n    TextMetrics.canBreakChars = function (_char, _nextChar, _token, _index, _breakWords) {\n        return true;\n    };\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It is called when a token (usually a word) has to be split into separate pieces\n     * in order to determine the point to break a word.\n     * It must return an array of characters.\n     * @example\n     * // Correctly splits emojis, eg \"\" will result in two element array, each with one emoji.\n     * TextMetrics.wordWrapSplit = (token) => [...token];\n     * @param  token - The token to split\n     * @returns The characters of the token\n     */\n    TextMetrics.wordWrapSplit = function (token) {\n        return token.split('');\n    };\n    /**\n     * Calculates the ascent, descent and fontSize of a given font-style\n     * @param font - String representing the style of the font\n     * @returns Font properties object\n     */\n    TextMetrics.measureFont = function (font) {\n        // as this method is used for preparing assets, don't recalculate things if we don't need to\n        if (TextMetrics._fonts[font]) {\n            return TextMetrics._fonts[font];\n        }\n        var properties = {\n            ascent: 0,\n            descent: 0,\n            fontSize: 0,\n        };\n        var canvas = TextMetrics._canvas;\n        var context = TextMetrics._context;\n        context.font = font;\n        var metricsString = TextMetrics.METRICS_STRING + TextMetrics.BASELINE_SYMBOL;\n        var width = Math.ceil(context.measureText(metricsString).width);\n        var baseline = Math.ceil(context.measureText(TextMetrics.BASELINE_SYMBOL).width);\n        var height = Math.ceil(TextMetrics.HEIGHT_MULTIPLIER * baseline);\n        baseline = baseline * TextMetrics.BASELINE_MULTIPLIER | 0;\n        canvas.width = width;\n        canvas.height = height;\n        context.fillStyle = '#f00';\n        context.fillRect(0, 0, width, height);\n        context.font = font;\n        context.textBaseline = 'alphabetic';\n        context.fillStyle = '#000';\n        context.fillText(metricsString, 0, baseline);\n        var imagedata = context.getImageData(0, 0, width, height).data;\n        var pixels = imagedata.length;\n        var line = width * 4;\n        var i = 0;\n        var idx = 0;\n        var stop = false;\n        // ascent. scan from top to bottom until we find a non red pixel\n        for (i = 0; i < baseline; ++i) {\n            for (var j = 0; j < line; j += 4) {\n                if (imagedata[idx + j] !== 255) {\n                    stop = true;\n                    break;\n                }\n            }\n            if (!stop) {\n                idx += line;\n            }\n            else {\n                break;\n            }\n        }\n        properties.ascent = baseline - i;\n        idx = pixels - line;\n        stop = false;\n        // descent. scan from bottom to top until we find a non red pixel\n        for (i = height; i > baseline; --i) {\n            for (var j = 0; j < line; j += 4) {\n                if (imagedata[idx + j] !== 255) {\n                    stop = true;\n                    break;\n                }\n            }\n            if (!stop) {\n                idx -= line;\n            }\n            else {\n                break;\n            }\n        }\n        properties.descent = i - baseline;\n        properties.fontSize = properties.ascent + properties.descent;\n        TextMetrics._fonts[font] = properties;\n        return properties;\n    };\n    /**\n     * Clear font metrics in metrics cache.\n     * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n     */\n    TextMetrics.clearMetrics = function (font) {\n        if (font === void 0) { font = ''; }\n        if (font) {\n            delete TextMetrics._fonts[font];\n        }\n        else {\n            TextMetrics._fonts = {};\n        }\n    };\n    Object.defineProperty(TextMetrics, \"_canvas\", {\n        /**\n         * Cached canvas element for measuring text\n         * TODO: this should be private, but isn't because of backward compat, will fix later.\n         * @ignore\n         */\n        get: function () {\n            if (!TextMetrics.__canvas) {\n                var canvas = void 0;\n                try {\n                    // OffscreenCanvas2D measureText can be up to 40% faster.\n                    var c = new OffscreenCanvas(0, 0);\n                    var context = c.getContext('2d');\n                    if (context && context.measureText) {\n                        TextMetrics.__canvas = c;\n                        return c;\n                    }\n                    canvas = document.createElement('canvas');\n                }\n                catch (ex) {\n                    canvas = document.createElement('canvas');\n                }\n                canvas.width = canvas.height = 10;\n                TextMetrics.__canvas = canvas;\n            }\n            return TextMetrics.__canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextMetrics, \"_context\", {\n        /**\n         * TODO: this should be private, but isn't because of backward compat, will fix later.\n         * @ignore\n         */\n        get: function () {\n            if (!TextMetrics.__context) {\n                TextMetrics.__context = TextMetrics._canvas.getContext('2d');\n            }\n            return TextMetrics.__context;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return TextMetrics;\n}());\n/**\n * Internal return object for {@link PIXI.TextMetrics.measureFont `TextMetrics.measureFont`}.\n * @typedef {object} FontMetrics\n * @property {number} ascent - The ascent distance\n * @property {number} descent - The descent distance\n * @property {number} fontSize - Font size from ascent to descent\n * @memberof PIXI.TextMetrics\n * @private\n */\n/**\n * Cache of {@see PIXI.TextMetrics.FontMetrics} objects.\n * @memberof PIXI.TextMetrics\n * @type {object}\n * @private\n */\nTextMetrics._fonts = {};\n/**\n * String used for calculate font metrics.\n * These characters are all tall to help calculate the height required for text.\n * @static\n * @memberof PIXI.TextMetrics\n * @name METRICS_STRING\n * @type {string}\n * @default |q\n */\nTextMetrics.METRICS_STRING = '|q';\n/**\n * Baseline symbol for calculate font metrics.\n * @static\n * @memberof PIXI.TextMetrics\n * @name BASELINE_SYMBOL\n * @type {string}\n * @default M\n */\nTextMetrics.BASELINE_SYMBOL = 'M';\n/**\n * Baseline multiplier for calculate font metrics.\n * @static\n * @memberof PIXI.TextMetrics\n * @name BASELINE_MULTIPLIER\n * @type {number}\n * @default 1.4\n */\nTextMetrics.BASELINE_MULTIPLIER = 1.4;\n/**\n * Height multiplier for setting height of canvas to calculate font metrics.\n * @static\n * @memberof PIXI.TextMetrics\n * @name HEIGHT_MULTIPLIER\n * @type {number}\n * @default 2.00\n */\nTextMetrics.HEIGHT_MULTIPLIER = 2.0;\n/**\n * Cache of new line chars.\n * @memberof PIXI.TextMetrics\n * @type {number[]}\n * @private\n */\nTextMetrics._newlines = [\n    0x000A,\n    0x000D ];\n/**\n * Cache of breaking spaces.\n * @memberof PIXI.TextMetrics\n * @type {number[]}\n * @private\n */\nTextMetrics._breakingSpaces = [\n    0x0009,\n    0x0020,\n    0x2000,\n    0x2001,\n    0x2002,\n    0x2003,\n    0x2004,\n    0x2005,\n    0x2006,\n    0x2008,\n    0x2009,\n    0x200A,\n    0x205F,\n    0x3000 ];\n/**\n * A number, or a string containing a number.\n * @memberof PIXI\n * @typedef {object} IFontMetrics\n * @property {number} ascent - Font ascent\n * @property {number} descent - Font descent\n * @property {number} fontSize - Font size\n */\n\nvar defaultDestroyOptions = {\n    texture: true,\n    children: false,\n    baseTexture: true,\n};\n/**\n * A Text Object will create a line or multiple lines of text.\n *\n * The text is created using the [Canvas API](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API).\n *\n * The primary advantage of this class over BitmapText is that you have great control over the style of the text,\n * which you can change at runtime.\n *\n * The primary disadvantages is that each piece of text has it's own texture, which can use more memory.\n * When text changes, this texture has to be re-generated and re-uploaded to the GPU, taking up time.\n *\n * To split a line you can use '\\n' in your text string, or, on the `style` object,\n * change its `wordWrap` property to true and and give the `wordWrapWidth` property a value.\n *\n * A Text can be created directly from a string and a style object,\n * which can be generated [here](https://pixijs.io/pixi-text-style).\n *\n * ```js\n * let text = new PIXI.Text('This is a PixiJS text',{fontFamily : 'Arial', fontSize: 24, fill : 0xff1010, align : 'center'});\n * ```\n * @memberof PIXI\n */\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    /**\n     * @param text - The string that you would like the text to display\n     * @param {object|PIXI.TextStyle} [style] - The style parameters\n     * @param canvas - The canvas element for drawing text\n     */\n    function Text(text, style, canvas) {\n        var _this = this;\n        var ownCanvas = false;\n        if (!canvas) {\n            canvas = document.createElement('canvas');\n            ownCanvas = true;\n        }\n        canvas.width = 3;\n        canvas.height = 3;\n        var texture = Texture.from(canvas);\n        texture.orig = new Rectangle();\n        texture.trim = new Rectangle();\n        _this = _super.call(this, texture) || this;\n        _this._ownCanvas = ownCanvas;\n        _this.canvas = canvas;\n        _this.context = _this.canvas.getContext('2d');\n        _this._resolution = settings.RESOLUTION;\n        _this._autoResolution = true;\n        _this._text = null;\n        _this._style = null;\n        _this._styleListener = null;\n        _this._font = '';\n        _this.text = text;\n        _this.style = style;\n        _this.localStyleID = -1;\n        return _this;\n    }\n    /**\n     * Renders text to its canvas, and updates its texture.\n     *\n     * By default this is used internally to ensure the texture is correct before rendering,\n     * but it can be used called externally, for example from this class to 'pre-generate' the texture from a piece of text,\n     * and then shared across multiple Sprites.\n     * @param respectDirty - Whether to abort updating the text if the Text isn't dirty and the function is called.\n     */\n    Text.prototype.updateText = function (respectDirty) {\n        var style = this._style;\n        // check if style has changed..\n        if (this.localStyleID !== style.styleID) {\n            this.dirty = true;\n            this.localStyleID = style.styleID;\n        }\n        if (!this.dirty && respectDirty) {\n            return;\n        }\n        this._font = this._style.toFontString();\n        var context = this.context;\n        var measured = TextMetrics.measureText(this._text || ' ', this._style, this._style.wordWrap, this.canvas);\n        var width = measured.width;\n        var height = measured.height;\n        var lines = measured.lines;\n        var lineHeight = measured.lineHeight;\n        var lineWidths = measured.lineWidths;\n        var maxLineWidth = measured.maxLineWidth;\n        var fontProperties = measured.fontProperties;\n        this.canvas.width = Math.ceil(Math.ceil((Math.max(1, width) + (style.padding * 2))) * this._resolution);\n        this.canvas.height = Math.ceil(Math.ceil((Math.max(1, height) + (style.padding * 2))) * this._resolution);\n        context.scale(this._resolution, this._resolution);\n        context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        context.font = this._font;\n        context.lineWidth = style.strokeThickness;\n        context.textBaseline = style.textBaseline;\n        context.lineJoin = style.lineJoin;\n        context.miterLimit = style.miterLimit;\n        var linePositionX;\n        var linePositionY;\n        // require 2 passes if a shadow; the first to draw the drop shadow, the second to draw the text\n        var passesCount = style.dropShadow ? 2 : 1;\n        // For v4, we drew text at the colours of the drop shadow underneath the normal text. This gave the correct zIndex,\n        // but features such as alpha and shadowblur did not look right at all, since we were using actual text as a shadow.\n        //\n        // For v5.0.0, we moved over to just use the canvas API for drop shadows, which made them look much nicer and more\n        // visually please, but now because the stroke is drawn and then the fill, drop shadows would appear on both the fill\n        // and the stroke; and fill drop shadows would appear over the top of the stroke.\n        //\n        // For v5.1.1, the new route is to revert to v4 style of drawing text first to get the drop shadows underneath normal\n        // text, but instead drawing text in the correct location, we'll draw it off screen (-paddingY), and then adjust the\n        // drop shadow so only that appears on screen (+paddingY). Now we'll have the correct draw order of the shadow\n        // beneath the text, whilst also having the proper text shadow styling.\n        for (var i = 0; i < passesCount; ++i) {\n            var isShadowPass = style.dropShadow && i === 0;\n            // we only want the drop shadow, so put text way off-screen\n            var dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + (style.padding * 2)) : 0;\n            var dsOffsetShadow = dsOffsetText * this._resolution;\n            if (isShadowPass) {\n                // On Safari, text with gradient and drop shadows together do not position correctly\n                // if the scale of the canvas is not 1: https://bugs.webkit.org/show_bug.cgi?id=197689\n                // Therefore we'll set the styles to be a plain black whilst generating this drop shadow\n                context.fillStyle = 'black';\n                context.strokeStyle = 'black';\n                var dropShadowColor = style.dropShadowColor;\n                var rgb = hex2rgb(typeof dropShadowColor === 'number' ? dropShadowColor : string2hex(dropShadowColor));\n                var dropShadowBlur = style.dropShadowBlur * this._resolution;\n                var dropShadowDistance = style.dropShadowDistance * this._resolution;\n                context.shadowColor = \"rgba(\" + rgb[0] * 255 + \",\" + rgb[1] * 255 + \",\" + rgb[2] * 255 + \",\" + style.dropShadowAlpha + \")\";\n                context.shadowBlur = dropShadowBlur;\n                context.shadowOffsetX = Math.cos(style.dropShadowAngle) * dropShadowDistance;\n                context.shadowOffsetY = (Math.sin(style.dropShadowAngle) * dropShadowDistance) + dsOffsetShadow;\n            }\n            else {\n                // set canvas text styles\n                context.fillStyle = this._generateFillStyle(style, lines, measured);\n                // TODO: Can't have different types for getter and setter. The getter shouldn't have the number type as\n                //       the setter converts to string. See this thread for more details:\n                //       https://github.com/microsoft/TypeScript/issues/2521\n                context.strokeStyle = style.stroke;\n                context.shadowColor = 'black';\n                context.shadowBlur = 0;\n                context.shadowOffsetX = 0;\n                context.shadowOffsetY = 0;\n            }\n            var linePositionYShift = (lineHeight - fontProperties.fontSize) / 2;\n            if (!Text.nextLineHeightBehavior || lineHeight - fontProperties.fontSize < 0) {\n                linePositionYShift = 0;\n            }\n            // draw lines line by line\n            for (var i_1 = 0; i_1 < lines.length; i_1++) {\n                linePositionX = style.strokeThickness / 2;\n                linePositionY = ((style.strokeThickness / 2) + (i_1 * lineHeight)) + fontProperties.ascent\n                    + linePositionYShift;\n                if (style.align === 'right') {\n                    linePositionX += maxLineWidth - lineWidths[i_1];\n                }\n                else if (style.align === 'center') {\n                    linePositionX += (maxLineWidth - lineWidths[i_1]) / 2;\n                }\n                if (style.stroke && style.strokeThickness) {\n                    this.drawLetterSpacing(lines[i_1], linePositionX + style.padding, linePositionY + style.padding - dsOffsetText, true);\n                }\n                if (style.fill) {\n                    this.drawLetterSpacing(lines[i_1], linePositionX + style.padding, linePositionY + style.padding - dsOffsetText);\n                }\n            }\n        }\n        this.updateTexture();\n    };\n    /**\n     * Render the text with letter-spacing.\n     * @param text - The text to draw\n     * @param x - Horizontal position to draw the text\n     * @param y - Vertical position to draw the text\n     * @param isStroke - Is this drawing for the outside stroke of the\n     *  text? If not, it's for the inside fill\n     */\n    Text.prototype.drawLetterSpacing = function (text, x, y, isStroke) {\n        if (isStroke === void 0) { isStroke = false; }\n        var style = this._style;\n        // letterSpacing of 0 means normal\n        var letterSpacing = style.letterSpacing;\n        // Checking that we can use moddern canvas2D api\n        // https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n        // note: this is unstable API, Chrome less 94 use a `textLetterSpacing`, newest use a letterSpacing\n        // eslint-disable-next-line max-len\n        var supportLetterSpacing = Text.experimentalLetterSpacing\n            && ('letterSpacing' in CanvasRenderingContext2D.prototype\n                || 'textLetterSpacing' in CanvasRenderingContext2D.prototype);\n        if (letterSpacing === 0 || supportLetterSpacing) {\n            if (supportLetterSpacing) {\n                this.context.letterSpacing = letterSpacing;\n                this.context.textLetterSpacing = letterSpacing;\n            }\n            if (isStroke) {\n                this.context.strokeText(text, x, y);\n            }\n            else {\n                this.context.fillText(text, x, y);\n            }\n            return;\n        }\n        var currentPosition = x;\n        // Using Array.from correctly splits characters whilst keeping emoji together.\n        // This is not supported on IE as it requires ES6, so regular text splitting occurs.\n        // This also doesn't account for emoji that are multiple emoji put together to make something else.\n        // Handling all of this would require a big library itself.\n        // https://medium.com/@giltayar/iterating-over-emoji-characters-the-es6-way-f06e4589516\n        // https://github.com/orling/grapheme-splitter\n        var stringArray = Array.from ? Array.from(text) : text.split('');\n        var previousWidth = this.context.measureText(text).width;\n        var currentWidth = 0;\n        for (var i = 0; i < stringArray.length; ++i) {\n            var currentChar = stringArray[i];\n            if (isStroke) {\n                this.context.strokeText(currentChar, currentPosition, y);\n            }\n            else {\n                this.context.fillText(currentChar, currentPosition, y);\n            }\n            var textStr = '';\n            for (var j = i + 1; j < stringArray.length; ++j) {\n                textStr += stringArray[j];\n            }\n            currentWidth = this.context.measureText(textStr).width;\n            currentPosition += previousWidth - currentWidth + letterSpacing;\n            previousWidth = currentWidth;\n        }\n    };\n    /** Updates texture size based on canvas size. */\n    Text.prototype.updateTexture = function () {\n        var canvas = this.canvas;\n        if (this._style.trim) {\n            var trimmed = trimCanvas(canvas);\n            if (trimmed.data) {\n                canvas.width = trimmed.width;\n                canvas.height = trimmed.height;\n                this.context.putImageData(trimmed.data, 0, 0);\n            }\n        }\n        var texture = this._texture;\n        var style = this._style;\n        var padding = style.trim ? 0 : style.padding;\n        var baseTexture = texture.baseTexture;\n        texture.trim.width = texture._frame.width = canvas.width / this._resolution;\n        texture.trim.height = texture._frame.height = canvas.height / this._resolution;\n        texture.trim.x = -padding;\n        texture.trim.y = -padding;\n        texture.orig.width = texture._frame.width - (padding * 2);\n        texture.orig.height = texture._frame.height - (padding * 2);\n        // call sprite onTextureUpdate to update scale if _width or _height were set\n        this._onTextureUpdate();\n        baseTexture.setRealSize(canvas.width, canvas.height, this._resolution);\n        texture.updateUvs();\n        this.dirty = false;\n    };\n    /**\n     * Renders the object using the WebGL renderer\n     * @param renderer - The renderer\n     */\n    Text.prototype._render = function (renderer) {\n        if (this._autoResolution && this._resolution !== renderer.resolution) {\n            this._resolution = renderer.resolution;\n            this.dirty = true;\n        }\n        this.updateText(true);\n        _super.prototype._render.call(this, renderer);\n    };\n    /** Updates the transform on all children of this container for rendering. */\n    Text.prototype.updateTransform = function () {\n        this.updateText(true);\n        _super.prototype.updateTransform.call(this);\n    };\n    Text.prototype.getBounds = function (skipUpdate, rect) {\n        this.updateText(true);\n        if (this._textureID === -1) {\n            // texture was updated: recalculate transforms\n            skipUpdate = false;\n        }\n        return _super.prototype.getBounds.call(this, skipUpdate, rect);\n    };\n    /**\n     * Gets the local bounds of the text object.\n     * @param rect - The output rectangle.\n     * @returns The bounds.\n     */\n    Text.prototype.getLocalBounds = function (rect) {\n        this.updateText(true);\n        return _super.prototype.getLocalBounds.call(this, rect);\n    };\n    /** Calculates the bounds of the Text as a rectangle. The bounds calculation takes the worldTransform into account. */\n    Text.prototype._calculateBounds = function () {\n        this.calculateVertices();\n        // if we have already done this on THIS frame.\n        this._bounds.addQuad(this.vertexData);\n    };\n    /**\n     * Generates the fill style. Can automatically generate a gradient based on the fill style being an array\n     * @param style - The style.\n     * @param lines - The lines of text.\n     * @param metrics\n     * @returns The fill style\n     */\n    Text.prototype._generateFillStyle = function (style, lines, metrics) {\n        // TODO: Can't have different types for getter and setter. The getter shouldn't have the number type as\n        //       the setter converts to string. See this thread for more details:\n        //       https://github.com/microsoft/TypeScript/issues/2521\n        var fillStyle = style.fill;\n        if (!Array.isArray(fillStyle)) {\n            return fillStyle;\n        }\n        else if (fillStyle.length === 1) {\n            return fillStyle[0];\n        }\n        // the gradient will be evenly spaced out according to how large the array is.\n        // ['#FF0000', '#00FF00', '#0000FF'] would created stops at 0.25, 0.5 and 0.75\n        var gradient;\n        // a dropshadow will enlarge the canvas and result in the gradient being\n        // generated with the incorrect dimensions\n        var dropShadowCorrection = (style.dropShadow) ? style.dropShadowDistance : 0;\n        // should also take padding into account, padding can offset the gradient\n        var padding = style.padding || 0;\n        var width = (this.canvas.width / this._resolution) - dropShadowCorrection - (padding * 2);\n        var height = (this.canvas.height / this._resolution) - dropShadowCorrection - (padding * 2);\n        // make a copy of the style settings, so we can manipulate them later\n        var fill = fillStyle.slice();\n        var fillGradientStops = style.fillGradientStops.slice();\n        // wanting to evenly distribute the fills. So an array of 4 colours should give fills of 0.25, 0.5 and 0.75\n        if (!fillGradientStops.length) {\n            var lengthPlus1 = fill.length + 1;\n            for (var i = 1; i < lengthPlus1; ++i) {\n                fillGradientStops.push(i / lengthPlus1);\n            }\n        }\n        // stop the bleeding of the last gradient on the line above to the top gradient of the this line\n        // by hard defining the first gradient colour at point 0, and last gradient colour at point 1\n        fill.unshift(fillStyle[0]);\n        fillGradientStops.unshift(0);\n        fill.push(fillStyle[fillStyle.length - 1]);\n        fillGradientStops.push(1);\n        if (style.fillGradientType === TEXT_GRADIENT.LINEAR_VERTICAL) {\n            // start the gradient at the top center of the canvas, and end at the bottom middle of the canvas\n            gradient = this.context.createLinearGradient(width / 2, padding, width / 2, height + padding);\n            // we need to repeat the gradient so that each individual line of text has the same vertical gradient effect\n            // ['#FF0000', '#00FF00', '#0000FF'] over 2 lines would create stops at 0.125, 0.25, 0.375, 0.625, 0.75, 0.875\n            // Actual height of the text itself, not counting spacing for lineHeight/leading/dropShadow etc\n            var textHeight = metrics.fontProperties.fontSize + style.strokeThickness;\n            for (var i = 0; i < lines.length; i++) {\n                var lastLineBottom = (metrics.lineHeight * (i - 1)) + textHeight;\n                var thisLineTop = metrics.lineHeight * i;\n                var thisLineGradientStart = thisLineTop;\n                // Handle case where last & this line overlap\n                if (i > 0 && lastLineBottom > thisLineTop) {\n                    thisLineGradientStart = (thisLineTop + lastLineBottom) / 2;\n                }\n                var thisLineBottom = thisLineTop + textHeight;\n                var nextLineTop = metrics.lineHeight * (i + 1);\n                var thisLineGradientEnd = thisLineBottom;\n                // Handle case where this & next line overlap\n                if (i + 1 < lines.length && nextLineTop < thisLineBottom) {\n                    thisLineGradientEnd = (thisLineBottom + nextLineTop) / 2;\n                }\n                // textHeight, but as a 0-1 size in global gradient stop space\n                var gradStopLineHeight = (thisLineGradientEnd - thisLineGradientStart) / height;\n                for (var j = 0; j < fill.length; j++) {\n                    // 0-1 stop point for the current line, multiplied to global space afterwards\n                    var lineStop = 0;\n                    if (typeof fillGradientStops[j] === 'number') {\n                        lineStop = fillGradientStops[j];\n                    }\n                    else {\n                        lineStop = j / fill.length;\n                    }\n                    var globalStop = Math.min(1, Math.max(0, (thisLineGradientStart / height) + (lineStop * gradStopLineHeight)));\n                    // There's potential for floating point precision issues at the seams between gradient repeats.\n                    globalStop = Number(globalStop.toFixed(5));\n                    gradient.addColorStop(globalStop, fill[j]);\n                }\n            }\n        }\n        else {\n            // start the gradient at the center left of the canvas, and end at the center right of the canvas\n            gradient = this.context.createLinearGradient(padding, height / 2, width + padding, height / 2);\n            // can just evenly space out the gradients in this case, as multiple lines makes no difference\n            // to an even left to right gradient\n            var totalIterations = fill.length + 1;\n            var currentIteration = 1;\n            for (var i = 0; i < fill.length; i++) {\n                var stop = void 0;\n                if (typeof fillGradientStops[i] === 'number') {\n                    stop = fillGradientStops[i];\n                }\n                else {\n                    stop = currentIteration / totalIterations;\n                }\n                gradient.addColorStop(stop, fill[i]);\n                currentIteration++;\n            }\n        }\n        return gradient;\n    };\n    /**\n     * Destroys this text object.\n     *\n     * Note* Unlike a Sprite, a Text object will automatically destroy its baseTexture and texture as\n     * the majority of the time the texture will not be shared with any other Sprites.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.children=false] - if set to true, all the children will have their\n     *  destroy method called as well. 'options' will be passed on to those calls.\n     * @param {boolean} [options.texture=true] - Should it destroy the current texture of the sprite as well\n     * @param {boolean} [options.baseTexture=true] - Should it destroy the base texture of the sprite as well\n     */\n    Text.prototype.destroy = function (options) {\n        if (typeof options === 'boolean') {\n            options = { children: options };\n        }\n        options = Object.assign({}, defaultDestroyOptions, options);\n        _super.prototype.destroy.call(this, options);\n        // set canvas width and height to 0 to workaround memory leak in Safari < 13\n        // https://stackoverflow.com/questions/52532614/total-canvas-memory-use-exceeds-the-maximum-limit-safari-12\n        if (this._ownCanvas) {\n            this.canvas.height = this.canvas.width = 0;\n        }\n        // make sure to reset the context and canvas.. dont want this hanging around in memory!\n        this.context = null;\n        this.canvas = null;\n        this._style = null;\n    };\n    Object.defineProperty(Text.prototype, \"width\", {\n        /** The width of the Text, setting this will actually modify the scale to achieve the value set. */\n        get: function () {\n            this.updateText(true);\n            return Math.abs(this.scale.x) * this._texture.orig.width;\n        },\n        set: function (value) {\n            this.updateText(true);\n            var s = sign(this.scale.x) || 1;\n            this.scale.x = s * value / this._texture.orig.width;\n            this._width = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"height\", {\n        /** The height of the Text, setting this will actually modify the scale to achieve the value set. */\n        get: function () {\n            this.updateText(true);\n            return Math.abs(this.scale.y) * this._texture.orig.height;\n        },\n        set: function (value) {\n            this.updateText(true);\n            var s = sign(this.scale.y) || 1;\n            this.scale.y = s * value / this._texture.orig.height;\n            this._height = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"style\", {\n        /**\n         * Set the style of the text.\n         *\n         * Set up an event listener to listen for changes on the style object and mark the text as dirty.\n         */\n        get: function () {\n            // TODO: Can't have different types for getter and setter. The getter shouldn't have the ITextStyle\n            //       since the setter creates the TextStyle. See this thread for more details:\n            //       https://github.com/microsoft/TypeScript/issues/2521\n            return this._style;\n        },\n        set: function (style) {\n            style = style || {};\n            if (style instanceof TextStyle) {\n                this._style = style;\n            }\n            else {\n                this._style = new TextStyle(style);\n            }\n            this.localStyleID = -1;\n            this.dirty = true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"text\", {\n        /** Set the copy for the text object. To split a line you can use '\\n'. */\n        get: function () {\n            return this._text;\n        },\n        set: function (text) {\n            text = String(text === null || text === undefined ? '' : text);\n            if (this._text === text) {\n                return;\n            }\n            this._text = text;\n            this.dirty = true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"resolution\", {\n        /**\n         * The resolution / device pixel ratio of the canvas.\n         *\n         * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.\n         * @default 1\n         */\n        get: function () {\n            return this._resolution;\n        },\n        set: function (value) {\n            this._autoResolution = false;\n            if (this._resolution === value) {\n                return;\n            }\n            this._resolution = value;\n            this.dirty = true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * New behavior for `lineHeight` that's meant to mimic HTML text. A value of `true` will\n     * make sure the first baseline is offset by the `lineHeight` value if it is greater than `fontSize`.\n     * A value of `false` will use the legacy behavior and not change the baseline of the first line.\n     * In the next major release, we'll enable this by default.\n     */\n    Text.nextLineHeightBehavior = false;\n    /**\n     * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n     * lead to more accurate letter-spacing results because it does not try to manually draw\n     * each character. However, this Chrome API is experimental and may not serve all cases yet.\n     */\n    Text.experimentalLetterSpacing = false;\n    return Text;\n}(Sprite));\n\nexport { TEXT_GRADIENT, Text, TextMetrics, TextStyle };\n//# sourceMappingURL=text.js.map\n","/*!\n * @pixi/prepare - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/prepare is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { settings } from '@pixi/settings';\nimport { Texture, BaseTexture } from '@pixi/core';\nimport { Graphics } from '@pixi/graphics';\nimport { Ticker, UPDATE_PRIORITY } from '@pixi/ticker';\nimport { Container } from '@pixi/display';\nimport { Text, TextStyle, TextMetrics } from '@pixi/text';\n\n/**\n * Default number of uploads per frame using prepare plugin.\n * @static\n * @memberof PIXI.settings\n * @name UPLOADS_PER_FRAME\n * @type {number}\n * @default 4\n */\nsettings.UPLOADS_PER_FRAME = 4;\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) { if (b.hasOwnProperty(p)) { d[p] = b[p]; } } };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/**\n * CountLimiter limits the number of items handled by a {@link PIXI.BasePrepare} to a specified\n * number of items per frame.\n * @memberof PIXI\n */\nvar CountLimiter = /** @class */ (function () {\n    /**\n     * @param maxItemsPerFrame - The maximum number of items that can be prepared each frame.\n     */\n    function CountLimiter(maxItemsPerFrame) {\n        this.maxItemsPerFrame = maxItemsPerFrame;\n        this.itemsLeft = 0;\n    }\n    /** Resets any counting properties to start fresh on a new frame. */\n    CountLimiter.prototype.beginFrame = function () {\n        this.itemsLeft = this.maxItemsPerFrame;\n    };\n    /**\n     * Checks to see if another item can be uploaded. This should only be called once per item.\n     * @returns If the item is allowed to be uploaded.\n     */\n    CountLimiter.prototype.allowedToUpload = function () {\n        return this.itemsLeft-- > 0;\n    };\n    return CountLimiter;\n}());\n\n/**\n * Built-in hook to find multiple textures from objects like AnimatedSprites.\n * @private\n * @param item - Display object to check\n * @param queue - Collection of items to upload\n * @returns If a PIXI.Texture object was found.\n */\nfunction findMultipleBaseTextures(item, queue) {\n    var result = false;\n    // Objects with multiple textures\n    if (item && item._textures && item._textures.length) {\n        for (var i = 0; i < item._textures.length; i++) {\n            if (item._textures[i] instanceof Texture) {\n                var baseTexture = item._textures[i].baseTexture;\n                if (queue.indexOf(baseTexture) === -1) {\n                    queue.push(baseTexture);\n                    result = true;\n                }\n            }\n        }\n    }\n    return result;\n}\n/**\n * Built-in hook to find BaseTextures from Texture.\n * @private\n * @param item - Display object to check\n * @param queue - Collection of items to upload\n * @returns If a PIXI.Texture object was found.\n */\nfunction findBaseTexture(item, queue) {\n    if (item.baseTexture instanceof BaseTexture) {\n        var texture = item.baseTexture;\n        if (queue.indexOf(texture) === -1) {\n            queue.push(texture);\n        }\n        return true;\n    }\n    return false;\n}\n/**\n * Built-in hook to find textures from objects.\n * @private\n * @param item - Display object to check\n * @param queue - Collection of items to upload\n * @returns If a PIXI.Texture object was found.\n */\nfunction findTexture(item, queue) {\n    if (item._texture && item._texture instanceof Texture) {\n        var texture = item._texture.baseTexture;\n        if (queue.indexOf(texture) === -1) {\n            queue.push(texture);\n        }\n        return true;\n    }\n    return false;\n}\n/**\n * Built-in hook to draw PIXI.Text to its texture.\n * @private\n * @param _helper - Not used by this upload handler\n * @param item - Item to check\n * @returns If item was uploaded.\n */\nfunction drawText(_helper, item) {\n    if (item instanceof Text) {\n        // updating text will return early if it is not dirty\n        item.updateText(true);\n        return true;\n    }\n    return false;\n}\n/**\n * Built-in hook to calculate a text style for a PIXI.Text object.\n * @private\n * @param _helper - Not used by this upload handler\n * @param item - Item to check\n * @returns If item was uploaded.\n */\nfunction calculateTextStyle(_helper, item) {\n    if (item instanceof TextStyle) {\n        var font = item.toFontString();\n        TextMetrics.measureFont(font);\n        return true;\n    }\n    return false;\n}\n/**\n * Built-in hook to find Text objects.\n * @private\n * @param item - Display object to check\n * @param queue - Collection of items to upload\n * @returns if a PIXI.Text object was found.\n */\nfunction findText(item, queue) {\n    if (item instanceof Text) {\n        // push the text style to prepare it - this can be really expensive\n        if (queue.indexOf(item.style) === -1) {\n            queue.push(item.style);\n        }\n        // also push the text object so that we can render it (to canvas/texture) if needed\n        if (queue.indexOf(item) === -1) {\n            queue.push(item);\n        }\n        // also push the Text's texture for upload to GPU\n        var texture = item._texture.baseTexture;\n        if (queue.indexOf(texture) === -1) {\n            queue.push(texture);\n        }\n        return true;\n    }\n    return false;\n}\n/**\n * Built-in hook to find TextStyle objects.\n * @private\n * @param item - Display object to check\n * @param queue - Collection of items to upload\n * @returns If a PIXI.TextStyle object was found.\n */\nfunction findTextStyle(item, queue) {\n    if (item instanceof TextStyle) {\n        if (queue.indexOf(item) === -1) {\n            queue.push(item);\n        }\n        return true;\n    }\n    return false;\n}\n/**\n * The prepare manager provides functionality to upload content to the GPU.\n *\n * BasePrepare handles basic queuing functionality and is extended by\n * {@link PIXI.Prepare} and {@link PIXI.CanvasPrepare}\n * to provide preparation capabilities specific to their respective renderers.\n * @example\n * // Create a sprite\n * const sprite = PIXI.Sprite.from('something.png');\n *\n * // Load object into GPU\n * app.renderer.plugins.prepare.upload(sprite, () => {\n *\n *     //Texture(s) has been uploaded to GPU\n *     app.stage.addChild(sprite);\n *\n * })\n * @abstract\n * @memberof PIXI\n */\nvar BasePrepare = /** @class */ (function () {\n    /**\n     * @param {PIXI.AbstractRenderer} renderer - A reference to the current renderer\n     */\n    function BasePrepare(renderer) {\n        var _this = this;\n        this.limiter = new CountLimiter(settings.UPLOADS_PER_FRAME);\n        this.renderer = renderer;\n        this.uploadHookHelper = null;\n        this.queue = [];\n        this.addHooks = [];\n        this.uploadHooks = [];\n        this.completes = [];\n        this.ticking = false;\n        this.delayedTick = function () {\n            // unlikely, but in case we were destroyed between tick() and delayedTick()\n            if (!_this.queue) {\n                return;\n            }\n            _this.prepareItems();\n        };\n        // hooks to find the correct texture\n        this.registerFindHook(findText);\n        this.registerFindHook(findTextStyle);\n        this.registerFindHook(findMultipleBaseTextures);\n        this.registerFindHook(findBaseTexture);\n        this.registerFindHook(findTexture);\n        // upload hooks\n        this.registerUploadHook(drawText);\n        this.registerUploadHook(calculateTextStyle);\n    }\n    /**\n     * Upload all the textures and graphics to the GPU.\n     * @param {Function|PIXI.DisplayObject|PIXI.Container|PIXI.BaseTexture|PIXI.Texture|PIXI.Graphics|PIXI.Text} item -\n     *        Either the container or display object to search for items to upload, the items to upload themselves,\n     *        or the callback function, if items have been added using `prepare.add`.\n     * @param {Function} [done] - Optional callback when all queued uploads have completed\n     */\n    BasePrepare.prototype.upload = function (item, done) {\n        if (typeof item === 'function') {\n            done = item;\n            item = null;\n        }\n        // If a display object, search for items\n        // that we could upload\n        if (item) {\n            this.add(item);\n        }\n        // Get the items for upload from the display\n        if (this.queue.length) {\n            if (done) {\n                this.completes.push(done);\n            }\n            if (!this.ticking) {\n                this.ticking = true;\n                Ticker.system.addOnce(this.tick, this, UPDATE_PRIORITY.UTILITY);\n            }\n        }\n        else if (done) {\n            done();\n        }\n    };\n    /**\n     * Handle tick update\n     * @private\n     */\n    BasePrepare.prototype.tick = function () {\n        setTimeout(this.delayedTick, 0);\n    };\n    /**\n     * Actually prepare items. This is handled outside of the tick because it will take a while\n     * and we do NOT want to block the current animation frame from rendering.\n     * @private\n     */\n    BasePrepare.prototype.prepareItems = function () {\n        this.limiter.beginFrame();\n        // Upload the graphics\n        while (this.queue.length && this.limiter.allowedToUpload()) {\n            var item = this.queue[0];\n            var uploaded = false;\n            if (item && !item._destroyed) {\n                for (var i = 0, len = this.uploadHooks.length; i < len; i++) {\n                    if (this.uploadHooks[i](this.uploadHookHelper, item)) {\n                        this.queue.shift();\n                        uploaded = true;\n                        break;\n                    }\n                }\n            }\n            if (!uploaded) {\n                this.queue.shift();\n            }\n        }\n        // We're finished\n        if (!this.queue.length) {\n            this.ticking = false;\n            var completes = this.completes.slice(0);\n            this.completes.length = 0;\n            for (var i = 0, len = completes.length; i < len; i++) {\n                completes[i]();\n            }\n        }\n        else {\n            // if we are not finished, on the next rAF do this again\n            Ticker.system.addOnce(this.tick, this, UPDATE_PRIORITY.UTILITY);\n        }\n    };\n    /**\n     * Adds hooks for finding items.\n     * @param {Function} addHook - Function call that takes two parameters: `item:*, queue:Array`\n     *          function must return `true` if it was able to add item to the queue.\n     * @returns Instance of plugin for chaining.\n     */\n    BasePrepare.prototype.registerFindHook = function (addHook) {\n        if (addHook) {\n            this.addHooks.push(addHook);\n        }\n        return this;\n    };\n    /**\n     * Adds hooks for uploading items.\n     * @param {Function} uploadHook - Function call that takes two parameters: `prepare:CanvasPrepare, item:*` and\n     *          function must return `true` if it was able to handle upload of item.\n     * @returns Instance of plugin for chaining.\n     */\n    BasePrepare.prototype.registerUploadHook = function (uploadHook) {\n        if (uploadHook) {\n            this.uploadHooks.push(uploadHook);\n        }\n        return this;\n    };\n    /**\n     * Manually add an item to the uploading queue.\n     * @param {PIXI.DisplayObject|PIXI.Container|PIXI.BaseTexture|PIXI.Texture|PIXI.Graphics|PIXI.Text|*} item - Object to\n     *        add to the queue\n     * @returns Instance of plugin for chaining.\n     */\n    BasePrepare.prototype.add = function (item) {\n        // Add additional hooks for finding elements on special\n        // types of objects that\n        for (var i = 0, len = this.addHooks.length; i < len; i++) {\n            if (this.addHooks[i](item, this.queue)) {\n                break;\n            }\n        }\n        // Get children recursively\n        if (item instanceof Container) {\n            for (var i = item.children.length - 1; i >= 0; i--) {\n                this.add(item.children[i]);\n            }\n        }\n        return this;\n    };\n    /** Destroys the plugin, don't use after this. */\n    BasePrepare.prototype.destroy = function () {\n        if (this.ticking) {\n            Ticker.system.remove(this.tick, this);\n        }\n        this.ticking = false;\n        this.addHooks = null;\n        this.uploadHooks = null;\n        this.renderer = null;\n        this.completes = null;\n        this.queue = null;\n        this.limiter = null;\n        this.uploadHookHelper = null;\n    };\n    return BasePrepare;\n}());\n\n/**\n * Built-in hook to upload PIXI.Texture objects to the GPU.\n * @private\n * @param renderer - instance of the webgl renderer\n * @param item - Item to check\n * @returns If item was uploaded.\n */\nfunction uploadBaseTextures(renderer, item) {\n    if (item instanceof BaseTexture) {\n        // if the texture already has a GL texture, then the texture has been prepared or rendered\n        // before now. If the texture changed, then the changer should be calling texture.update() which\n        // reuploads the texture without need for preparing it again\n        if (!item._glTextures[renderer.CONTEXT_UID]) {\n            renderer.texture.bind(item);\n        }\n        return true;\n    }\n    return false;\n}\n/**\n * Built-in hook to upload PIXI.Graphics to the GPU.\n * @private\n * @param renderer - instance of the webgl renderer\n * @param item - Item to check\n * @returns If item was uploaded.\n */\nfunction uploadGraphics(renderer, item) {\n    if (!(item instanceof Graphics)) {\n        return false;\n    }\n    var geometry = item.geometry;\n    // update dirty graphics to get batches\n    item.finishPoly();\n    geometry.updateBatches();\n    var batches = geometry.batches;\n    // upload all textures found in styles\n    for (var i = 0; i < batches.length; i++) {\n        var texture = batches[i].style.texture;\n        if (texture) {\n            uploadBaseTextures(renderer, texture.baseTexture);\n        }\n    }\n    // if its not batchable - update vao for particular shader\n    if (!geometry.batchable) {\n        renderer.geometry.bind(geometry, item._resolveDirectShader(renderer));\n    }\n    return true;\n}\n/**\n * Built-in hook to find graphics.\n * @private\n * @param item - Display object to check\n * @param queue - Collection of items to upload\n * @returns if a PIXI.Graphics object was found.\n */\nfunction findGraphics(item, queue) {\n    if (item instanceof Graphics) {\n        queue.push(item);\n        return true;\n    }\n    return false;\n}\n/**\n * The prepare plugin provides renderer-specific plugins for pre-rendering DisplayObjects. These plugins are useful for\n * asynchronously preparing and uploading to the GPU assets, textures, graphics waiting to be displayed.\n *\n * Do not instantiate this plugin directly. It is available from the `renderer.plugins` property.\n * See {@link PIXI.CanvasRenderer#plugins} or {@link PIXI.Renderer#plugins}.\n * @example\n * // Create a new application\n * const app = new PIXI.Application();\n * document.body.appendChild(app.view);\n *\n * // Don't start rendering right away\n * app.stop();\n *\n * // create a display object\n * const rect = new PIXI.Graphics()\n *     .beginFill(0x00ff00)\n *     .drawRect(40, 40, 200, 200);\n *\n * // Add to the stage\n * app.stage.addChild(rect);\n *\n * // Don't start rendering until the graphic is uploaded to the GPU\n * app.renderer.plugins.prepare.upload(app.stage, () => {\n *     app.start();\n * });\n * @memberof PIXI\n */\nvar Prepare = /** @class */ (function (_super) {\n    __extends(Prepare, _super);\n    /**\n     * @param {PIXI.Renderer} renderer - A reference to the current renderer\n     */\n    function Prepare(renderer) {\n        var _this = _super.call(this, renderer) || this;\n        _this.uploadHookHelper = _this.renderer;\n        // Add textures and graphics to upload\n        _this.registerFindHook(findGraphics);\n        _this.registerUploadHook(uploadBaseTextures);\n        _this.registerUploadHook(uploadGraphics);\n        return _this;\n    }\n    return Prepare;\n}(BasePrepare));\n\n/**\n * TimeLimiter limits the number of items handled by a {@link PIXI.BasePrepare} to a specified\n * number of milliseconds per frame.\n * @memberof PIXI\n */\nvar TimeLimiter = /** @class */ (function () {\n    /** @param maxMilliseconds - The maximum milliseconds that can be spent preparing items each frame. */\n    function TimeLimiter(maxMilliseconds) {\n        this.maxMilliseconds = maxMilliseconds;\n        this.frameStart = 0;\n    }\n    /** Resets any counting properties to start fresh on a new frame. */\n    TimeLimiter.prototype.beginFrame = function () {\n        this.frameStart = Date.now();\n    };\n    /**\n     * Checks to see if another item can be uploaded. This should only be called once per item.\n     * @returns - If the item is allowed to be uploaded.\n     */\n    TimeLimiter.prototype.allowedToUpload = function () {\n        return Date.now() - this.frameStart < this.maxMilliseconds;\n    };\n    return TimeLimiter;\n}());\n\nexport { BasePrepare, CountLimiter, Prepare, TimeLimiter };\n//# sourceMappingURL=prepare.js.map\n","/*!\n * @pixi/spritesheet - v6.4.2\n * Compiled Thu, 02 Jun 2022 15:39:26 UTC\n *\n * @pixi/spritesheet is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { Rectangle } from '@pixi/math';\nimport { Texture, BaseTexture } from '@pixi/core';\nimport { getResolutionOfUrl, url } from '@pixi/utils';\nimport { LoaderResource } from '@pixi/loaders';\n\n/**\n * Utility class for maintaining reference to a collection\n * of Textures on a single Spritesheet.\n *\n * To access a sprite sheet from your code you may pass its JSON data file to Pixi's loader:\n *\n * ```js\n * PIXI.Loader.shared.add(\"images/spritesheet.json\").load(setup);\n *\n * function setup() {\n *   let sheet = PIXI.Loader.shared.resources[\"images/spritesheet.json\"].spritesheet;\n *   ...\n * }\n * ```\n *\n * Alternately, you may circumvent the loader by instantiating the Spritesheet directly:\n * ```js\n * const sheet = new PIXI.Spritesheet(texture, spritesheetData);\n * sheet.parse(() => console.log('Spritesheet ready to use!'));\n * ```\n *\n * With the `sheet.textures` you can create Sprite objects,`sheet.animations` can be used to create an AnimatedSprite.\n *\n * Sprite sheets can be packed using tools like {@link https://codeandweb.com/texturepacker|TexturePacker},\n * {@link https://renderhjs.net/shoebox/|Shoebox} or {@link https://github.com/krzysztof-o/spritesheet.js|Spritesheet.js}.\n * Default anchor points (see {@link PIXI.Texture#defaultAnchor}) and grouping of animation sprites are currently only\n * supported by TexturePacker.\n * @memberof PIXI\n */\nvar Spritesheet = /** @class */ (function () {\n    /**\n     * @param texture - Reference to the source BaseTexture object.\n     * @param {object} data - Spritesheet image data.\n     * @param resolutionFilename - The filename to consider when determining\n     *        the resolution of the spritesheet. If not provided, the imageUrl will\n     *        be used on the BaseTexture.\n     */\n    function Spritesheet(texture, data, resolutionFilename) {\n        if (resolutionFilename === void 0) { resolutionFilename = null; }\n        this._texture = texture instanceof Texture ? texture : null;\n        this.baseTexture = texture instanceof BaseTexture ? texture : this._texture.baseTexture;\n        this.textures = {};\n        this.animations = {};\n        this.data = data;\n        var resource = this.baseTexture.resource;\n        this.resolution = this._updateResolution(resolutionFilename || (resource ? resource.url : null));\n        this._frames = this.data.frames;\n        this._frameKeys = Object.keys(this._frames);\n        this._batchIndex = 0;\n        this._callback = null;\n    }\n    /**\n     * Generate the resolution from the filename or fallback\n     * to the meta.scale field of the JSON data.\n     * @param resolutionFilename - The filename to use for resolving\n     *        the default resolution.\n     * @returns Resolution to use for spritesheet.\n     */\n    Spritesheet.prototype._updateResolution = function (resolutionFilename) {\n        if (resolutionFilename === void 0) { resolutionFilename = null; }\n        var scale = this.data.meta.scale;\n        // Use a defaultValue of `null` to check if a url-based resolution is set\n        var resolution = getResolutionOfUrl(resolutionFilename, null);\n        // No resolution found via URL\n        if (resolution === null) {\n            // Use the scale value or default to 1\n            resolution = scale !== undefined ? parseFloat(scale) : 1;\n        }\n        // For non-1 resolutions, update baseTexture\n        if (resolution !== 1) {\n            this.baseTexture.setResolution(resolution);\n        }\n        return resolution;\n    };\n    /**\n     * Parser spritesheet from loaded data. This is done asynchronously\n     * to prevent creating too many Texture within a single process.\n     * @param {Function} callback - Callback when complete returns\n     *        a map of the Textures for this spritesheet.\n     */\n    Spritesheet.prototype.parse = function (callback) {\n        this._batchIndex = 0;\n        this._callback = callback;\n        if (this._frameKeys.length <= Spritesheet.BATCH_SIZE) {\n            this._processFrames(0);\n            this._processAnimations();\n            this._parseComplete();\n        }\n        else {\n            this._nextBatch();\n        }\n    };\n    /**\n     * Process a batch of frames\n     * @param initialFrameIndex - The index of frame to start.\n     */\n    Spritesheet.prototype._processFrames = function (initialFrameIndex) {\n        var frameIndex = initialFrameIndex;\n        var maxFrames = Spritesheet.BATCH_SIZE;\n        while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {\n            var i = this._frameKeys[frameIndex];\n            var data = this._frames[i];\n            var rect = data.frame;\n            if (rect) {\n                var frame = null;\n                var trim = null;\n                var sourceSize = data.trimmed !== false && data.sourceSize\n                    ? data.sourceSize : data.frame;\n                var orig = new Rectangle(0, 0, Math.floor(sourceSize.w) / this.resolution, Math.floor(sourceSize.h) / this.resolution);\n                if (data.rotated) {\n                    frame = new Rectangle(Math.floor(rect.x) / this.resolution, Math.floor(rect.y) / this.resolution, Math.floor(rect.h) / this.resolution, Math.floor(rect.w) / this.resolution);\n                }\n                else {\n                    frame = new Rectangle(Math.floor(rect.x) / this.resolution, Math.floor(rect.y) / this.resolution, Math.floor(rect.w) / this.resolution, Math.floor(rect.h) / this.resolution);\n                }\n                //  Check to see if the sprite is trimmed\n                if (data.trimmed !== false && data.spriteSourceSize) {\n                    trim = new Rectangle(Math.floor(data.spriteSourceSize.x) / this.resolution, Math.floor(data.spriteSourceSize.y) / this.resolution, Math.floor(rect.w) / this.resolution, Math.floor(rect.h) / this.resolution);\n                }\n                this.textures[i] = new Texture(this.baseTexture, frame, orig, trim, data.rotated ? 2 : 0, data.anchor);\n                // lets also add the frame to pixi's global cache for 'from' and 'fromLoader' functions\n                Texture.addToCache(this.textures[i], i);\n            }\n            frameIndex++;\n        }\n    };\n    /** Parse animations config. */\n    Spritesheet.prototype._processAnimations = function () {\n        var animations = this.data.animations || {};\n        for (var animName in animations) {\n            this.animations[animName] = [];\n            for (var i = 0; i < animations[animName].length; i++) {\n                var frameName = animations[animName][i];\n                this.animations[animName].push(this.textures[frameName]);\n            }\n        }\n    };\n    /** The parse has completed. */\n    Spritesheet.prototype._parseComplete = function () {\n        var callback = this._callback;\n        this._callback = null;\n        this._batchIndex = 0;\n        callback.call(this, this.textures);\n    };\n    /** Begin the next batch of textures. */\n    Spritesheet.prototype._nextBatch = function () {\n        var _this = this;\n        this._processFrames(this._batchIndex * Spritesheet.BATCH_SIZE);\n        this._batchIndex++;\n        setTimeout(function () {\n            if (_this._batchIndex * Spritesheet.BATCH_SIZE < _this._frameKeys.length) {\n                _this._nextBatch();\n            }\n            else {\n                _this._processAnimations();\n                _this._parseComplete();\n            }\n        }, 0);\n    };\n    /**\n     * Destroy Spritesheet and don't use after this.\n     * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n     */\n    Spritesheet.prototype.destroy = function (destroyBase) {\n        var _a;\n        if (destroyBase === void 0) { destroyBase = false; }\n        for (var i in this.textures) {\n            this.textures[i].destroy();\n        }\n        this._frames = null;\n        this._frameKeys = null;\n        this.data = null;\n        this.textures = null;\n        if (destroyBase) {\n            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();\n            this.baseTexture.destroy();\n        }\n        this._texture = null;\n        this.baseTexture = null;\n    };\n    /** The maximum number of Textures to build per process. */\n    Spritesheet.BATCH_SIZE = 1000;\n    return Spritesheet;\n}());\n/**\n * Reference to Spritesheet object created.\n * @member {PIXI.Spritesheet} spritesheet\n * @memberof PIXI.LoaderResource\n * @instance\n */\n/**\n * Dictionary of textures from Spritesheet.\n * @member {Object<string, PIXI.Texture>} textures\n * @memberof PIXI.LoaderResource\n * @instance\n */\n\n/**\n * {@link PIXI.Loader} middleware for loading texture atlases that have been created with\n * TexturePacker or similar JSON-based spritesheet.\n *\n * This middleware automatically generates Texture resources.\n *\n * If you're using Webpack or other bundlers and plan on bundling the atlas' JSON,\n * use the {@link PIXI.Spritesheet} class to directly parse the JSON.\n *\n * The Loader's image Resource name is automatically appended with `\"_image\"`.\n * If a Resource with this name is already loaded, the Loader will skip parsing the\n * Spritesheet. The code below will generate an internal Loader Resource called `\"myatlas_image\"`.\n * @example\n * loader.add('myatlas', 'path/to/myatlas.json');\n * loader.load(() => {\n *   loader.resources.myatlas; // atlas JSON resource\n *   loader.resources.myatlas_image; // atlas Image resource\n * });\n * @memberof PIXI\n */\nvar SpritesheetLoader = /** @class */ (function () {\n    function SpritesheetLoader() {\n    }\n    /**\n     * Called after a resource is loaded.\n     * @see PIXI.Loader.loaderMiddleware\n     * @param resource\n     * @param next\n     */\n    SpritesheetLoader.use = function (resource, next) {\n        var _a, _b;\n        // because this is middleware, it execute in loader context. `this` = loader\n        var loader = this;\n        var imageResourceName = resource.name + \"_image\";\n        // skip if no data, its not json, it isn't spritesheet data, or the image resource already exists\n        if (!resource.data\n            || resource.type !== LoaderResource.TYPE.JSON\n            || !resource.data.frames\n            || loader.resources[imageResourceName]) {\n            next();\n            return;\n        }\n        // Check and add the multi atlas\n        // Heavily influenced and based on https://github.com/rocket-ua/pixi-tps-loader/blob/master/src/ResourceLoader.js\n        // eslint-disable-next-line camelcase\n        var multiPacks = (_b = (_a = resource.data) === null || _a === void 0 ? void 0 : _a.meta) === null || _b === void 0 ? void 0 : _b.related_multi_packs;\n        if (Array.isArray(multiPacks)) {\n            var _loop_1 = function (item) {\n                if (typeof item !== 'string') {\n                    return \"continue\";\n                }\n                var itemName = item.replace('.json', '');\n                var itemUrl = url.resolve(resource.url.replace(loader.baseUrl, ''), item);\n                // Check if the file wasn't already added as multipacks are redundant\n                if (loader.resources[itemName]\n                    || Object.values(loader.resources).some(function (r) { return url.format(url.parse(r.url)) === itemUrl; })) {\n                    return \"continue\";\n                }\n                var options = {\n                    crossOrigin: resource.crossOrigin,\n                    loadType: LoaderResource.LOAD_TYPE.XHR,\n                    xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON,\n                    parentResource: resource,\n                    metadata: resource.metadata\n                };\n                loader.add(itemName, itemUrl, options);\n            };\n            for (var _i = 0, multiPacks_1 = multiPacks; _i < multiPacks_1.length; _i++) {\n                var item = multiPacks_1[_i];\n                _loop_1(item);\n            }\n        }\n        var loadOptions = {\n            crossOrigin: resource.crossOrigin,\n            metadata: resource.metadata.imageMetadata,\n            parentResource: resource,\n        };\n        var resourcePath = SpritesheetLoader.getResourcePath(resource, loader.baseUrl);\n        // load the image for this sheet\n        loader.add(imageResourceName, resourcePath, loadOptions, function onImageLoad(res) {\n            if (res.error) {\n                next(res.error);\n                return;\n            }\n            var spritesheet = new Spritesheet(res.texture, resource.data, resource.url);\n            spritesheet.parse(function () {\n                resource.spritesheet = spritesheet;\n                resource.textures = spritesheet.textures;\n                next();\n            });\n        });\n    };\n    /**\n     * Get the spritesheets root path\n     * @param resource - Resource to check path\n     * @param baseUrl - Base root url\n     */\n    SpritesheetLoader.getResourcePath = function (resource, baseUrl) {\n        // Prepend url path unless the resource image is a data url\n        if (resource.isDataUrl) {\n            return resource.data.meta.image;\n        }\n        return url.resolve(resource.url.replace(baseUrl, ''), resource.data.meta.image);\n    };\n    return SpritesheetLoader;\n}());\n\nexport { Spritesheet, SpritesheetLoader };\n//# sourceMappingURL=spritesheet.js.map\n"],"names":["prototype","_renderCanvas","_renderer","renderCanvas","renderer","this","visible","worldAlpha","renderable","_mask","maskManager","pushMask","i","j","children","length","popMask","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","uploadBaseTextures","prepare","item","tempPrepare","image","source","imageWidth","width","canvas","Math","min","imageHeight","height","ctx","drawImage","CanvasPrepare","_super","_this","call","uploadHookHelper","document","createElement","getContext","registerUploadHook","__","constructor","create","__extends","destroy","CanvasMaskManager","_foundShapes","maskData","maskObject","context","save","foundShapes","recursiveFindShapes","beginPath","shape","transform","worldTransform","setContextTransform","renderGraphicsShape","clip","container","out","geometry","graphicsData","push","graphics","finishPoly","len","data","type","POLY","points","holes","outerArea","innerArea","px","py","moveTo","lineTo","k","closeStroke","closePath","RECT","rect","x","y","CIRC","arc","radius","PI","ELIP","w","h","kappa","ox","oy","xe","ye","xm","ym","bezierCurveTo","RREC","rx","ry","maxRadius","quadraticCurveTo","restore","invalidateBlendMode","createColoredCanvas","color","fillStyle","fillRect","canUseNewCanvasBlendModes","magenta","yellow","globalCompositeOperation","imageData","getImageData","tempMatrix","CanvasRenderer","options","array","CANVAS","refresh","smoothProperty","blendModes","NORMAL","ADD","MULTIPLY","SCREEN","OVERLAY","DARKEN","LIGHTEN","COLOR_DODGE","COLOR_BURN","HARD_LIGHT","SOFT_LIGHT","DIFFERENCE","EXCLUSION","HUE","SATURATION","COLOR","LUMINOSITY","NORMAL_NPM","ADD_NPM","SCREEN_NPM","SRC_IN","SRC_OUT","SRC_ATOP","DST_OVER","DST_IN","DST_OUT","DST_ATOP","XOR","SUBTRACT","renderingToScreen","_activeBlendMode","_projTransform","_outerBlend","rootContext","view","alpha","useContextAlpha","imageSmoothingEnabled","rc","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled","initPlugins","__plugins","resize","addSystem","render","displayObject","renderTexture","clear","skipUpdateTransform","arguments","emit","rootResolution","resolution","castToBaseTexture","_canvasRenderTarget","resource","valid","_lastObjectRendered","cacheParent","enableTempParent","updateTransform","disableTempParent","setTransform","globalAlpha","undefined","clearBeforeRender","clearRect","backgroundAlpha","_backgroundColorString","clearColor","realWidth","realHeight","tempContext","roundPixels","localResolution","mat","proj","copyFrom","prepend","a","c","tx","ty","setBlendMode","blendMode","readyForOuterBlend","outerBlend","removeView","desiredScreenWidth","desiredScreenHeight","SCALE_MODE","LINEAR","indexOf","registerPlugin","pluginName","ctor","canvasUtils","getTintedCanvas","sprite","texture","stringColor","roundColor","toString","slice","tintCache","cachedCanvas","tintId","_updateID","tintMethod","convertTintToImage","tintImage","Image","src","toDataURL","getTintedPattern","patternCache","pattern","createPattern","tintWithMultiply","crop","_frame","clone","baseTexture","ceil","getDrawableSource","tintWithOverlay","tintWithPerPixel","rgbValues","r","g","pixelData","pixels","putImageData","step","cacheStepsPerColorChannel","canUseMultiply","parentCreate","forceCanvas","err","bitmap","canvasRenderWorldTransform","CanvasSpriteRenderer","_texture","wt","dx","dy","orig","smoothingEnabled","scaleMode","trim","anchor","rotate","copyTo","matrixAppendRotationInv","tint","_cachedTint","_tintedCanvas","floor","plugins","LINE_JOIN","LINE_CAP","GRAPHICS_CURVES","adaptive","maxLength","minSegments","maxSegments","epsilon","_segmentsCount","defaultSegments","isNaN","result","FillStyle","WHITE","matrix","reset","obj","fixOrientation","hole","_a","_b","m","area","x1","y1","x2","y2","n","i1","i2","i3","i4","buildPoly","build","triangulate","graphicsGeometry","verts","indices","holeArray","concat","triangles","vertPos","buildCircle","circle","ellipse","roundedRect","halfWidth","halfHeight","max","sqrt","x0","y0","j1","j2","j3","j4","cos","sin","center","getPt","n1","n2","perc","quadraticBezierCurve","fromX","fromY","cpX","cpY","toX","toY","xa","ya","xb","yb","buildRoundedRectangle","Graphics","nextRoundedRectBehavior","rrectData","vecPos","square","nx","ny","innerWeight","outerWeight","clockwise","exx","eyy","eix","eiy","eox","eoy","round","cx","cy","sx","sy","ex","ey","cx2p0x","cy2p0y","angle0","atan2","angle1","startAngle","angleDiff","absAngleDiff","abs","segCount","angleInc","angle","buildLine","lineStyle","native","closedShape","startIndex","currentIndex","buildNativeLine","eps","closePointEps","style","firstPoint","lastPoint","closedPath","pop","set","midPointX","midPointY","unshift","indexCount","indexStart","widthSquared","miterLimitSquared","miterLimit","perpx","perpy","perp1x","perp1y","dist","ratio","alignment","cap","ROUND","SQUARE","dx0","dy0","dx1","dy1","cross","c1","c2","pdist","imx","imy","omx","omy","insideWeight","join","BEVEL","MITER","eps2","buildNonNativeLine","TEXT_GRADIENT","ArcUtils","curveTo","a1","b1","a2","b2","mm","dd","cc","tt","k1","k2","qx","qy","endAngle","anticlockwise","_startX","_startY","_anticlockwise","sweep","theta","theta2","cTheta","sTheta","segMinus","remainder","s","BezierUtils","curveLength","cpX2","cpY2","t","t2","t3","nt","nt2","nt3","prevX","prevY","dt","dt2","dt3","QuadraticUtils","ax","ay","bx","by","a32","ba","log","BatchPart","begin","attribStart","start","end","endIndex","endAttrib","attribSize","size","FILL_COMMANDS","rectData","BATCH_POOL","DRAW_CALL_POOL","GraphicsData","tmpPoint","tmpBounds","GraphicsGeometry","boundsPadding","uvsFloat32","indicesUint16","batchable","colors","uvs","textureIds","drawCalls","batchDirty","batches","dirty","cacheDirty","clearDirty","shapeIndex","_bounds","boundsDirty","defineProperty","get","calculateBounds","enumerable","configurable","invalidate","texArray","batchPart","drawShape","drawHole","lastShape","indexBuffer","containsPoint","point","applyInverse","contains","hitHole","i_1","updateBatches","allow32Indices","validateBatching","currentStyle","transformPoints","processHoles","nextTexture","index_1","attribIndex","wrapMode","REPEAT","processFill","processLine","_compareStyles","addUvs","index","attrib","need32","Uint32Array","Uint16Array","isBatchable","packBatches","buildDrawCalls","styleA","styleB","l","fill","line","Float32Array","batch","BATCHABLE_SIZE","TICK","_globalBatch","currentGroup","count","TRIANGLES","textureCount","currentTexture","textureId","drawMode","LINES","_batchEnabled","touched","_batchLocation","elements","addColors","addTextureIds","packAttributes","glPoints","ArrayBuffer","f32","u32","_buffer","update","_indexBuffer","bounds","sequenceBounds","curMatrix","IDENTITY","nextMatrix","lineWidth","isEmpty","addBoundsMatrix","addFramePad","poly","addVerticesMatrix","pad","offset","rgb","rgba","id","uvsStart","frame","adjustUvs","finish","scaleX","scaleY","offsetX","offsetY","minX","minY","LineStyle","apply","BUTT","temp","DEFAULT_SHADERS","shader","currentPath","batchTint","vertexData","_fillStyle","_lineStyle","_matrix","_holeMode","state","for2d","_geometry","refCount","_transformID","value","_tint","lineTextureStyle","assign","startPoly","invert","_initCurve","arcTo","radius_1","startX","startY","xDiff","yDiff","beginFill","beginTextureFill","endFill","drawRect","drawRoundedRect","drawCircle","drawEllipse","drawPolygon","arguments$1","path","_i","isArray","_boundsID","isFastRect","_render","hasuint32","supports","uint32Indices","_populateBatches","_renderBatched","flush","_renderDirect","gI","buffer","_batchRGB","_tintRGB","setObjectRenderer","calculateVertices","calculateTints","_resolveDirectShader","uniforms","translationMatrix","bind","_renderDrawCallDirect","drawCall","groupTextureCount","draw","MAX_TEXTURES","sampleValues","Int32Array","default","from","uSamplers","program","_shader","_calculateBounds","maxX","maxY","addFrame","_TEMP_POINT","tintRGB","wtID","_worldID","setMatrix","beginHole","endHole","dispose","defaultStyle","align","breakWords","dropShadow","dropShadowAlpha","dropShadowAngle","dropShadowBlur","dropShadowColor","dropShadowDistance","fillGradientType","LINEAR_VERTICAL","fillGradientStops","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","letterSpacing","lineHeight","lineJoin","padding","stroke","strokeThickness","textBaseline","whiteSpace","wordWrap","wordWrapWidth","leading","genericFontFamilies","TextStyle","styleID","deepCopyProperties","clonedProperties","_align","_breakWords","_dropShadow","_dropShadowAlpha","_dropShadowAngle","_dropShadowBlur","_dropShadowColor","outputColor","getColor","_dropShadowDistance","_fill","_fillGradientType","_fillGradientStops","array1","array2","areArraysEqual","_fontFamily","_fontSize","_fontStyle","_fontVariant","_fontWeight","_letterSpacing","_lineHeight","_leading","_lineJoin","_miterLimit","_padding","_stroke","_strokeThickness","_textBaseline","_trim","_whiteSpace","_wordWrap","_wordWrapWidth","toFontString","fontSizeString","fontFamilies","split","test","getSingleColor","replace","target","propertyObj","prop","TextMetrics","text","lines","lineWidths","maxLineWidth","fontProperties","measureText","_canvas","font","measureFont","ascent","cache","collapseSpaces","collapseNewlines","canPrependSpaces","tokens","tokenize","token","isNewline","addLine","currIsBreakingSpace","isBreakingSpace","lastIsBreakingSpace","tokenWidth","getFromCache","canBreakWords","characters","wordWrapSplit","char","nextChar","lastChar","canBreakChars","characterWidth","isLastToken","newLine","trimRight","key","spacing","_newlines","charCodeAt","_nextChar","_breakingSpaces","_token","_char","_index","_fonts","properties","descent","_context","metricsString","METRICS_STRING","BASELINE_SYMBOL","baseline","HEIGHT_MULTIPLIER","BASELINE_MULTIPLIER","fillText","imagedata","idx","stop","clearMetrics","__canvas","OffscreenCanvas","__context","defaultDestroyOptions","Text","ownCanvas","_ownCanvas","_resolution","settings","RESOLUTION","_autoResolution","_text","_style","_styleListener","_font","localStyleID","updateText","respectDirty","linePositionX","linePositionY","measured","scale","passesCount","isShadowPass","dsOffsetText","dsOffsetShadow","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","_generateFillStyle","linePositionYShift","nextLineHeightBehavior","drawLetterSpacing","updateTexture","isStroke","supportLetterSpacing","experimentalLetterSpacing","CanvasRenderingContext2D","textLetterSpacing","strokeText","currentPosition","stringArray","previousWidth","currentWidth","currentChar","textStr","trimmed","_onTextureUpdate","setRealSize","updateUvs","getBounds","skipUpdate","_textureID","getLocalBounds","addQuad","metrics","gradient","dropShadowCorrection","lengthPlus1","createLinearGradient","textHeight","lastLineBottom","thisLineTop","thisLineGradientStart","thisLineBottom","nextLineTop","thisLineGradientEnd","gradStopLineHeight","lineStop","globalStop","Number","toFixed","addColorStop","totalIterations","currentIteration","_width","_height","String","UPLOADS_PER_FRAME","CountLimiter","maxItemsPerFrame","itemsLeft","beginFrame","allowedToUpload","findMultipleBaseTextures","queue","_textures","findBaseTexture","findTexture","drawText","_helper","calculateTextStyle","findText","findTextStyle","BasePrepare","limiter","addHooks","uploadHooks","completes","ticking","delayedTick","prepareItems","registerFindHook","upload","done","add","system","addOnce","tick","UTILITY","setTimeout","uploaded","_destroyed","shift","addHook","uploadHook","remove","_glTextures","CONTEXT_UID","uploadGraphics","findGraphics","Prepare","TimeLimiter","maxMilliseconds","frameStart","Date","now","Spritesheet","resolutionFilename","textures","animations","_updateResolution","url","_frames","frames","_frameKeys","keys","_batchIndex","_callback","meta","parseFloat","setResolution","parse","callback","BATCH_SIZE","_processFrames","_processAnimations","_parseComplete","_nextBatch","initialFrameIndex","frameIndex","maxFrames","sourceSize","rotated","spriteSourceSize","addToCache","animName","frameName","destroyBase","SpritesheetLoader","use","next","loader","imageResourceName","name","TYPE","JSON","resources","multiPacks","related_multi_packs","_loop_1","itemName","itemUrl","resolve","baseUrl","values","some","format","crossOrigin","loadType","LOAD_TYPE","XHR","xhrType","XHR_RESPONSE_TYPE","parentResource","metadata","multiPacks_1","loadOptions","imageMetadata","resourcePath","getResourcePath","res","error","spritesheet","isDataUrl"],"sourceRoot":""}